import{a as l}from"./chunk-RPPKD3MC.js";import{a as c}from"./chunk-32SRTGJU.js";import{u as h}from"./chunk-KB4EY57F.js";import{h as u,ka as n,pa as r}from"./chunk-YECJCXI6.js";import{a as o,b as a}from"./chunk-CWTPBX7D.js";var p=(()=>{class s{constructor(e,t){this.authCookie=e,this.router=t,this.userSubject=new u(this.loadUser()),this.user$=this.userSubject.asObservable(),this.apiUrl=c.MasterApi+"/auth/avatar/"}loadUser(){return this.authCookie.getUser()}getUser(){let e=this.userSubject.value;return e&&(e.image=e.image||`${this.apiUrl}${e.id}`),this.userSubject.value}setUser(e,t=!1){this.authCookie.setUser(e,t),this.userSubject.next(e)}setImageUrl(e){let t=this.getUser();if(t){let i=a(o({},t),{image:e});this.setUser(i)}}setToken(e,t=!1){this.authCookie.setToken(e,t)}getToken(){return this.authCookie.getToken()}logout(){this.authCookie.removeToken(),this.authCookie.removeUser(),this.userSubject.next(null),this.router.navigate(["/authentication/login"])}isLoggedIn(){return!!this.getToken()&&!!this.getUser()}saveSession(e,t,i=!1){this.setToken(e,i),this.setUser(t,i)}static{this.\u0275fac=function(t){return new(t||s)(r(l),r(h))}}static{this.\u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{p as a};
