import{a as D}from"./chunk-FGPRL24T.js";import{a as j}from"./chunk-KODYOS2E.js";import"./chunk-3A2N74CX.js";import"./chunk-M63T62QT.js";import{a as L}from"./chunk-2S7OECMZ.js";import{a as k}from"./chunk-XSXBVDCX.js";import{a as F}from"./chunk-3PIGAWKT.js";import{r as A}from"./chunk-OQDD5AUH.js";import"./chunk-WIB4C2YZ.js";import"./chunk-6TAJW53V.js";import{c as x,f as E,j as T,y as R,z as W}from"./chunk-OVKDPXDD.js";import{u as N,w as S}from"./chunk-KKCOZWDK.js";import{$c as b,Jb as s,Kb as n,M as v,Qb as C,Sb as _,ac as m,cc as f,ec as w,fb as a,fc as g,gb as d,gc as h,ha as c,id as I,ra as M,sa as u,t as P,xb as y,zb as l}from"./chunk-PXJRLMEI.js";import"./chunk-CWTPBX7D.js";function O(e,V){if(e&1&&(s(0,"div",7),m(1),n()),e&2){let i=_();a(),f(" ",i.errorMessage," ")}}var q=(()=>{class e{constructor(i,o,t,p,r){this.router=i,this.registerService=o,this.authService=t,this.toast=p,this.cookie=r,this.isLoading=!1,this.errorMessage="",this.newPassword="",this.confirmPassword=""}ngOnInit(){this.userId=this.cookie.get("google_user_id"),this.userId||this.router.navigate(["/"])}onSubmitNewPassword(){if(this.newPassword!==this.confirmPassword){this.errorMessage="Passwords do not match";return}this.isLoading=!0,this.registerService.setPassword(this.userId,this.newPassword).pipe(v(i=>(this.isLoading=!1,this.toast.show(i.message||"Could not set password",{class:"bg-danger"}),P(null)))).subscribe(i=>{this.isLoading=!1,i?.token?(this.cookie.delete("requires_password"),this.cookie.delete("google_user_id"),this.authService.setToken(i.token),this.router.navigate(["/home"])):this.errorMessage="Unexpected server response"})}static{this.\u0275fac=function(o){return new(o||e)(d(N),d(D),d(L),d(F),d(k))}}static{this.\u0275cmp=M({type:e,selectors:[["app-set-password"]],decls:14,vars:7,consts:[[1,"card","shadow","p-4",2,"width","400px","border-radius","15px"],[1,"mb-3","text-center"],[1,"form-group","mb-3"],[1,"form-label"],["type","password",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","alert alert-danger py-1",4,"ngIf"],[1,"btn","btn-primary","w-100",3,"click","disabled"],[1,"alert","alert-danger","py-1"]],template:function(o,t){o&1&&(s(0,"div",0)(1,"h5",1),m(2,"Set Your Password"),n(),s(3,"div",2)(4,"label",3),m(5,"New Password"),n(),s(6,"input",4),h("ngModelChange",function(r){return g(t.newPassword,r)||(t.newPassword=r),r}),n()(),s(7,"div",2)(8,"label",3),m(9,"Confirm Password"),n(),s(10,"input",4),h("ngModelChange",function(r){return g(t.confirmPassword,r)||(t.confirmPassword=r),r}),n()(),y(11,O,2,1,"div",5),s(12,"button",6),C("click",function(){return t.onSubmitNewPassword()}),m(13),n()()),o&2&&(a(6),w("ngModel",t.newPassword),l("disabled",t.isLoading),a(4),w("ngModel",t.confirmPassword),l("disabled",t.isLoading),a(),l("ngIf",t.errorMessage),a(),l("disabled",t.isLoading),a(),f(" ",t.isLoading?"Saving...":"Save Password"," "))},dependencies:[b,x,E,T]})}}return e})();var U=[{path:"",component:q,data:{title:"PostNew | Set Password",description:"Set your password for PostNew portal to access services",keywords:"PostNew, set password, authentication, portal",robots:"index, follow"},canActivate:[j]}],G=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=c({imports:[S.forChild(U),S]})}}return e})();var le=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=c({imports:[I,G,R,W,A]})}}return e})();export{le as SetPasswordModule};
