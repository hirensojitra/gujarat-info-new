import{a as U}from"./chunk-FROUF5SN.js";import{N as $,e as B}from"./chunk-E537KJCK.js";import{a as N}from"./chunk-P2Y25467.js";import"./chunk-S6FKRGRX.js";import"./chunk-VWVYJ5NX.js";import"./chunk-E7GWMVA6.js";import"./chunk-WVD7KDO5.js";import{r as j,t as D,u as O,v as y}from"./chunk-BWZ6RO2W.js";import{Ab as P,Ac as R,Cc as A,Da as k,Jb as T,Ma as r,Na as u,Z as f,ab as _,cb as a,f as I,ha as C,ia as h,ib as o,jb as s,kb as b,lb as S,mb as M,nb as v,ob as p,pb as c,qa as g,ra as d,rc as V,sa as L,sc as F,ta as w,tc as E,yb as l}from"./chunk-UQPPIRHC.js";var z=(e,m)=>({"btn-outline-dark":e,"btn-outline-primary active":m});function J(e,m){if(e&1&&(o(0,"a",26),b(1,"i",27),l(2,"Edit"),s()),e&2){let t=c().$implicit;a("routerLink","/images/generate?img="+t.id)}}function K(e,m){if(e&1){let t=v();o(0,"div",16)(1,"div",17),L(),o(2,"svg",18),p("backgroundLoaded",function(){g(t);let n=c(2);return d(n.onSvgLoad())}),s(),w(),o(3,"div",19)(4,"div",20),_(5,J,3,1,"a",21),o(6,"a",22),b(7,"i",23),l(8,"View"),s()()(),o(9,"span",24),l(10),o(11,"span",25),l(12,"unread messages"),s()()()()}if(e&2){let t=m.$implicit,i=c(2);r(2),a("postDataSet",t)("loadOnly",!0),r(3),a("ngIf",i.isAdmin()),r(),a("routerLink","/poster/"+t.id),r(4),P(" ",t.download_counter," ")}}function Q(e,m){if(e&1){let t=v();o(0,"button",28),p("click",function(){let n=g(t).$implicit,x=c(2);return d(x.onPageChange(n))}),l(1),s()}if(e&2){let t=m.$implicit,i=c(2);a("ngClass",T(2,z,t!==i.currentPage,t===i.currentPage)),r(),P(" ",t," ")}}function W(e,m){if(e&1){let t=v();S(0),o(1,"div",9)(2,"div",10),_(3,K,13,5,"div",11),s()(),o(4,"div",12)(5,"div",13)(6,"button",14),p("click",function(){g(t);let n=c();return d(n.onPageChange(1))}),l(7,"First"),s(),o(8,"button",14),p("click",function(){g(t);let n=c();return d(n.onPageChange(n.currentPage-1))}),l(9,"Previous"),s(),_(10,Q,2,5,"button",15),o(11,"button",14),p("click",function(){g(t);let n=c();return d(n.onPageChange(n.currentPage+1))}),l(12,"Next"),s(),o(13,"button",14),p("click",function(){g(t);let n=c();return d(n.onPageChange(n.totalPages))}),l(14,"Last"),s()()(),M()}if(e&2){let t=c();r(3),a("ngForOf",t.posts),r(3),a("disabled",t.currentPage===1),r(2),a("disabled",t.currentPage===1),r(2),a("ngForOf",t.getPaginationControls()),r(),a("disabled",t.currentPage===t.totalPages),r(2),a("disabled",t.currentPage===t.totalPages)}}var G=(()=>{class e{constructor(t,i,n,x,Y){this.PS=t,this.route=i,this.router=n,this.authService=x,this.platformId=Y,this.posts=[],this.imageUrls=[],this.currentPage=1,this.totalPages=0,this.totalLength=0,this.isBrowser=A(this.platformId)}ngOnInit(){return I(this,null,function*(){if(this.isBrowser){let t=yield import("./chunk-HRU3MFCF.js")}this.route.queryParams.subscribe(t=>{this.currentPage=+t.page||1,this.getAllPosts(),this.getTotalPostLength()})})}ngAfterViewInit(){setTimeout(()=>{if(this.isBrowser){let t=document.getElementById("masonry-grid");this.masonryInstance=new Masonry(t,{itemSelector:".masonry-box",percentPosition:!0})}},1500)}getAllPosts(){this.PS.getAllPosts(this.currentPage).subscribe(t=>{this.posts=t,this.generateImageUrls()})}generateImageUrls(){this.imageUrls=this.posts.map(()=>this.getRandomImage(1080,1920))}getTotalPostLength(){this.PS.getTotalPostLength().subscribe(t=>{this.totalLength=t.totalLength,this.calculateTotalPages()})}calculateTotalPages(){this.totalPages=Math.ceil(this.totalLength/12)}onPageChange(t){this.currentPage!==t&&(this.currentPage=t,this.updateUrlParams())}getPaginationControls(){return Array.from({length:this.totalPages},(t,i)=>i+1)}updateUrlParams(){this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage},queryParamsHandling:"merge"})}isAdmin(){return this.authService.hasRole(["admin","master"])}getRandomImage(t,i){return"https://dummyimage.com/"+(Math.floor(Math.random()*(i-t+1))+t)+"x"+(Math.floor(Math.random()*(i-t+1))+t)+"/F5F5F5/000"}onSvgLoad(){this.masonryInstance&&this.masonryInstance.layout()}static{this.\u0275fac=function(i){return new(i||e)(u(U),u(j),u(D),u(N),u(k))}}static{this.\u0275cmp=C({type:e,selectors:[["app-image-list"]],decls:10,vars:2,consts:[[1,"h-100","d-flex","flex-column","p-3"],[1,"flex-grow-1","position-relative","overflow-hidden"],[1,"position-absolute","h-100","w-100","d-flex","overflow-auto","flex-column"],[1,"container","h-100","w-100"],[1,"row","g-3"],[1,"col-12","pb-3"],["target","_blank",1,"btn","btn-success",3,"routerLink"],[1,"fa","fa-plus","me-2"],[4,"ngIf"],[1,"col-12","px-3"],["data-masonry","{'percentPosition': true }","id","masonry-grid",1,"row","g-3"],["class","col-lg-2 col-md-3 col-sm-4 col-6 masonry-box",4,"ngFor","ngForOf"],[1,"col-12"],[1,"btn-group","btn-group-toggle","py-3"],[1,"btn","btn-outline-dark",3,"click","disabled"],["class","btn",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-lg-2","col-md-3","col-sm-4","col-6","masonry-box"],[1,"position-relative"],["preserveAspectRatio","xMidYMid meet","svgDraw","",1,"svg-content","max-w-100-p","max-h-100-p","img-fluid","m-auto","d-block",3,"backgroundLoaded","postDataSet","loadOnly"],[1,"d-flex","flex-column","position-absolute","start-0","top-0","h-100","w-100","p-3"],[1,"d-flex","mb-auto"],["class","btn btn-secondary btn-sm me-auto","target","_blank",3,"routerLink",4,"ngIf"],["target","_blank",1,"btn","btn-secondary","btn-sm","ms-auto",3,"routerLink"],[1,"fa","fa-eye"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"],[1,"visually-hidden"],["target","_blank",1,"btn","btn-secondary","btn-sm","me-auto",3,"routerLink"],[1,"fa","fa-edit"],[1,"btn",3,"click","ngClass"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6),b(7,"i",7),l(8,"Image"),s()(),_(9,W,15,6,"ng-container",8),s()()()()()),i&2&&(r(6),a("routerLink","/images/generate"),r(3),a("ngIf",n.posts.length))},dependencies:[V,F,E,O,B]})}}return e})();var X=[{path:"",component:G,data:{title:"Image List",breadcrumb:"Image List",description:"Your Page Description"}}],H=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=f({imports:[y.forChild(X),y]})}}return e})();var bt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=f({imports:[R,H,$]})}}return e})();export{bt as ImageListModule};
