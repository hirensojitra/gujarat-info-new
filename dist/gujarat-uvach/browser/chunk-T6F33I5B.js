import{a as K}from"./chunk-IBJUZ6QP.js";import{b as J,k as Z,r as ee}from"./chunk-LC4MWVDC.js";import{x as X,y as Y}from"./chunk-637AZWOF.js";import{a as W}from"./chunk-NLE7UQJM.js";import"./chunk-64FAQS26.js";import{a as H}from"./chunk-TF3KVUAE.js";import{a as $}from"./chunk-77ITHIYP.js";import{Aa as p,Da as j,E as v,Ea as k,Fa as F,Gb as q,Ha as h,Ia as T,Ib as O,J as z,Ja as x,Jb as Q,K as _,Kb as M,P as w,Q as y,Qa as A,X as E,Z as R,_a as D,aa as n,ba as m,fb as N,gb as U,la as f,ma as P,na as d,nb as V,oa as B,ob as G,ta as a,ua as c,va as C,wa as I,xa as b,ya as S,za as L}from"./chunk-6SCNQMZS.js";import{f as l}from"./chunk-CWTPBX7D.js";var se=["masonryGrid"],ae=()=>[12,24,48];function le(t,u){if(t&1&&(a(0,"div",3)(1,"div",4),C(2,"img",5),a(3,"div",6),C(4,"div",7),c(),a(5,"b",8),h(6),c()()()),t&2){let e=p();n(4),B("width",e.progress,"%"),P("aria-valuenow",e.progress),n(2),x("",e.progress,"%")}}function ce(t,u){if(t&1){let e=S();a(0,"div",20)(1,"h3",21),h(2),c(),a(3,"a",22)(4,"img",23),L("load",function(o){w(e);let r=p().$implicit,s=p(3);return y(s.onSvgLoad(r,o))}),c(),a(5,"span",24),h(6),a(7,"span",25),h(8,"unread messages"),c()()(),a(9,"p",26),h(10),c()()}if(t&2){let e=p().$implicit;n(2),x(" ",e.title," "),n(),d("routerLink","/poster/"+e.id),n(),d("src",e.image,R),P("alt",e.title),n(2),x(" Download: ",e.download_counter," "),n(4),T(e.info)}}function me(t,u){if(t&1&&(I(0),f(1,ce,11,6,"div",19),b()),t&2){let e=u.$implicit;n(),d("ngIf",(e==null?null:e.info_show)&&(e==null?null:e.image))}}function de(t,u){if(t&1&&(I(0),a(1,"div",16)(2,"div",17,0),f(4,me,2,1,"ng-container",18),c()(),b()),t&2){let e=p(2);n(4),d("ngForOf",e.posts)}}function pe(t,u){if(t&1){let e=S();a(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),f(5,de,5,1,"ng-container",14),c()()()(),a(6,"div",15),L("currentPageChange",function(o){w(e);let r=p();return y(r.changePage(o))})("pageSizeChange",function(o){w(e);let r=p();return y(r.changePageSize(o))}),c()()}if(t&2){let e=p();n(5),d("ngIf",e.posts.length),n(),d("currentPage",e.currentPage)("totalItems",e.pagination.totalPosts)("pageSize",e.limit)("pageSizes",A(5,ae))}}var ie=(()=>{class t{constructor(e,i,o,r,s,g,re,ne){this.PS=e,this.route=i,this.router=o,this.authService=r,this.platformId=s,this.cdr=g,this.platformService=re,this.colorService=ne,this.posts=[],this.currentPage=1,this.limit=12,this.search="",this.sortBy="created_at",this.order="desc",this.pagination={totalPosts:0,currentPage:1,totalPages:0},this.loading=!1,this.progress=0,this.imgUrl=$.MasterApi+"/thumb-images/",this.isBrowser=G(this.platformId)}ngOnInit(){return l(this,null,function*(){this.route.queryParams.subscribe(e=>l(this,null,function*(){this.currentPage=+e.page||1,this.limit=+e.limit||this.limit,this.search=e.search||this.search,this.sortBy=e.sortBy||this.sortBy,this.order=e.order||this.order,yield this.getAllPosts()}))})}ngAfterViewInit(){this.isBrowser&&(this.initializeMasonry(),window.addEventListener("resize",()=>{this.masonryInstance&&this.masonryInstance.layout()}))}initializeMasonry(){this.masonryGridRef&&this.isBrowser&&(this.masonryInstance=new Masonry(this.masonryGridRef.nativeElement,{itemSelector:".masonry-box",percentPosition:!0}))}getAllPosts(){return l(this,null,function*(){this.loading=!0,this.progress=0,this.PS.getAllPosts({page:this.currentPage,limit:this.limit,search:this.search,sortBy:this.sortBy,order:this.order}).subscribe(e=>l(this,null,function*(){let i=e.posts.filter(r=>r?.info_show).length,o=0;this.posts=yield Promise.all(e.posts.map(r=>l(this,null,function*(){if(r?.info_show){let s=this.imgUrl+r.id;r.image=yield this.convertImageToDataURI(s),o++,this.progress=Math.round(o/i*100)}return r}))),this.pagination=e.pagination,this.loading=!1,this.progress=100,this.cdr.detectChanges(),this.initializeMasonry()}))})}convertImageToDataURI(e){return l(this,null,function*(){if(!this.isBrowser)return e;try{let o=yield(yield fetch(e,{mode:"cors"})).blob();return new Promise((r,s)=>{let g=new FileReader;g.onloadend=()=>r(g.result),g.onerror=s,g.readAsDataURL(o)})}catch(i){return console.error("Error converting image to Data URI:",i),""}})}changePage(e){return l(this,null,function*(){this.currentPage!==e&&(this.currentPage=e,this.progress=0,this.loading=!0,yield this.updateUrlParams())})}changePageSize(e){return l(this,null,function*(){this.limit!==e&&(this.limit=e,this.currentPage=1,this.progress=0,this.loading=!0,yield this.updateUrlParams())})}updateUrlParams(){this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,limit:this.limit,search:this.search,sortBy:this.sortBy,order:this.order},queryParamsHandling:"merge"})}isAdmin(){return this.authService.hasRole(["admin","master"])}onSvgLoad(e,i){this.masonryInstance&&this.isBrowser&&window.dispatchEvent(new Event("resize"));let o=i?.target?.parentElement,r=e.image;r&&o&&this.getColors(r,5).then(s=>{s.length>0&&(o.style.backgroundColor=s[2])}).catch(s=>{console.error("Failed to fetch colors:",s)})}getColors(e,i){return l(this,null,function*(){try{return yield this.colorService.getColors(e,i)}catch(o){return console.error("Error updating colors:",o),[]}})}static{this.\u0275fac=function(i){return new(i||t)(m(K),m(q),m(O),m(W),m(E),m(D),m(H),m(Z))}}static{this.\u0275cmp=z({type:t,selectors:[["app-latest"]],viewQuery:function(i,o){if(i&1&&j(se,5),i&2){let r;k(r=F())&&(o.masonryGridRef=r.first)}},decls:2,vars:2,consts:[["masonryGrid",""],["class","h-100-vh d-flex flex-column align-items-center",4,"ngIf"],["class","h-100-vh d-flex flex-column",4,"ngIf"],[1,"h-100-vh","d-flex","flex-column","align-items-center"],[1,"flex-grow-1","p-3","position-relative","overflow-hidden","w-100","d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/images/svg/logo.svg","alt","Post New",1,"w-60-px","mb-3"],[1,"progress","w-100",2,"height","5px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"p-3"],[1,"h-100-vh","d-flex","flex-column"],[1,"flex-grow-1","position-relative","overflow-hidden"],[1,"position-absolute","h-100","w-100","d-flex","overflow-auto","flex-column"],[1,"container-fluid","h-100","w-100","py-3"],[1,"row","g-3"],[4,"ngIf"],["pagination","",1,"mt-0","mb-0","px-3",3,"currentPageChange","pageSizeChange","currentPage","totalItems","pageSize","pageSizes"],[1,"col-12","px-md-3","px-2"],["data-masonry","{'percentPosition': true}",1,"row","g-md-3","g-2"],[4,"ngFor","ngForOf"],["class","col-lg-3 col-md-6 col-4 masonry-box",4,"ngIf"],[1,"col-lg-3","col-md-6","col-4","masonry-box"],[1,"h5","fw-bold","m-0","p-3","bg-black","text-white","d-none","d-md-block"],["target","_blank",1,"position-relative","shadow-sm","p-2","text-decoration-none","d-block",3,"routerLink"],[1,"w-100","img-fluid","d-block",3,"load","src"],[1,"position-absolute","top-0","start-50","translate-middle","badge","rounded-pill","bg-danger","d-md-block"],[1,"visually-hidden"],[1,"h6","m-0","p-3","bg-light","text-dark","d-none","d-md-block"]],template:function(i,o){i&1&&f(0,le,7,4,"div",1)(1,pe,7,6,"div",2),i&2&&(d("ngIf",o.isBrowser&&o.loading),n(),d("ngIf",o.isBrowser&&!o.loading))},dependencies:[N,U,Q,J]})}}return t})();var ge=[{path:"",component:ie,data:{title:"Proposal for Web Application Poster Generation Service | PostNew",description:"Discover our web application for generating election campaign posters, festival posts, and other promotional activities. Customize posters with photos, names, addresses, designations, and contact details for efficient and personalized promotional material.",keywords:"poster generation, campaign posters, election posters, festival posts, promotional activities, customization, PostNew, web application",robots:"index, follow","og:image":"https://api.postnew.in/api/v1/img/uploads/wLmyK?quality=10","og:image:alt":"PostNew Logo","og:image:type":"image/svg+xml","og:image:width":"1200","og:image:height":"630","og:title":"Web Application Poster Generation Service | PostNew","og:description":"Generate personalized posters for campaigns and festivals with Gujarat Info\u2019s web application. Easily customize with your photos, names, and contact details."}}],oe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=_({type:t})}static{this.\u0275inj=v({imports:[M.forChild(ge),M]})}}return t})();var De=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=_({type:t})}static{this.\u0275inj=v({imports:[V,oe,ee,X,Y]})}}return t})();export{De as LatestModule};
