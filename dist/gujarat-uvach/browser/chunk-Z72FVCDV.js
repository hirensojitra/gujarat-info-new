import{a as h}from"./chunk-RKWIMEI6.js";import{J as u,M as i,Ob as a,e as c}from"./chunk-O5VKL6EQ.js";import{a as r,b as n}from"./chunk-CWTPBX7D.js";var g=(()=>{class o{constructor(e,t){this.cookie=e,this.router=t,this.userSubject=new c(this.loadUser()),this.user$=this.userSubject.asObservable()}loadUser(){let e=this.cookie.get("user");try{return e?JSON.parse(e):null}catch{return null}}getUser(){return this.userSubject.value}setUser(e){let t=JSON.stringify(e),s=window.location.protocol==="https:";this.cookie.set("user",t,7,"/",void 0,s,"Lax"),this.userSubject.next(e)}setImageUrl(e){let t=this.getUser();if(t){let s=n(r({},t),{image:e});this.setUser(s)}}setToken(e){let t=window.location.protocol==="https:";this.cookie.set("token",e,7,"/",void 0,t,"Lax")}getToken(){return this.cookie.get("token")}logout(){this.cookie.delete("token","/"),this.cookie.delete("user","/"),this.userSubject.next(null),this.router.navigate(["/authentication/login"])}isLoggedIn(){return!!this.getToken()&&!!this.getUser()}saveSession(e,t){this.cookie.deleteAll("/");let s=window.location.protocol==="https:";this.cookie.set("token",e,{path:"/",secure:s,sameSite:"Lax"}),this.setUser(t),console.log(e)}static{this.\u0275fac=function(t){return new(t||o)(i(h),i(a))}}static{this.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{g as a};
