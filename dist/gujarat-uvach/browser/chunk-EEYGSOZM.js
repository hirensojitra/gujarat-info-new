import{a as l}from"./chunk-7YVPWAOW.js";import{a as c}from"./chunk-WIB4C2YZ.js";import{u as h}from"./chunk-KB4EY57F.js";import{h as n,ka as u,pa as i}from"./chunk-YECJCXI6.js";import{a as r,b as a}from"./chunk-CWTPBX7D.js";var p=(()=>{class o{constructor(e,t){this.authCookie=e,this.router=t,this.userSubject=new n(this.loadUser()),this.user$=this.userSubject.asObservable(),this.apiUrl=c.MasterApi+"/auth/avatar/"}loadUser(){let e=this.authCookie.getUser();return console.log("User object after loading from cookie:",e),e}getUser(){let e=this.userSubject.value;return e&&(e.image=e.image||`${this.apiUrl}${e.id}`),this.userSubject.value}setUser(e,t=!1){console.log("Setting user:",e),this.authCookie.setUser(e,t),this.userSubject.next(e)}setImageUrl(e){let t=this.getUser();if(t){let s=a(r({},t),{image:e});this.setUser(s)}}setToken(e,t=!1){this.authCookie.setToken(e,t)}getToken(){return this.authCookie.getToken()}logout(){this.authCookie.removeToken(),this.authCookie.removeUser(),this.userSubject.next(null),this.router.navigate(["/authentication/login"])}isLoggedIn(){return!!this.getToken()&&!!this.getUser()}saveSession(e,t,s=!1){this.authCookie.setToken(e,s),this.authCookie.setUser(t,s)}static{this.\u0275fac=function(t){return new(t||o)(i(l),i(h))}}static{this.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{p as a};
