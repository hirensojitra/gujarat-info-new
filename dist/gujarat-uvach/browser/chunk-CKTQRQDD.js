import{a as J}from"./chunk-QEFHBFZY.js";import{a as z}from"./chunk-L7P4BJVK.js";import{f as H,g as B,q as P}from"./chunk-RP67A22B.js";import{c as V,d as v,f as A,g as j,k as O,o as G,r as R,w as U,x as q,y as $}from"./chunk-RYFY6OON.js";import"./chunk-3VPX4MHT.js";import"./chunk-QHXDM6TZ.js";import{Aa as w,Ba as p,Ca as h,G as E,Ja as d,Ka as u,L as y,La as k,M as S,Mb as T,Nb as C,R as _,S as g,X as F,ca as l,da as D,hb as I,ib as L,na as b,pa as a,pb as N,va as i,wa as e,xa as m}from"./chunk-R3Y3IJJQ.js";function X(r,c){if(r&1){let t=w();i(0,"button",35),p("click",function(){_(t);let n=h();return g(n.openDeletedModal())}),m(1,"i",36),d(2,"Restore"),e()}}function Y(r,c){if(r&1){let t=w();i(0,"tr",37)(1,"td"),d(2),e(),i(3,"td")(4,"a",38),d(5),e()(),i(6,"td"),d(7),e(),i(8,"td"),d(9),e(),i(10,"td",39)(11,"button",40),p("click",function(){let n=_(t).$implicit,s=h();return g(s.editDistrict(n))}),m(12,"i",41),e(),i(13,"button",42),p("click",function(){let n=_(t).$implicit,s=h();return g(s.deleteDistrict(n.id))}),m(14,"i",43),e()()()}if(r&2){let t=c.$implicit,o=c.index;l(2),u(o+1),l(2),a("routerLink","/view/taluka/"+t.id),l(),u(t.id),l(2),u(t.name),l(2),u(t.gu_name)}}function Z(r,c){r&1&&m(0,"input",44)}function tt(r,c){if(r&1&&(i(0,"div",50),d(1),m(2,"input",51),e()),r&2){let t,o=h(2);l(),k(" ",(t=o.currentForm.get("id"))==null?null:t.value," ")}}function et(r,c){if(r&1&&(i(0,"div",45)(1,"div",46)(2,"label",47),d(3,"District ID"),e()(),i(4,"div",48),b(5,tt,3,1,"div",49),e()()),r&2){let t=h();l(5),a("ngIf",t.needUpdate)}}function it(r,c){r&1&&(i(0,"div",45)(1,"div",46)(2,"label",52),d(3,"Name"),e()(),i(4,"div",48),m(5,"input",53),e()())}function rt(r,c){r&1&&(i(0,"div",45)(1,"div",46)(2,"label",52),d(3,"Gujarati Name"),e()(),i(4,"div",48),m(5,"input",54),e()())}function nt(r,c){if(r&1){let t=w();i(0,"tr")(1,"th",55),d(2),e(),i(3,"td"),d(4),e(),i(5,"td"),d(6),e(),i(7,"td"),d(8),e(),i(9,"td",39)(10,"button",56),p("click",function(){let n=_(t).$implicit,s=h();return g(s.toggleDistrictActive(n.id))}),d(11,"Restore"),e()()()}if(r&2){let t=c.$implicit,o=c.index;l(2),u(o+1),l(2),u(t.id),l(2),u(t.name),l(2),u(t.gu_name)}}var Q=(()=>{class r{constructor(t,o,n,s,f){this.districtService=t,this.fb=o,this.DS=n,this.el=s,this.toastService=f,this.districts=[],this.newDistrict={name:"",is_deleted:!1},this.needUpdate=!1,this.needAdd=!1,this.districtDeletedModalTitle="Deleted District";let x=this.fb.group({is_deleted:[!1,[v.required]],name:["",[v.required]],gu_name:[""]});this.districtForm=x;let M=this.fb.group({id:["",[v.required]],is_deleted:[!1,[v.required]],name:["",[v.required]],gu_name:[""]});this.districtUpdateForm=M,this.currentForm=x}ngAfterViewInit(){this.districtModalElement=this.el.nativeElement.querySelector("#districtModal"),this.districtModalOptions={backdrop:!1,keyboard:!1},this.districtModal=new bootstrap.Modal(this.districtModalElement,this.districtModalOptions);let t=()=>{},o=()=>{this.districtData=null,this.districtModalTitle="",this.currentForm.reset(),this.needUpdate=!1,this.needAdd=!1},n=M=>{console.log(M)};this.districtModalElement.addEventListener("show.bs.modal",t),this.districtModalElement.addEventListener("hidden.bs.modal",o),this.districtModalElement.addEventListener("hide.bs.modal",n),this.districtDeletedModalElement=this.el.nativeElement.querySelector("#districtDeletedModal"),this.districtDeletedModalOptions={backdrop:!1,keyboard:!1},this.districtDeletedModal=new bootstrap.Modal(this.districtDeletedModalElement,this.districtModalOptions);let s=()=>{},f=()=>{},x=()=>{};this.districtDeletedModalElement.addEventListener("show.bs.modal",s),this.districtDeletedModalElement.addEventListener("hidden.bs.modal",f),this.districtDeletedModalElement.addEventListener("hide.bs.modal",x)}editDistrict(t){this.currentForm=this.districtUpdateForm,this.currentForm.reset(),this.districtData=t,this.districtModalTitle="Edit "+t.name,this.currentForm.get("is_deleted")?.setValue(!!t.is_deleted),this.currentForm.get("id")?.setValue(t.id),this.currentForm.get("name")?.setValue(t.name),this.currentForm.get("gu_name")?.setValue(t.gu_name||""),this.districtModal.show(),this.needUpdate=!0}addDistrict(){this.currentForm=this.districtForm,this.currentForm.reset(),this.currentForm.get("is_deleted")?.setValue(!1),this.needAdd=!0,this.districtModalTitle="Add District",this.districtModal.show()}saveDistrict(){if(this.DS.markFormGroupTouched(this.currentForm),this.currentForm.valid)this.needUpdate&&this.updateDistrict(this.currentForm.value),this.needAdd&&(this.newDistrict=this.currentForm.value,this.addNewDistrict()),this.districtModal.hide();else{let t=this.needUpdate?"Please enter valid data to update 'District'":"Please enter valid data for 'New District'";this.toastService.show(t,{class:"bg-danger"})}}ngOnInit(){this.loadDistrict(),this.loadDeletedDistrictLength()}loadDistrict(){this.districtService.getDistrict().subscribe(t=>{this.districts=t.sort((o,n)=>{let s=o.name.toLowerCase(),f=n.name.toLowerCase();return s<f?-1:s>f?1:0})})}addNewDistrict(){console.log(this.newDistrict),this.districtService.addDistrict(this.newDistrict).subscribe(t=>{console.log("District added successfully:",t),this.loadDistrict()})}deleteDistrict(t){this.districtService.deleteDistrict(t).subscribe(o=>{console.log("District deleted successfully:",o),this.loadDistrict(),this.loadDeletedDistrictLength()})}updateDistrict(t){let o=t.id;this.districtService.updateDistrict(o,t).subscribe(n=>{n.success?this.loadDistrict():console.error("Failed to update district:",n.message)},n=>{console.error("Error:",n)})}loadDeletedDistrictLength(){this.districtService.getDeletedDistrictLength().subscribe(t=>{this.deletedDistrictCount=t.deletedDistrictCount,t.deletedDistrictCount||this.districtDeletedModal.hide()},t=>{console.error("Error loading deleted districts count:",t)})}loadDeletedDistrict(){this.districtService.getDeletedDistrict().subscribe(t=>{this.deletedDistrictList=t},t=>{console.error("Error loading deleted districts:",t)})}toggleDistrictActive(t){this.districtService.toggleDistrictActive(t).subscribe(o=>{this.loadDeletedDistrictLength(),this.loadDeletedDistrict(),this.loadDistrict()},o=>{console.error("Error toggling district active state:",o)})}openDeletedModal(){this.loadDeletedDistrict(),this.districtDeletedModal.show()}static{this.\u0275fac=function(o){return new(o||r)(D(B),D(U),D(J),D(F),D(z))}}static{this.\u0275cmp=y({type:r,selectors:[["app-district"]],decls:69,vars:11,consts:[[1,"h-100","overflow-only-y","d-flex","flex-column"],[1,"container","pt-3"],[1,"row","g-2","align-items-center"],[1,"col-auto","ms-auto"],[1,"btn","btn-success","me-2",3,"click"],[1,"fa","fa-plus","me-2"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"flex-grow-1","p-3","m-3","bg-white"],[1,"h-100","container","position-relative","overflow-y-auto","p-0"],[1,"position-absolute","h-100","w-100","table-responsive"],[1,"table","w-100","m-0","max-h-100-p","max-w-100-p","bg-white","text-nowrap"],[1,"sticky-top","bg-light"],[1,"text-center",3,"width"],["class","align-middle",4,"ngFor","ngForOf"],["id","districtModal","tabindex","-1","aria-labelledby","districtModalLabel",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","p-0","my-0","modal-dialog-centered","position-relative","h-100"],[1,"modal-content"],[1,"modal-header","bg-success","py-2"],["id","districtModalLabel",1,"modal-title","text-white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn",3,"click"],[1,"fa","fa-close","btn-flat","text-white"],[1,"modal-body","h-100","overflow-auto","py-0","my-3","d-flex","flex-column"],[1,"mt-3",3,"formGroup"],["type","hidden","placeholder","","formControlName","is_deleted",4,"ngIf"],["class","form-group row align-items-center mb-3",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-md","btn-success","ms-2",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["id","districtDeletedModal","tabindex","-1","aria-labelledby","districtDeletedModalLabel",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","modal-xl","p-0","my-0","modal-dialog-centered","position-relative","h-100"],["id","districtDeletedModalLabel",1,"modal-title","text-white"],[1,"table"],["scope","col"],["scope","col",1,"w-80-px","text-center"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","me-2"],[1,"align-middle"],[3,"routerLink"],[1,"text-center"],[1,"btn","btn-flat","btn-md","me-2",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-flat","btn-md",3,"click"],[1,"fa","fa-trash"],["type","hidden","placeholder","","formControlName","is_deleted"],[1,"form-group","row","align-items-center","mb-3"],[1,"col-4","text-end"],["for","district-id",1,"form-label","mb-0"],[1,"col-8"],["class","form-control bg-light",4,"ngIf"],[1,"form-control","bg-light"],["type","hidden","placeholder","","formControlName","id"],["for","district-name",1,"form-label","mb-0"],["type","text","placeholder","","formControlName","name","id","district-name",1,"form-control"],["type","text","placeholder","","formControlName","gu_name","id","district-name",1,"form-control"],["scope","row"],[1,"btn","btn-success","btn-sm",3,"click"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),p("click",function(){return n.addDistrict()}),m(5,"i",5),d(6," Add District"),e(),b(7,X,3,0,"button",6),e()()(),i(8,"div",7)(9,"div",8)(10,"div",9)(11,"table",10)(12,"thead",11)(13,"tr")(14,"th"),d(15,"No."),e(),i(16,"th"),d(17,"Code"),e(),i(18,"th"),d(19,"Name"),e(),i(20,"th"),d(21,"Gujarati Name"),e(),i(22,"th",12),d(23,"Action"),e()()(),i(24,"tbody"),b(25,Y,15,5,"tr",13),e()()()()()(),i(26,"div",14)(27,"div",15)(28,"div",16)(29,"div",17)(30,"h5",18),d(31),e(),i(32,"button",19),p("click",function(){return n.districtModal.hide()}),m(33,"i",20),e()(),i(34,"div",21)(35,"form",22),b(36,Z,1,0,"input",23)(37,et,6,1,"div",24)(38,it,6,0,"div",24)(39,rt,6,0,"div",24),e()(),i(40,"div",25)(41,"button",26),p("click",function(){return n.saveDistrict()}),d(42,"Save"),e(),i(43,"button",27),p("click",function(){return n.districtModal.hide(!1)}),d(44,"Close"),e()()()()(),i(45,"div",28)(46,"div",29)(47,"div",16)(48,"div",17)(49,"h5",30),d(50),e(),i(51,"button",19),p("click",function(){return n.districtDeletedModal.hide()}),m(52,"i",20),e()(),i(53,"div",21)(54,"table",31)(55,"thead")(56,"tr")(57,"th",32),d(58,"No."),e(),i(59,"th",32),d(60,"ID"),e(),i(61,"th",32),d(62,"Name"),e(),i(63,"th",32),d(64,"Gujarati Name"),e(),i(65,"th",33),d(66,"Actions"),e()()(),i(67,"tbody"),b(68,nt,12,4,"tr",34),e()()()()()()),o&2&&(l(7),a("ngIf",n.deletedDistrictCount>0),l(15),a("width",100),l(3),a("ngForOf",n.districts),l(6),u(n.districtModalTitle),l(4),a("formGroup",n.currentForm),l(),a("ngIf",n.currentForm.get("is_deleted")!==null),l(),a("ngIf",n.currentForm.get("id")!==null),l(),a("ngIf",n.currentForm.get("name")!==null),l(),a("ngIf",n.currentForm.get("gu_name")!==null),l(11),u(n.districtDeletedModalTitle),l(18),a("ngForOf",n.deletedDistrictList))},dependencies:[I,L,T,H,O,V,A,j,G,R]})}}return r})();var ot=[{path:"",component:Q,data:{title:"District",breadcrumb:"District"}}],W=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=S({type:r})}static{this.\u0275inj=E({imports:[C.forChild(ot),C]})}}return r})();var wt=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=S({type:r})}static{this.\u0275inj=E({imports:[N,W,P,$,q]})}}return r})();export{wt as DistrictModule};
