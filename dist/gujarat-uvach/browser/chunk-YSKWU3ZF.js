import{a as x}from"./chunk-GBQP6ACW.js";import"./chunk-I4RV6RFQ.js";import{a as y}from"./chunk-BOHDZTAQ.js";import{a as C}from"./chunk-WIB4C2YZ.js";import"./chunk-7URJ3TZA.js";import{c as b,t as w,u as M,w as r}from"./chunk-3SANXGOA.js";import{$b as m,Ib as l,Jb as c,Kb as d,M as u,Pb as f,fb as n,ga as s,hd as v,qa as g,ra as a,t as p}from"./chunk-NIQGYGOG.js";import"./chunk-CWTPBX7D.js";var A=(()=>{class t{constructor(i,e,o,h){this.router=i,this.authService=e,this.toast=o,this.http=h,this.api=C.MasterApi,this.isLoading=!1,this.errorMessage=""}handleGoogleCredential(i){let e=i.credential;console.log("Google idToken:",e),this.http.post(this.api+"/auth/google",{idToken:e},{responseType:"json"}).pipe(u(o=>(this.isLoading=!1,this.toast.show(o.error?.message||"Google authentication failed.",{class:"bg-danger"}),p(null)))).subscribe({next:o=>{this.isLoading=!1,o&&o.token?(this.authService.setToken(o.token),this.router.navigate(["/dashboard"])):this.toast.show("Unable to process Google registration.",{class:"bg-danger"})},error:o=>{this.isLoading=!1,this.toast.show(o.message||"Google authentication failed.",{class:"bg-danger"})},complete:()=>{this.isLoading=!1}})}registerWithGoogle(){this.isLoading=!0,this.errorMessage="",google.accounts.id.initialize({client_id:"650577899089-eq5q93v869b5qvi6vllcq81o8v06ubsm.apps.googleusercontent.com",callback:i=>this.handleGoogleCredential(i)}),google.accounts.id.prompt()}static{this.\u0275fac=function(e){return new(e||t)(n(M),n(x),n(y),n(b))}}static{this.\u0275cmp=g({type:t,selectors:[["app-authentication"]],decls:12,vars:0,consts:[[1,"container","d-flex","align-items-center","justify-content-center","min-vh-100","flex-column"],[1,"card","shadow","p-4",2,"width","400px","border-radius","15px"],["src","assets/images/svg/logo-large.svg","alt","logo",1,"w-66-p","mx-auto","mb-3"],[1,"or-container"],[1,"text-center"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-outline-danger","border","w-100","me-2",3,"click"],[1,"fa","fa-google","me-3"]],template:function(e,o){e&1&&(l(0,"div",0)(1,"div",1),d(2,"img",2)(3,"hr")(4,"router-outlet")(5,"span",3),l(6,"p",4),m(7,"Connect with us by"),c(),l(8,"div",5)(9,"button",6),f("click",function(){return o.registerWithGoogle()}),d(10,"i",7),m(11,"Google"),c()()()())},dependencies:[w]})}}return t})();var G=[{path:"",component:A,data:{title:"PostNew | Authentication",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, authentication, portal",robots:"index, follow"},children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",loadChildren:()=>import("./chunk-AMNBNEIA.js").then(t=>t.LoginModule)},{path:"register",loadChildren:()=>import("./chunk-NHFKWNMH.js").then(t=>t.RegisterModule)},{path:"forgot-password",loadChildren:()=>import("./chunk-BUSKN3UI.js").then(t=>t.ForgotPasswordModule)},{path:"reset-password",loadChildren:()=>import("./chunk-XQVTL4HD.js").then(t=>t.ResetPasswordModule)},{path:"verify-email",loadChildren:()=>import("./chunk-MX67DKDE.js").then(t=>t.VerifyEmailModule)}]}],k=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=a({type:t})}static{this.\u0275inj=s({imports:[r.forChild(G),r]})}}return t})();var O=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=a({type:t})}static{this.\u0275inj=s({imports:[v,r,k]})}}return t})();export{O as AuthenticationModule};
