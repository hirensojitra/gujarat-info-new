import{a as ve,b as we,c as Fe,d as _e}from"./chunk-TVFIKZCP.js";import{a as oe}from"./chunk-AKLFNSUU.js";import{a as ie}from"./chunk-EEYGSOZM.js";import"./chunk-7YVPWAOW.js";import"./chunk-RWKAEW2Z.js";import{a as ne,f as xe,k as ye,n as be}from"./chunk-VONR4PMN.js";import"./chunk-ZMNXU5KO.js";import"./chunk-WIB4C2YZ.js";import{f as me}from"./chunk-XYZ3ZMYG.js";import{e as fe,f as ge,g as ue}from"./chunk-ZXCXBR5R.js";import"./chunk-6P4R23JF.js";import"./chunk-OK5S6IU3.js";import{A as ce,B as he,C as pe,c as ae,e as t,g as re,i as le,k as C,l as se,o as de}from"./chunk-ZDPQXU7Z.js";import{c as te,w as X}from"./chunk-KB4EY57F.js";import{$b as y,Db as u,Ea as b,Eb as I,Fa as v,Fb as c,Ga as q,Ha as k,Hb as R,Ma as Y,Qb as s,Rb as r,Sb as x,Tb as m,Ub as f,Wb as M,Zb as F,cc as G,dc as N,gc as j,hc as B,ic as z,kb as a,kc as d,kd as U,la as S,lb as w,lc as V,ld as Q,mc as E,md as K,nc as A,nd as J,od as Z,pc as H,qc as L,rb as W,rc as $,va as O,wa as D,wc as P,wd as ee}from"./chunk-YECJCXI6.js";import{a as T,f as g}from"./chunk-CWTPBX7D.js";var ke=["mainSVG"],Me=o=>({"no-selection":o}),Ee=o=>({"border-dark shadow":o});function Te(o,h){o&1&&(s(0,"span"),d(1,"\u{1F451}"),r())}function Ie(o,h){if(o&1&&(s(0,"mat-icon",42),d(1),r(),d(2),u(3,Te,2,0,"span",43)),o&2){let e=y().$implicit;a(),V(e.icon),a(),E(" ",e.label," "),a(),c("ngIf",e.isPremium)}}function Ve(o,h){if(o&1&&(s(0,"mat-tab",40),u(1,Ie,4,3,"ng-template",41),r()),o&2){let e=h.$implicit;G("label",e.label)}}function Ae(o,h){if(o&1&&(m(0),s(1,"div",47)(2,"div",48)(3,"div",49),q(),x(4,"svg",50),r()(),k(),s(5,"div",51)(6,"div",52),d(7),r(),s(8,"div",53),d(9),r()(),s(10,"a",54),d(11," Change Poster Dimensions "),r()(),f()),o&2){let e=y(2);a(2),c("wPX",60)("hPX",60),a(2),I("viewBox","0 0 "+e.selectedDimension.width+" "+e.selectedDimension.height)("width",e.selectedDimension.width)("height",e.selectedDimension.height),a(3),V(e.selectedDimension.type),a(2),A("",e.selectedDimension.width," X ",e.selectedDimension.height,"")}}function Pe(o,h){o&1&&(m(0),s(1,"strong"),d(2,"Theme"),r(),d(3," content goes here\u2026 "),f())}function Xe(o,h){o&1&&(m(0),s(1,"strong"),d(2,"Animation"),r(),d(3," content goes here\u2026 "),f())}function Oe(o,h){o&1&&(m(0),s(1,"strong"),d(2,"Background"),r(),d(3," content goes here\u2026 "),f())}function Ye(o,h){o&1&&(m(0),s(1,"strong"),d(2,"Margins"),r(),d(3," content goes here\u2026 "),f())}function We(o,h){o&1&&(m(0),s(1,"strong"),d(2,"Bulk Create"),r(),d(3," content goes here\u2026 "),f())}function Re(o,h){o&1&&(m(0),s(1,"strong"),d(2,"Replace"),r(),d(3," content goes here\u2026 "),f())}function Ge(o,h){o&1&&(m(0),s(1,"strong"),d(2,"Translate"),r(),d(3," content goes here\u2026 "),f())}function Ne(o,h){if(o&1&&(s(0,"div",44),m(1,45),u(2,Ae,12,8,"ng-container",46)(3,Pe,4,0,"ng-container",46)(4,Xe,4,0,"ng-container",46)(5,Oe,4,0,"ng-container",46)(6,Ye,4,0,"ng-container",46)(7,We,4,0,"ng-container",46)(8,Re,4,0,"ng-container",46)(9,Ge,4,0,"ng-container",46),f(),r()),o&2){let e=y();a(),c("ngSwitch",e.selectedTool),a(),c("ngSwitchCase","dimension"),a(),c("ngSwitchCase","theme"),a(),c("ngSwitchCase","animation"),a(),c("ngSwitchCase","background"),a(),c("ngSwitchCase","margins"),a(),c("ngSwitchCase","bulk"),a(),c("ngSwitchCase","replace"),a(),c("ngSwitchCase","language")}}function je(o,h){if(o&1){let e=M();s(0,"li",55)(1,"button",56),F("click",function(){let i=b(e).index,l=y();return v(l.selectTab(i))}),d(2),r()()}if(o&2){let e=h.$implicit,n=h.index,i=y();a(),R("active",i.selectedPlatformIndex===n),a(),E(" ",e.platform," ")}}function Be(o,h){o&1&&(s(0,"div",62)(1,"div",63),x(2,"i",64),r()()),o&2&&(a(),c("wPX",30)("hPX",30))}function ze(o,h){if(o&1){let e=M();s(0,"div",57)(1,"div",58)(2,"input",59),$("ngModelChange",function(i){b(e);let l=y();return L(l.selectedDimension,i)||(l.selectedDimension=i),v(i)}),r(),s(3,"label",60)(4,"div",48)(5,"div",49),q(),x(6,"svg",50),r()(),k(),s(7,"div",51)(8,"div",52),d(9),r(),s(10,"div",53),d(11),r()(),u(12,Be,3,2,"div",61),r()()()}if(o&2){let e=h.$implicit,n=h.index,i=y();a(),c("ngClass",P(16,Ee,i.isSelected(e))),a(),c("value",e),H("ngModel",i.selectedDimension),c("checked",i.isSelected(e))("id","box-"+n),a(),N("for","box-",n,""),a(),c("wPX",60)("hPX",60),a(2),I("viewBox","0 0 "+e.width+" "+e.height)("width",e.width)("height",e.height),a(3),E("",e.type," "),a(2),A("",e.width,"px X ",e.height,"px"),a(),c("ngIf",i.isSelected(e))}}var Se=(()=>{class o{constructor(e,n,i,l,p,_){this.authService=e,this.renderer=n,this.elRef=i,this.fb=l,this.colorService=p,this.http=_,this.sizes=[{platform:"Instagram",entries:[{type:"square post",width:1080,height:1080},{type:"story",width:1080,height:1920},{type:"reel",width:1080,height:1920},{type:"carousel",width:1080,height:1080},{type:"story ad",width:1080,height:1920},{type:"feed ad",width:1080,height:1350},{type:"portrait post",width:1080,height:1350},{type:"landscape post",width:1080,height:566}]},{platform:"Facebook",entries:[{type:"post",width:1080,height:1080},{type:"story",width:1080,height:1920},{type:"feed ad",width:1080,height:1080},{type:"profile cover",width:851,height:315},{type:"event cover",width:1200,height:630},{type:"page cover",width:820,height:312},{type:"group cover",width:1640,height:856}]},{platform:"Google Ads",entries:[{type:"landscape image",width:1200,height:628},{type:"square image",width:1200,height:1200},{type:"portrait image",width:960,height:1200},{type:"landscape video",width:1920,height:1080},{type:"square video",width:1080,height:1080},{type:"portrait video",width:1080,height:1920},{type:"landscape logo",width:1200,height:300}]},{platform:"YouTube",entries:[{type:"video",width:1920,height:1080},{type:"thumbnail",width:1280,height:720},{type:"shorts",width:1080,height:1920},{type:"banner",width:2560,height:1440},{type:"profile photo",width:800,height:800},{type:"display ad",width:300,height:60},{type:"video ad",width:1920,height:1080}]},{platform:"Twitter (X)",entries:[{type:"post",width:1200,height:675},{type:"video",width:1920,height:1080},{type:"header",width:1500,height:500}]},{platform:"Pinterest",entries:[{type:"post",width:1e3,height:1500},{type:"idea pin",width:1080,height:1920},{type:"square",width:600,height:600},{type:"vertical post",width:600,height:900}]},{platform:"Other",entries:[{type:"Snapchat ad",width:1080,height:1920},{type:"Meme",width:1200,height:1200},{type:"Twitch banner",width:1200,height:480},{type:"Twitch overlay",width:1920,height:1080},{type:"Tumblr banner",width:3e3,height:1055},{type:"Reddit cover",width:1920,height:256},{type:"SoundCloud banner",width:2480,height:520},{type:"Snapchat filter",width:1080,height:1920},{type:"note header image",width:1280,height:670},{type:"WhatsApp icon",width:800,height:800},{type:"WhatsApp status",width:1080,height:1920},{type:"WhatsApp post",width:1080,height:1440}]}],this.selectedPlatformIndex=0,this.selectedDimension=this.sizes[0].entries[0],this.originalDimension=T({},this.selectedDimension),this.toolbarItems=[{key:"dimension",label:"Dimension",icon:"aspect_ratio",isPremium:!0},{key:"theme",label:"Theme",icon:"palette"},{key:"replace",label:"Replace",icon:"sync"},{key:"language",label:"Language",icon:"language"}],this.selectedTool=null,this.selectedIndex=null,this.postDetails={id:null,deleted:!1,download_counter:0,h:1024,w:1024,title:"image",info:"",info_show:!0,published:!1,track:!1,backgroundurl:"https://images.unsplash.com/photo-1536663094815-aa7e99627504?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",data:[{title:"Text 1",editable:!0,boxed:!0,text:{x:706,y:955,fs:40,fw:"normal",text:"Sample Text",type:"text",color:"#FFFFFF",fontStyle:{italic:!1,underline:!1},rotate:0,fontFamily:"Noto Sans Gujarati",textShadow:{enable:!1,color:"#FFFFFF",blur:0,offsetX:0,offsetY:0},backgroundColor:"#FFFFFF",textEffects:{enable:!1,gradient:{enable:!1,startColor:"#ffffff",endColor:"#000000",direction:"horizontal"},outline:{enable:!1,color:"#FFFFFF",width:2},glow:{enable:!1,color:"#ffffff",blur:0}},textAnchor:"start",alignmentBaseline:"start",letterSpacing:0,lineHeight:1.5,textTransformation:"none",opacity:100,originX:0,originY:0}}]},this.selectedElement=null,this.postDetailsForm=void 0,this.apiData={},this.colorSet=[],this.selectData={},this.controlSet=[],this.controlValues={rect:[{id:"border",title:"Border",icon:"fa-x-border",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"opacity",title:"Opacity",icon:"fa-x-opacity",active:!1},{id:"rotate",title:"Rotation",icon:"fa-x-rotation",active:!1},{id:"origin",title:"Origin",icon:"fa-x-origin",active:!1},{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}],circle:[{id:"border",title:"Border",icon:"fa-x-border",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"opacity",title:"Opacity",icon:"fa-x-opacity",active:!1},{id:"origin",title:"Origin",icon:"fa-x-origin",active:!1},{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}],ellipse:[{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"opacity",title:"opacity",icon:"fa-x-opacity",active:!1},{id:"originX",title:"originX",icon:"fa-",active:!1},{id:"originY",title:"originY",icon:"fa-",active:!1},{id:"rotate",title:"rotate",icon:"fa-",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}],line:[{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"opacity",title:"opacity",icon:"fa-x-opacity",active:!1},{id:"originX",title:"originX",icon:"fa-",active:!1},{id:"originY",title:"originY",icon:"fa-",active:!1},{id:"rotate",title:"rotate",icon:"fa-",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}],text:[{id:"edit",title:"Edit",icon:"fa-x-edit",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"fontSize",title:"Size",icon:"fa-x-font-size",active:!1},{id:"fontStyle",title:"Style",icon:"fa-italic",active:!1},{id:"textAlign",title:"Alignment",icon:"fa-align-left",active:!1},{id:"fontFamily",title:"Font",icon:"fa-font",active:!1},{id:"fontWeight",title:"Weight",icon:"fa-bold",active:!1},{id:"textShadow",title:"Shadow",icon:"fa-eye-slash",active:!1},{id:"textBackground",title:"Background",icon:"fa-x-text-background",active:!1},{id:"textEffects",title:"Effects",icon:"fa-magic",active:!1},{id:"letterSpacing",title:"Spacing",icon:"fa-arrows-h",active:!1},{id:"lineHeight",title:"Line Height",icon:"fa-arrows-v",active:!1},{id:"textTransformation",title:"Transformation",icon:"fa-text-width",active:!1},{id:"opacity",title:"Opacity",icon:"fa-x-opacity",active:!1},{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1},{id:"rotate",title:"Rotation",icon:"fa-x-rotation",active:!1}],image:[{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"edit",title:"Edit",icon:"fa-x-edit",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"opacity",title:"opacity",icon:"fa-x-opacity",active:!1},{id:"origin",title:"Origin",icon:"fa-x-origin",active:!1},{id:"rotate",title:"rotate",icon:"fa-x-rotation",active:!1},{id:"url",title:"URL",icon:"fa-link",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}]},this.positionShuffle=!1,this.rectData={title:"Rect",editable:!1,boxed:!0,rect:{x:30,y:30,width:100,height:100,fill:"#FFFFFF",opacity:1,originX:5,originY:5,rotate:0}},this.circleData={title:"Circle 1",editable:!1,boxed:!0,circle:{cx:50,cy:50,r:30,fill:"#FFFFFF",opacity:1,originX:0,originY:0}},this.ellipseData={title:"Ellipse 1",editable:!1,boxed:!0,ellipse:{cx:100,cy:100,rx:50,ry:30,fill:"green",opacity:.8,originX:0,originY:0,rotate:0}},this.lineData={title:"Line 1",editable:!1,boxed:!0,line:{x1:50,y1:50,x2:150,y2:150,stroke:"black",strokeWidth:2,opacity:1,originX:0,originY:0,rotate:0}},this.textData={title:"Text 1",editable:!0,boxed:!0,text:{x:100,y:100,fs:40,fw:"normal",text:"Sample Text",type:"text",color:"#FFFFFF",fontStyle:{italic:!1,underline:!1},rotate:0,fontFamily:"Noto Sans Gujarati",textShadow:{enable:!1,color:"#FFFFFF",blur:0,offsetX:0,offsetY:0},backgroundColor:"#FFFFFF",textEffects:{enable:!1,gradient:{enable:!1,startColor:"#ffffff",endColor:"#000000",direction:"horizontal"},outline:{enable:!1,color:"#FFFFFF",width:2},glow:{enable:!1,color:"#ffffff",blur:0}},textAnchor:"start",alignmentBaseline:"middle",letterSpacing:0,lineHeight:1.5,textTransformation:"none",opacity:100,originX:0,originY:0}},this.imageData={title:"Image 1",editable:!0,boxed:!0,image:{r:50,x:100,y:100,imageUrl:"assets/images/svg/upload-img.svg",borderColor:"#000000",borderWidth:2,shape:"circle",origin:"center",placeholder:"Placeholder Text",svgProperties:{fill:"#ffffff",stroke:"#000000",strokeWidth:2},rotate:0}}}ngOnInit(){return g(this,null,function*(){this.initForm();let e=yield this.authService.getUser();if(e)this.user=e,this.selectedDimension=this.sizes[0].entries[0],this.fullName=oe(e),this.applyDimension(),this.initForm();else return})}ngAfterViewInit(){}selectTab(e){this.selectedPlatformIndex=e}onTabChange(e){this.selectedIndex===e?(this.selectedIndex=-1,this.selectedTool=null):(this.selectedIndex=e,this.selectedTool=this.toolbarItems[e].key)}isSelected(e){return e.type===this.selectedDimension.type&&e.width===this.selectedDimension.width&&e.height===this.selectedDimension.height}get dimensionChanged(){return this.selectedDimension.width!==this.originalDimension.width||this.selectedDimension.height!==this.originalDimension.height}applyDimension(){this.originalDimension=T({},this.selectedDimension),this.mainSVG?.nativeElement&&this.renderer.setAttribute(this.mainSVG.nativeElement,"viewBox",`0 0 ${this.selectedDimension.width} ${this.selectedDimension.height}`);let e=document.getElementById("dimensionModal");e&&bootstrap.Modal.getInstance(e)?.hide()}getColors(e,n){return g(this,null,function*(){try{this.colorSet=yield this.colorService.getColors(e,n)}catch(i){console.error("Error updating colors:",i)}})}addData(e,n){let i=this.fb.group({});switch(e){case"rect":i=this.createRectFormGroup(n||this.rectData),this.controlSet.push(this.controlValues.rect);break;case"circle":i=this.createCircleFormGroup(n||this.circleData),this.controlSet.push(this.controlValues.circle);break;case"ellipse":i=this.createEllipseFormGroup(n||this.ellipseData),this.controlSet.push(this.controlValues.ellipse);break;case"line":i=this.createLineFormGroup(n||this.lineData),this.controlSet.push(this.controlValues.line);break;case"text":i=this.createTextFormGroup(n||this.textData),this.controlSet.push(this.controlValues.text);break;case"image":i=this.createImageFormGroup(n||this.imageData),this.controlSet.push(this.controlValues.image);break;default:console.error("Invalid type");break}i&&this.dataArray.push(i),this.postDetails=this.postDetailsForm?.value,this.selectedElement=this.dataArray.length}get dataArray(){return this.postDetailsForm?.get("data")}initForm(){this.postDetailsForm=this.fb.group({id:[this.postDetails.id],deleted:[this.postDetails.deleted,t.required],h:[this.postDetails.h,t.required],w:[this.postDetails.w,t.required],title:[this.postDetails.title,t.required],backgroundurl:[this.postDetails.backgroundurl,t.required],download_counter:[this.postDetails.download_counter,t.required],info:[this.postDetails.info||"",t.required],info_show:[this.postDetails.info_show||!1],published:[this.postDetails.published||!1],track:[this.postDetails.track||!1],data:this.fb.array([]),apiData:this.apiData}),this.postDetailsForm?.get("backgroundurl")?.valueChanges.subscribe(e=>g(this,null,function*(){this.postDetails.backgroundurl=e,yield this.getColors(e,20)})),this.postDetailsForm.valueChanges.subscribe(e=>g(this,null,function*(){this.postDetails=e})),this.getColors(this.postDetails.backgroundurl,10),this.postDetails.data.forEach(e=>{e.rect&&this.addData("rect",e),e.circle&&this.addData("circle",e),e.ellipse&&this.addData("ellipse",e),e.line&&this.addData("line",e),e.text&&this.addData("text",e),e.image&&this.addData("image",e)}),this.rebuild(this.postDetails.data)}createRectFormGroup(e){return this.fb.group({title:[e.title||"",t.required],editable:[e.editable||!1],boxed:[e.boxed||!1],rect:this.fb.group({x:[e.rect?.x||0,t.required],y:[e.rect?.y||0,t.required],rx:[e.rect?.rx||0,t.required],ry:[e.rect?.ry||0,t.required],width:[e.rect?.width||150,t.required],height:[e.rect?.height||150,t.required],fill:[e.rect?.fill||"#000000",t.required],opacity:[e.rect?.opacity||"1",t.required],originX:[e.rect?.originX||0,t.required],originY:[e.rect?.originY||0,t.required],rotate:[e.rect?.rotate||0,t.required],stroke:[e.rect?.stroke||"#000000",t.required],strokeWidth:[e.rect?.strokeWidth||1,t.required],strokeAlignment:[e.rect?.strokeAlignment||"center",t.required],fillOpacity:[e.rect?.fillOpacity||1,t.required],strokeOpacity:[e.rect?.strokeOpacity||1,t.required]})})}createCircleFormGroup(e){return this.fb.group({title:[e.title,t.required],editable:[e.editable],boxed:[e.boxed],circle:this.fb.group({cx:[e.circle?.cx,t.required],cy:[e.circle?.cy,t.required],r:[e.circle?.r,t.required],fill:[e.circle?.fill,t.required],fillOpacity:[e.circle?.fillOpacity||1,t.required],opacity:[e.circle?.opacity,t.required],originX:[e.circle?.originX,t.required],originY:[e.circle?.originY,t.required],stroke:[e.circle?.stroke||"#FFF",t.required],strokeWidth:[e.circle?.strokeWidth||0,t.required],strokeOpacity:[e.circle?.strokeOpacity||1,t.required],strokeAlignment:[e.circle?.strokeAlignment||"center",t.required]})})}createEllipseFormGroup(e){return this.fb.group({title:[e.title||"",t.required],editable:[e.editable||!1],boxed:[e.boxed||!1],ellipse:this.fb.group({cx:[e.ellipse?.cx||0,t.required],cy:[e.ellipse?.cy||0,t.required],rx:[e.ellipse?.rx||50,t.required],ry:[e.ellipse?.ry||50,t.required],fill:[e.ellipse?.fill||"#000000",t.required],fillOpacity:[e.ellipse?.fillOpacity||1,t.required],opacity:[e.ellipse?.opacity||1,t.required],originX:[e.ellipse?.originX||0,t.required],originY:[e.ellipse?.originY||0,t.required],rotate:[e.ellipse?.rotate||0,t.required],stroke:[e.ellipse?.stroke||"#000000",t.required],strokeWidth:[e.ellipse?.strokeWidth||1,t.required],strokeOpacity:[e.ellipse?.strokeOpacity||1,t.required],strokeAlignment:[e.ellipse?.strokeAlignment||"center",t.required]})})}createLineFormGroup(e){return this.fb.group({title:[e.title,t.required],editable:[e.editable],boxed:[e.boxed],line:this.fb.group({x1:[e.line?.x1,t.required],y1:[e.line?.y1,t.required],x2:[e.line?.x2,t.required],y2:[e.line?.y2,t.required],stroke:[e.line?.stroke,t.required],strokeWidth:[e.line?.strokeWidth,t.required],opacity:[e.line?.opacity,t.required],originX:[e.line?.originX,t.required],originY:[e.line?.originY,t.required],rotate:[e.line?.rotate,t.required]})})}createSvgPropertiesFormGroup(e){return this.fb.group({fill:[e.fill,t.required],stroke:[e.stroke,t.required],strokeWidth:[e.strokeWidth,t.required]})}createTextFormGroup(e){let n=this.fb.group({title:[e.title,t.required],editable:[e.editable],boxed:[e.boxed],text:this.fb.group({x:[e.text?.x,t.required],y:[e.text?.y,t.required],fs:[e.text?.fs,t.required],fw:[e.text?.fw,t.required],type:[e.text?.type||"text",t.required],text:[e.text?.text,t.required],color:[e.text?.color,t.required],fontStyle:this.fb.group({italic:[e.text?.fontStyle.italic,t.required],underline:[e.text?.fontStyle.underline,t.required]}),rotate:[e.text?.rotate,t.required],fontFamily:[e.text?.fontFamily,t.required],textShadow:this.fb.group({enable:[e.text?.textShadow.enable],color:[e.text?.textShadow.color],blur:[e.text?.textShadow.blur],offsetX:[e.text?.textShadow.offsetX],offsetY:[e.text?.textShadow.offsetY]}),backgroundColor:[e.text?.backgroundColor,t.required],textEffects:this.fb.group({enable:[!1],gradient:this.fb.group({enable:[!1],startColor:[e.text?.textEffects.gradient.startColor,t.required],endColor:[e.text?.textEffects.gradient.endColor,t.required],direction:[e.text?.textEffects.gradient.direction,t.required]}),outline:this.fb.group({enable:[!1],color:[e.text?.textEffects.outline.color,t.required],width:[e.text?.textEffects.outline.width,t.required]}),glow:this.fb.group({enable:[!1],color:[e.text?.textEffects.glow.color,t.required],blur:[e.text?.textEffects.glow.blur,t.required]})}),textAnchor:[e.text?.textAnchor],alignmentBaseline:[e.text?.textAnchor],letterSpacing:[e.text?.letterSpacing,t.required],lineHeight:[e.text?.lineHeight,t.required],textTransformation:[e.text?.textTransformation,t.required],opacity:[e.text?.opacity,t.required],originX:[e.text?.originX],originY:[e.text?.originY]})}),i=e.text?.controlName??Math.random().toString(36).substring(7),l=n.get("text");return e.text?.type==="select"&&this.addSelectControls(n,l,e,i),n.get("text.type")?.valueChanges.subscribe(p=>{p==="select"?this.addSelectControls(n,l,e,i):this.removeSelectControls(l)}),n}createImageFormGroup(e){return this.fb.group({title:[e.title,t.required],editable:[e.editable],boxed:[e.boxed],image:this.fb.group({r:[e.image?.r,t.required],x:[e.image?.x,t.required],y:[e.image?.y,t.required],imageUrl:[e.image?.imageUrl,t.required],borderColor:[e.image?.borderColor,t.required],borderWidth:[e.image?.borderWidth,t.required],shape:[e.image?.shape,t.required],origin:[e.image?.origin,t.required],placeholder:[e.image?.placeholder,t.required],svgProperties:this.createSvgPropertiesFormGroup(e.image?.svgProperties),rotate:[e.image?.rotate]})})}fetchDataFromAPI(e,n){return g(this,null,function*(){yield this.http.get(e).subscribe({next:i=>{this.apiData[n]=i.data||i,console.log(this.apiData[n])},error:()=>{}})})}syncData(e){return g(this,null,function*(){if(!(e instanceof le)){console.error("Invalid form group");return}let n=e.get("dependency")?.value,i=e.get("controlName")?.value,l=e.get("api")?.value;if(i&&l){if(l=l.endsWith("/")?l:`${l}/`,n){let p=this.selectData[n]?.control?.value;p&&(l+=p)}yield this.fetchDataFromAPI(l,i)}})}addSelectControls(e,n,i,l){this.selectData[l]={title:e.get("title")?.value||"",control:n.get("text"),api:i.text?.api,dependency:i.text?.dependency||"none",lang:i.text?.lang||"en"},n.contains("lang")||n.addControl("lang",new C(i.text?.lang,t.required)),n.contains("controlName")||n.addControl("controlName",new C(i.text?.controlName||l,t.required)),n.contains("dependency")||n.addControl("dependency",new C(i.text?.dependency||"none",t.required)),n.contains("api")||n.addControl("api",new C(i.text?.api,t.required))}rebuild(e){return g(this,null,function*(){this.dataArray.clear(),this.controlSet=[];for(let n=0;n<e.length;n++){let i=e[n];i.rect&&this.dataArray.push(this.createRectFormGroup(i)),i.rect&&this.controlSet.push(this.controlValues.rect),i.circle&&this.dataArray.push(this.createCircleFormGroup(i)),i.circle&&this.controlSet.push(this.controlValues.circle),i.ellipse&&this.dataArray.push(this.createEllipseFormGroup(i)),i.ellipse&&this.controlSet.push(this.controlValues.ellipse),i.line&&this.dataArray.push(this.createLineFormGroup(i)),i.line&&this.controlSet.push(this.controlValues.line),i.text&&this.dataArray.push(this.createTextFormGroup(i)),i.text&&this.controlSet.push(this.controlValues.text),i.image&&this.dataArray.push(this.createImageFormGroup(i)),i.image&&this.controlSet.push(this.controlValues.image)}if(this.postDetailsForm?.get("data")?.setValue(e),this.positionShuffle==!1)for(let n in this.selectData){let i=this.selectData[n];i.dependency==="none"?yield this.loadData(n,i.api):yield this.setupDependency(n,i)}})}loadData(e,n){this.apiData[e]||this.fetchDataFromAPI(n,e)}setupDependency(e,n){n.api.endsWith("/")||(n.api+="/");let i=n.dependency,l=this.selectData[i].control,p=`${n.api}${l.value}`;this.fetchDataFromAPI(p,e),l.valueChanges.subscribe(_=>g(this,null,function*(){let qe=`${n.api}${_}`;yield this.fetchDataFromAPI(qe,e),n.control.setValue(n.title,{emitEvent:!0})}))}removeSelectControls(e){e.contains("lang")&&e.removeControl("lang"),e.contains("controlName")&&e.removeControl("controlName"),e.contains("dependency")&&e.removeControl("dependency"),e.contains("api")&&e.removeControl("api")}static{this.\u0275fac=function(n){return new(n||o)(w(ie),w(W),w(Y),w(ce),w(xe),w(te))}}static{this.\u0275cmp=O({type:o,selectors:[["app-frame-management"]],viewQuery:function(n,i){if(n&1&&j(ke,7),n&2){let l;B(l=z())&&(i.mainSVG=l.first)}},decls:45,vars:11,consts:[["mainSVG",""],[1,"position-absolute","h-100","w-100","d-flex","flex-column"],[1,"container-fluid","flex-grow-1","p-0"],[1,"row","h-100","g-0"],[1,"col-md-4","col-lg-6","col","d-flex","flex-column","bg-light","bg-opacity-25"],[1,"d-flex","flex-column","flex-grow-1","w-100","position-relative"],[1,"position-relative","d-flex","flex-column","flex-grow-1"],[1,"position-absolute","w-100","h-100","d-flex","align-items-center","justify-content-center","p-3"],["viewBox","0 0 300 300","preserveAspectRatio","xMidYMid meet","svgDraw","",1,"svg-content","max-w-100-p","h-auto","max-h-100-p","img-fluid","mx-auto","d-block","bg-dark","rounded-4","shadow",3,"postDataSet"],[1,"col-md-8","col-lg-6","col"],[1,"content-wrapper","d-flex","flex-column","h-100"],[1,"d-flex","align-items-center","justify-content-center","p-3","border","border-top-1","border-light"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"fa","fa-save","me-2"],[1,"btn","btn-secondary","mx-2",3,"click"],[1,"fa","fa-undo","me-2"],[1,"content-header"],["mat-stretch-tabs","",1,"h-45-px",3,"selectedTabChange","dynamicHeight","selectedIndex","ngClass"],[3,"label",4,"ngFor","ngForOf"],[1,"content-body","flex-grow-1","position-relative"],[1,"position-absolute","overflow-y-auto","h-100","w-100","p-3","bg-light","bg-opacity-10"],[1,"row"],[1,"col-12"],["class","p-3",4,"ngIf"],["id","dimensionModal","tabindex","-1","aria-labelledby","dimensionModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","dimensionModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","platformTab","role","tablist",1,"nav","nav-tabs","mb-3"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-content"],[1,"tab-pane","fade","show","active"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[3,"label"],["mat-tab-label",""],[1,"me-1"],[4,"ngIf"],[1,"p-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],["aria-label","Selected dimension preview",1,"d-flex","align-items-center","gap-3","mb-3","bg-light","bg-opacity-25","p-3","rounded-3"],["id","task-thumbnail-section","remSize","",1,"position-relative","rounded",3,"wPX","hPX"],[1,"position-absolute","h-100","w-100","d-flex","align-items-center","justify-content-center"],[1,"max-w-100","max-h-100","w-auto","h-auto","bg-light","rounded-3","border","border-secondary","bg-opacity-50"],["id","task-description-section"],["id","task-name",1,"fw-bold","small","text-capitalize"],["id","task-size",1,"text-muted","small"],["role","button","data-bs-toggle","modal","data-bs-target","#dimensionModal",1,"ms-auto","text-decoration-underline","small","cursor-pointer"],[1,"nav-item"],["type","button",1,"nav-link",3,"click"],[1,"col-md-4"],[1,"form-check","border","rounded-3","p-0","h-100","m-0",3,"ngClass"],["type","radio","name","dimension",1,"form-check-input","d-none",3,"ngModelChange","value","ngModel","checked","id"],["aria-label","Selected dimension preview",1,"form-check-label","d-flex","align-items-center","gap-3","bg-light","bg-opacity-25","p-3","rounded-3","position-relative","overflow-hidden",3,"for"],["class","position-absolute top-50 start-100 translate-middle pe-5",4,"ngIf"],[1,"position-absolute","top-50","start-100","translate-middle","pe-5"],["remSize","",1,"d-flex","flex-column","align-items-center","justify-content-center",3,"wPX","hPX"],[1,"fa","fa-circle-o","fa-2x"]],template:function(n,i){if(n&1){let l=M();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),q(),x(7,"svg",8,0),r()()()(),k(),s(9,"div",9)(10,"div",10)(11,"div",11)(12,"button",12),F("click",function(){return b(l),v(!1)}),x(13,"i",13),d(14,"Save"),r(),s(15,"button",14),F("click",function(){return b(l),v(!1)}),x(16,"i",15),d(17,"Reset"),r()(),s(18,"div",16)(19,"mat-tab-group",17),F("selectedTabChange",function(_){return b(l),v(i.onTabChange(_.index))}),u(20,Ve,2,1,"mat-tab",18),r()(),s(21,"div",19)(22,"div",20)(23,"div",21)(24,"div",22),u(25,Ne,10,9,"div",23),r()()()()()()()()(),s(26,"div",24)(27,"div",25)(28,"div",26)(29,"div",27)(30,"h5",28),d(31,"Select Poster Dimensions"),r(),x(32,"button",29),r(),s(33,"div",30)(34,"ul",31),u(35,je,3,3,"li",32),r(),s(36,"div",33)(37,"div",34)(38,"div",35),u(39,ze,13,18,"div",36),r()()()(),s(40,"div",37)(41,"button",38),d(42,"Cancel"),r(),s(43,"button",39),F("click",function(){return b(l),v(i.applyDimension())}),d(44,"Resize"),r()()()()()}n&2&&(a(7),c("postDataSet",i.postDetailsForm.value),a(12),c("dynamicHeight",!1)("selectedIndex",i.selectedIndex>=0?i.selectedIndex:void 0)("ngClass",P(9,Me,i.selectedIndex<0)),a(),c("ngForOf",i.toolbarItems),a(5),c("ngIf",i.selectedTool),a(10),c("ngForOf",i.sizes),a(4),c("ngForOf",i.sizes[i.selectedPlatformIndex]==null?null:i.sizes[i.selectedPlatformIndex].entries),a(4),c("disabled",!i.dimensionChanged))},dependencies:[U,Q,K,J,Z,ae,de,re,se,ye,ne,ge,ve,we,Fe],styles:[".svg-wrapper[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;max-height:100%;display:flex;align-items:center;justify-content:center;overflow:hidden}.responsive-svg[_ngcontent-%COMP%]{width:100%;height:auto;display:block;max-width:100%;max-height:100%}"]})}}return o})();var He=[{path:"",component:Se}],De=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=D({type:o})}static{this.\u0275inj=S({imports:[X.forChild(He),X]})}}return o})();var bt=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=D({type:o})}static{this.\u0275inj=S({imports:[ee,De,he,pe,be,ue,fe,_e,me]})}}return o})();export{bt as FrameManagementModule};
