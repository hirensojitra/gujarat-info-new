import{a as G}from"./chunk-TMYTY45U.js";import"./chunk-VCSFWOKU.js";import{g as A,n as D}from"./chunk-Z4YSZAJG.js";import{a as R}from"./chunk-JP4WEFTC.js";import"./chunk-SQRP6PMK.js";import"./chunk-T4EISGAZ.js";import{a as C}from"./chunk-YRG5W6VS.js";import"./chunk-7YVPWAOW.js";import"./chunk-RWKAEW2Z.js";import"./chunk-WIB4C2YZ.js";import{A as E,B as I,C as j,b as k,c as L,e as p,g as x,h as N,m as w,q as F,t as _}from"./chunk-ZDPQXU7Z.js";import{u as y,v as M,w as f}from"./chunk-KB4EY57F.js";import{Fb as d,Qb as i,Rb as o,Sb as u,Zb as v,kb as a,kc as n,la as l,lb as m,mc as b,va as h,wa as c,wd as S}from"./chunk-YECJCXI6.js";import"./chunk-CWTPBX7D.js";var V=(()=>{class t{constructor(r,e,s,g,q){this.fb=r,this.loginService=e,this.authService=s,this.router=g,this.toast=q,this.loading=!1,this.errorMessage=""}ngOnInit(){this.loginForm=this.fb.group({login_id:["",[p.required]],pass_key:["",[p.required,p.minLength(6)]],rememberMe:[!1]})}login(){if(this.loginForm.invalid)return;this.loading=!0;let r=this.loginForm.value;this.loginService.login(r).subscribe({next:e=>{this.loading=!1,this.authService.saveSession(e.token,e.user,r.rememberMe),this.toast.show("Login successful!",{class:"bg-success"}),e.user.email_verified?this.router.navigate(["/home"]):this.router.navigate(["/authentication/verify-email"])},error:e=>{this.loading=!1,this.toast.show(e.message||"Login failed.",{class:"bg-danger"})}})}static{this.\u0275fac=function(e){return new(e||t)(m(E),m(G),m(C),m(y),m(R))}}static{this.\u0275cmp=h({type:t,selectors:[["app-login"]],decls:23,vars:4,consts:[[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","login_id",1,"form-label"],["type","text","id","login_id","formControlName","login_id","placeholder","Enter your email or username",1,"form-control"],["for","pass_key",1,"form-label"],["type","password","id","pass_key","formControlName","pass_key","placeholder","Enter your password",1,"form-control"],[1,"form-group","form-check","mb-3"],["type","checkbox","id","rememberMe","formControlName","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],["type","submit",1,"btn","btn-dark","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"text-decoration-none",3,"routerLink"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h4"),n(2,"Sign In to Your Account"),o()(),i(3,"form",1),v("ngSubmit",function(){return s.login()}),i(4,"div",2)(5,"label",3),n(6,"Email / Username"),o(),u(7,"input",4),o(),i(8,"div",2)(9,"label",5),n(10,"Password"),o(),u(11,"input",6),o(),i(12,"div",7),u(13,"input",8),i(14,"label",9),n(15,"Remember me"),o()(),i(16,"button",10),n(17),o()(),i(18,"div",11)(19,"p"),n(20,"Don't have an account? "),i(21,"a",12),n(22,"Register"),o()()()),e&2&&(a(3),d("formGroup",s.loginForm),a(13),d("disabled",s.loginForm.invalid||s.loading),a(),b(" ",s.loading?"Signing in...":"Sign In"," "),a(4),d("routerLink","/authentication/register"))},dependencies:[M,w,L,k,x,N,F,_,A]})}}return t})();var B=[{path:"",component:V,data:{title:"PostNew | Authentication",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, authentication, portal",robots:"index, follow"}}],T=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=l({imports:[f.forChild(B),f]})}}return t})();var ne=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=l({imports:[S,T,I,j,D]})}}return t})();export{ne as LoginModule};
