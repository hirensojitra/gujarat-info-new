import{a as $}from"./chunk-F54JW7TG.js";import{b as F}from"./chunk-QBRTSGNY.js";import{a as V}from"./chunk-OGYA6K2F.js";import"./chunk-X6E4KI7S.js";import{x as T,y as j}from"./chunk-2V5UGUD5.js";import{a as I}from"./chunk-QHXDM6TZ.js";import{$ as P,Aa as u,Ba as l,G as _,Ia as s,Ja as g,Ka as M,L as y,M as v,Mb as U,R as h,Ra as S,S as x,ba as o,ca as b,gb as k,hb as O,ma as f,oa as c,ob as E,qa as C,ua as r,va as a,wa as d,za as w}from"./chunk-6PSXH6NM.js";var A=()=>[];function z(t,p){if(t&1&&(r(0,"div",31),s(1),a()),t&2){let e=l().$implicit;o(),M("( ",e.roles," )")}}function B(t,p){if(t&1){let e=w();r(0,"button",32),u("click",function(){h(e);let n=l().$implicit,m=l();return x(m.sendMail(n.email))}),d(1,"i",33),s(2),a()}if(t&2){let e=l().$implicit;o(2),g(e.email)}}function G(t,p){if(t&1){let e=w();r(0,"button",32),u("click",function(){h(e);let n=l().$implicit,m=l();return x(m.makeCall(n.mobile))}),d(1,"i",34),s(2),a()}if(t&2){let e=l().$implicit;o(2),g(e.mobile)}}function L(t,p){if(t&1&&(r(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),d(5,"img",17),a(),r(6,"div",18)(7,"div",19)(8,"a",20),d(9,"i",21),a(),r(10,"div",22)(11,"a",23),d(12,"i",24),s(13," Edit"),a(),r(14,"a",25),d(15,"i",26),s(16," Delete"),a()()(),r(17,"h5",27),s(18),a(),r(19,"h6",28)(20,"i"),s(21),a()(),f(22,z,2,1,"div",29),a()()(),r(23,"div",15),f(24,B,3,1,"button",30)(25,G,3,1,"button",30),a()()()),t&2){let e=p.$implicit,i=l();o(5),c("src",i.validateImage(e.username),P)("alt",e.firstname?e.firstname+" "+e.lastname:"User"),o(12),c("title",e.fullname),o(),g(e.fullname),o(),c("title",e.username),o(2),g(e.username),o(),c("ngIf",e.roles),o(2),c("ngIf",e.email),o(),c("ngIf",e.mobile)}}function q(t,p){if(t&1){let e=w();r(0,"li",7)(1,"a",35),u("click",function(){let n=h(e).index,m=l();return x(m.changePage(n+1))}),s(2),a()()}if(t&2){let e=p.index,i=l();C("active",i.currentPage===e+1),o(2),g(e+1)}}var N=(()=>{class t{constructor(e,i,n){this.userService=e,this.toastService=i,this.DS=n,this.users=[],this.pagination={},this.currentPage=1,this.limit=10,this.availableRoles=["master","admin","moderator","curator","poster creator","premium user","free user","guest"],this.apiUrl=I.MasterApi+"/auth/profile-image/"}ngOnInit(){this.loadUsers()}loadUsers(e=this.currentPage){this.userService.getAllUsers({page:e,limit:this.limit}).subscribe(i=>{this.users=i.users,this.pagination=i.pagination,this.currentPage=i.pagination.currentPage},i=>{this.toastService.show(i.error.error,{class:"bg-danger",title:"Error fetching users:"})})}changePage(e){this.loadUsers(e)}updateUserRole(e,i){confirm(`Are you sure you want to assign the role "${i}" to this user? ${e}`)&&this.userService.updateUserData(e,{roles:i}).subscribe(n=>{this.toastService.show("User role updated successfully!",{class:"bg-success",title:"Success:"}),this.loadUsers()},n=>{this.toastService.show(n.error.error,{class:"bg-danger",title:"Error updating role:"})})}validateImage(e){return e?`${this.apiUrl+e}`:"https://dummyimage.com/300x300/F4F4F4/000000&text=USER"}makeCall(e){return this.DS.makeCall(e),!1}sendMail(e,i="",n=""){return this.DS.sendMail(e,i,n),!1}static{this.\u0275fac=function(i){return new(i||t)(b(F),b(V),b($))}}static{this.\u0275cmp=y({type:t,selectors:[["app-users"]],decls:17,vars:7,consts:[[1,"container","mt-4"],[1,"mb-4"],[1,"row","g-3","align-items-stretch"],["class","col-md-4 col-sm-6 col-12 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[1,"col-12"],["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"col-md-4","col-sm-6","col-12","col-lg-4","col-xl-3"],[1,"profile-widget","p-3","h-100","bg-light","bg-opacity-25","d-flex","flex-column"],[1,"flex-grow-1","d-flex","flex-column","mb-3"],[1,"row","g-2"],[1,"col-5","mx-auto"],[1,"w-100","rounded-circle","border-5","shadow","border","border-white",3,"src","alt"],[1,"col-12","text-center"],[1,"dropdown","profile-action"],["href","#","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle","btn","btn-flat"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-right"],["href","#","data-bs-toggle","modal","data-bs-target","#edit_employee",1,"dropdown-item"],[1,"fa","fa-pencil","me-2"],["href","#","data-bs-toggle","modal","data-bs-target","#delete_employee",1,"dropdown-item"],[1,"fa","fa-trash","me-2"],[1,"text-truncate","fw-bold","mb-0","text-primary","mt-3",3,"title"],[1,"text-truncate","m-0",3,"title"],["class","text-secondary",4,"ngIf"],["class","col-12 text-start btn btn-sm btn-outline-dark text-nowrap","type","button",3,"click",4,"ngIf"],[1,"text-secondary"],["type","button",1,"col-12","text-start","btn","btn-sm","btn-outline-dark","text-nowrap",3,"click"],[1,"fa","fa-envelope","me-2"],[1,"fa","fa-phone","me-2"],[1,"page-link",3,"click"]],template:function(i,n){i&1&&(r(0,"div",0)(1,"h2",1),s(2,"User Management"),a(),r(3,"div",2),f(4,L,26,9,"div",3),r(5,"div",4)(6,"nav",5)(7,"ul",6)(8,"li",7)(9,"a",8),u("click",function(){return n.changePage(n.currentPage-1)}),r(10,"span",9),s(11,"\xAB"),a()()(),f(12,q,3,3,"li",10),r(13,"li",7)(14,"a",11),u("click",function(){return n.changePage(n.currentPage+1)}),r(15,"span",9),s(16,"\xBB"),a()()()()()()()()),i&2&&(o(4),c("ngForOf",n.users),o(4),C("disabled",n.currentPage===1),o(4),c("ngForOf",S(6,A).constructor(n.pagination.totalPages)),o(),C("disabled",n.currentPage===n.pagination.totalPages))},dependencies:[k,O],styles:[".profile-widget[_ngcontent-%COMP%]{position:relative}.profile-widget[_ngcontent-%COMP%]   .dropdown.profile-action[_ngcontent-%COMP%]{text-align:right;position:absolute;top:10px;right:10px}.profile-widget[_ngcontent-%COMP%]   .dropdown.profile-action[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{color:var(--bs-secondary-600);font-size:var(--bs-font-size-18);display:inline-block}.profile-widget[_ngcontent-%COMP%]   .dropdown.profile-action[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.profile-widget[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%], .profile-widget[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--bs-secondary-900)}"]})}}return t})();var H=[{path:"",component:N,data:{title:"Gujarat Uvach | Authentication",description:"Login or register to Gujarat Uvach portal for accessing services",keywords:"Gujarat Uvach, login, register, authentication, portal",robots:"index, follow"}}],R=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=_({imports:[U.forChild(H),U]})}}return t})();var se=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=_({imports:[E,R,T,j]})}}return t})();export{se as UsersModule};
