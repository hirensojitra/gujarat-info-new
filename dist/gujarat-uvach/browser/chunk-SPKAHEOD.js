import{a as x}from"./chunk-SXPODWY5.js";import"./chunk-M63T62QT.js";import{a as S}from"./chunk-2S7OECMZ.js";import{a as C}from"./chunk-XSXBVDCX.js";import{a as k}from"./chunk-3PIGAWKT.js";import"./chunk-6TAJW53V.js";import{y as b,z as y}from"./chunk-OVKDPXDD.js";import{t as v,u as M,w as n}from"./chunk-KKCOZWDK.js";import{Jb as l,Kb as d,Lb as m,M as g,Qb as f,ac as p,gb as r,ha as a,id as w,ra as u,sa as c,t as h}from"./chunk-PXJRLMEI.js";import"./chunk-CWTPBX7D.js";var j=(()=>{class e{constructor(t,o,i,s,N){this.router=t,this.registerService=o,this.authService=i,this.toast=s,this.cookie=N,this.isLoading=!1,this.errorMessage="",this.showSetPassword=!1,this.googleUserId="",this.newPassword="",this.confirmPassword=""}handleGoogleCredential(t){console.log("Google response:",t);try{let o=t.credential;this.isLoading=!0,this.errorMessage="",this.registerService.googleAuth(o).pipe(g(i=>(this.isLoading=!1,this.toast.show(i.message||"Google auth failed",{class:"bg-danger"}),h(null)))).subscribe(i=>{if(this.isLoading=!1,!!i&&i.token){let s={path:"/",secure:window.location.protocol==="https:",sameSite:"Lax"};this.authService.setToken(i.token),i.requiresPassword}})}catch(o){console.error("handleGoogleCredential error:",o),this.toast.show("Internal error processing Google response",{class:"bg-danger"}),this.isLoading=!1}}registerWithGoogle(){this.isLoading=!0,google.accounts.id.initialize({client_id:"650577899089-abc77o2gr9jldf1sfi6rcg6gptcdq4p8.apps.googleusercontent.com",callback:t=>this.handleGoogleCredential(t)}),google.accounts.id.prompt(t=>{console.group("GSI Prompt Notification"),console.log("NotDisplayed?",t.isNotDisplayed(),t.getNotDisplayedReason()),console.log("Skipped?",t.isSkippedMoment(),t.getSkippedReason()),console.log("Dismissed?",t.isDismissedMoment(),t.getDismissedReason()),console.groupEnd()})}static{this.\u0275fac=function(o){return new(o||e)(r(M),r(x),r(S),r(k),r(C))}}static{this.\u0275cmp=u({type:e,selectors:[["app-authentication"]],decls:12,vars:0,consts:[[1,"container","d-flex","align-items-center","justify-content-center","min-vh-100","flex-column"],[1,"card","shadow","p-4",2,"width","400px","border-radius","15px"],["src","assets/images/svg/logo-large.svg","alt","logo",1,"w-66-p","mx-auto","mb-3"],[1,"or-container"],[1,"text-center"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-outline-danger","border","w-100","me-2",3,"click"],[1,"fa","fa-google","me-3"]],template:function(o,i){o&1&&(l(0,"div",0)(1,"div",1),m(2,"img",2)(3,"hr")(4,"router-outlet")(5,"span",3),l(6,"p",4),p(7,"Connect with us by"),d(),l(8,"div",5)(9,"button",6),f("click",function(){return i.registerWithGoogle()}),m(10,"i",7),p(11,"Google"),d()()()())},dependencies:[v]})}}return e})();var P=[{path:"",component:j,data:{title:"PostNew | Authentication",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, authentication, portal",robots:"index, follow"},children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",loadChildren:()=>import("./chunk-IVQ6B4FW.js").then(e=>e.LoginModule)},{path:"register",loadChildren:()=>import("./chunk-5LS5JLGM.js").then(e=>e.RegisterModule)},{path:"forgot-password",loadChildren:()=>import("./chunk-SMD75S7Z.js").then(e=>e.ForgotPasswordModule)},{path:"reset-password",loadChildren:()=>import("./chunk-UI2URTJP.js").then(e=>e.ResetPasswordModule)},{path:"verify-email",loadChildren:()=>import("./chunk-6OI57AO6.js").then(e=>e.VerifyEmailModule)}]}],A=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=c({type:e})}static{this.\u0275inj=a({imports:[n.forChild(P),n]})}}return e})();var J=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=c({type:e})}static{this.\u0275inj=a({imports:[w,n,A,b,y]})}}return e})();export{J as AuthenticationModule};
