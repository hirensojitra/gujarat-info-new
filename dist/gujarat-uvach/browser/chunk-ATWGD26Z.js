import{a as st,b as dt,c as ct,d as mt,e as pt,f as gt,g as ut,h as ft}from"./chunk-HEZ4UEIG.js";import{d as lt}from"./chunk-KJBWYL2U.js";import"./chunk-SQRP6PMK.js";import{a as de,b as G}from"./chunk-DBVAOZDO.js";import{a as Ne,n as ce}from"./chunk-VONR4PMN.js";import"./chunk-ZMNXU5KO.js";import{a as q}from"./chunk-32SRTGJU.js";import{a as He,b as Qe,c as We,d as ae}from"./chunk-WIIFXKTS.js";import{b as it,c as at,d as ot}from"./chunk-FCKESNLU.js";import{e as et,f as tt}from"./chunk-XYZ3ZMYG.js";import"./chunk-KIPQOSPE.js";import{a as nt,b as rt,d as oe,e as U,f as le,g as se}from"./chunk-ZXCXBR5R.js";import{V as Xe,p as Ge,q as _e}from"./chunk-6P4R23JF.js";import{c as qe,d as Je,f as ve,i as Ye,k as Ze,l as Ke}from"./chunk-OK5S6IU3.js";import{B as Ue}from"./chunk-ZDPQXU7Z.js";import{s as ne,t as re,u as W,w as P}from"./chunk-KB4EY57F.js";import{$b as g,B as X,Cc as Ae,Db as F,Ea as f,Eb as D,Fa as h,Fb as d,Ga as H,Ha as ye,Lb as R,Ma as Pe,Na as ke,Nb as Ee,O as x,Ob as ze,Pb as Le,Qb as a,Qc as B,Rb as o,Sb as _,Wb as T,Wc as ee,Xc as Q,Zb as u,a as Se,da as ge,ea as I,fb as A,g as J,ga as M,gc as ue,h as Y,hc as fe,i as Ie,ic as he,jc as Oe,ka as Z,kb as s,kc as l,kd as Re,la as C,lb as v,lc as O,ld as Be,mc as w,md as te,na as Fe,nc as $e,pa as we,qa as V,qd as ie,ra as Me,rb as De,sa as Ce,tc as je,ua as L,v as j,va as k,w as b,wa as y,wc as K,wd as N,xc as Ve,zb as Te}from"./chunk-YECJCXI6.js";import"./chunk-CWTPBX7D.js";var _t=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=k({type:n,selectors:[["app-file-manager"]],decls:1,vars:0,template:function(t,i){t&1&&_(0,"router-outlet")},dependencies:[re]})}}return n})();var z=(()=>{class n{constructor(e){this.imgService=e,this._folders$=new Y([]),this._images$=new Y([]),this._selectedFolder$=new Y(null),this.folders$=this._folders$.asObservable(),this.images$=this._images$.asObservable(),this.selectedFolder$=this._selectedFolder$.asObservable(),this.foldersSubject=this._folders$,this.imagesSubject=this._images$,this.selectedFolderSubject=this._selectedFolder$}loadFolders(e=1,t=9999,i="",r="created_at",c="DESC"){this.imgService.getFolders({page:e,limit:t,search:i,sortBy:r,order:c}).pipe(M(m=>{let S=m.folders||[];this._folders$.next(S);let xe=this._selectedFolder$.value;if(xe){let pe=S.find(Mt=>Mt.id===xe.id)||null;this._selectedFolder$.next(pe)}else{let pe=S.length>0?S[0]:null;this._selectedFolder$.next(pe)}}),ge(()=>{let m=this._selectedFolder$.value;return m?this.imgService.getImagesInFolder(m.id,1,9999,"","DESC").pipe(M(S=>{this._images$.next(S.images||[])}),x(S=>(this._images$.next([]),j(null)))):(this._images$.next([]),j(null))}),x(m=>(this._folders$.next([]),this._images$.next([]),this._selectedFolder$.next(null),b(()=>m)))).subscribe({next:()=>{},error:m=>{console.error("Error in loadFolders:",m)}})}setSelectedFolder(e){this._selectedFolder$.next(e),e?this.loadImages(e.id):this._images$.next([])}loadImages(e,t=1,i=12){this.imgService.getImagesInFolder(e,t,i,"","DESC").pipe(M(r=>{this._images$.next(r.images||[])}),x(r=>(this._images$.next([]),j(null)))).subscribe({next:()=>{},error:r=>{console.error("Error in loadImages:",r)}})}createFolder(e){return this.imgService.createFolder(e).pipe(M(()=>{this.loadFolders()}),x(t=>(console.error("Error creating folder:",t),b(()=>t))))}renameFolder(e,t){return this.imgService.renameFolder(e,t).pipe(M(()=>{this.loadFolders()}),x(i=>(console.error("Error renaming folder:",i),b(()=>i))))}deleteFolder(e){return this.imgService.deleteFolder(e).pipe(X(()=>{let t=this._selectedFolder$.value;t&&t.id===e&&(this._selectedFolder$.next(null),this._images$.next([]))}),M(()=>{this.loadFolders()}),x(t=>(console.error("Error deleting folder:",t),b(()=>t))))}uploadFile(e,t,i=""){return this.imgService.uploadImage(e,t,i).pipe(M(()=>{this.loadImages(e)}),x(r=>(console.error("Error uploading file:",r),b(()=>r))))}refreshFile(e,t,i){return this.imgService.refreshImage(e,t,i).pipe(M(()=>{this.loadImages(t)}),x(r=>(console.error("Error refreshing file:",r),b(()=>r))))}deleteFile(e,t){return this.imgService.deleteImage(e,t).pipe(X(()=>{}),M(()=>{this.loadImages(e)}),x(i=>(console.error("Error deleting file:",i),b(()=>i))))}refreshImagesForCurrentFolder(){let e=this._selectedFolder$.value;e&&this.loadImages(e.id)}getItems(e){return this.imgService.getFolders({page:1,limit:9999,search:"",sortBy:"created_at",order:"DESC"}).pipe(X(t=>{let i=t.folders||[];this._folders$.next(i);let r=e!=null?i.find(c=>c.id===e)||null:i.length>0?i[0]:null;return this._selectedFolder$.next(r),{folders:i,selected:r}}),ge(({folders:t,selected:i})=>i?this.imgService.getImagesInFolder(i.id,1,9999,"","DESC").pipe(X(r=>(this._images$.next(r.images||[]),{folders:t,images:r.images||[]}))):(this._images$.next([]),j({folders:t,images:[]}))),x(t=>(this._folders$.next([]),this._images$.next([]),this._selectedFolder$.next(null),b(()=>t))))}getItemById(e){if(!e)return b(()=>new Error("Invalid image ID"));let t=this._images$.value.find(i=>i.id===e);return t?j(t):b(()=>new Error("Image not found in cache"))}static{this.\u0275fac=function(t){return new(t||n)(we(st))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kt=["matDrawer"],Dt=["fileInput"],Tt=(n,p)=>({"btn-dark pe-none":n,"btn-outline-secondary":p}),Et=n=>({"background-image":n,"background-size":"contain","background-position":"center","background-repeat":"no-repeat"});function zt(n,p){if(n&1){let e=T();a(0,"div",26)(1,"button",27),u("click",function(){let i=f(e).$implicit;return g(2).onFolderSelect(i),h(!1)}),a(2,"div",28)(3,"mat-icon",29),l(4,"folder"),o(),a(5,"div",30),l(6),o()()(),a(7,"div",31)(8,"button",32),u("click",function(i){let r=f(e).$implicit,c=g(2);return h(c.deleteFolder(r,i))}),a(9,"mat-icon"),l(10,"delete_outline"),o()()()()}if(n&2){let e=p.$implicit,t=g(2);d("wPX",140)("minWPX",140),s(),d("matTooltip",e.name)("ngClass",Ve(5,Tt,(t.selectedFolder==null?null:t.selectedFolder.id)===e.id,(t.selectedFolder==null?null:t.selectedFolder.id)!==e.id)),s(5),w(" ",e.name," ")}}function Lt(n,p){if(n&1&&(a(0,"div",21)(1,"h3",22),l(2,"Folders"),o(),a(3,"div",23)(4,"div",24),F(5,zt,11,8,"div",25),o()()()),n&2){let e=g();s(4),d("@fadeInStagger",void 0),s(),d("ngForOf",e.folders)("ngForTrackBy",e.trackById)}}function Ot(n,p){if(n&1){let e=T();a(0,"div",34)(1,"div",35)(2,"div",36),u("click",function(){let i=f(e).$implicit,r=g(2);return h(r.onFileDetails(i))}),o(),a(3,"div",37)(4,"div",38)(5,"small",39),l(6),o(),a(7,"div",40)(8,"button",41),_(9,"i",42),o(),a(10,"ul",43)(11,"li")(12,"button",44),u("click",function(i){let r=f(e).$implicit,c=g(2);return h(c.copyHrefToClipboard(i,r))}),_(13,"i",45),l(14,"Copy URL "),o()(),a(15,"li")(16,"button",44),u("click",function(){let i=f(e).$implicit,r=g(2);return h(r.refreshFile(i))}),_(17,"i",46),l(18,"Refresh "),o()(),a(19,"li")(20,"button",47),u("click",function(){let i=f(e).$implicit,r=g(2);return h(r.deleteFile(i))}),_(21,"i",48),l(22,"Delete "),o()(),a(23,"li")(24,"a",49),_(25,"i",50),l(26,"Open "),o()(),a(27,"li")(28,"a",51),_(29,"i",52),l(30,"Download "),o()()()()()()()()}if(n&2){let e=p.$implicit,t=g(2);d("wPX",140)("minWPX",140),s(2),d("ngStyle",K(8,Et,"url("+t.apiUrl+"/user-img/uploads/"+e.id+"?thumb=small)")),D("aria-label",e.metadata||"Image"),s(3),d("matTooltip",e.image_url),s(),O(e.image_url||"Unnamed"),s(18),d("href",t.apiUrl+"/user-img/uploads/"+e.id,A),s(4),d("href",t.apiUrl+"/user-img/uploads/"+e.id,A)}}function $t(n,p){if(n&1&&(a(0,"div")(1,"h3",22),l(2,"Files"),o(),a(3,"div",23)(4,"div",24),F(5,Ot,31,10,"div",33),o()()()),n&2){let e=g();s(4),d("@fadeInStagger",void 0),s(),d("ngForOf",e.images)("ngForTrackBy",e.trackById)}}function jt(n,p){n&1&&(a(0,"div",53)(1,"mat-icon",54),l(2,"folder_open"),o(),a(3,"p",55),l(4,"No folders or files available."),o()())}var $=(()=>{class n{constructor(e,t,i,r,c,m,S){this._router=e,this._route=t,this._cdr=i,this._fileManagerService=r,this.renderer=c,this.elementRef=m,this.breakpointObserver=S,this.apiUrl=q.MasterApi,this.folders=[],this.images=[],this.selectedFolder=null,this.drawerMode="side",this._unsubscribeAll=new J}ngOnInit(){this.breakpointObserver.observe([_e.Handset,_e.Tablet]).pipe(I(this._unsubscribeAll)).subscribe(e=>{this.drawerMode=e.matches?"over":"side",this._cdr.markForCheck()}),this._fileManagerService.folders$.pipe(I(this._unsubscribeAll)).subscribe(e=>{this.folders=e,this._cdr.markForCheck()}),this._fileManagerService.images$.pipe(I(this._unsubscribeAll)).subscribe(e=>{this.images=e,this._cdr.markForCheck()}),this._fileManagerService.selectedFolder$.pipe(I(this._unsubscribeAll)).subscribe(e=>{this.selectedFolder=e,this._cdr.markForCheck()}),this._fileManagerService.loadFolders()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}onFolderSelect(e){!e||e.id===this.selectedFolder?.id||(this._fileManagerService.setSelectedFolder(e),this._fileManagerService.loadImages(e.id),this._router.navigate(["/file-manager/folders",e.id]))}onFileDetails(e){this.matDrawer.open(),this._router.navigate(["./details",e.id],{relativeTo:this._route})}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._route}),this._cdr.markForCheck()}trackById(e,t){return t.id}onUploadClick(){this.fileInput.nativeElement.value="",this.fileInput.nativeElement.click()}onFileSelected(e){let t=e.target;if(!t.files||!this.selectedFolder)return;let i=Array.from(t.files);for(let r of i){let c=r.name.split(".").pop()?.toLowerCase();if(!["jpg","jpeg","png"].includes(c||"")){window.alert("Only JPG, JPEG, or PNG files are allowed.");continue}this._fileManagerService.uploadFile(this.selectedFolder.id,r).pipe(I(this._unsubscribeAll)).subscribe({next:m=>{this.selectedFolder&&this._fileManagerService.loadImages(this.selectedFolder.id)},error:m=>{console.error("Upload failed:",m),window.alert("Failed to upload "+r.name)}})}}onDragOver(e){e.preventDefault()}onDrop(e){if(e.preventDefault(),!e.dataTransfer||!e.dataTransfer.files||!this.selectedFolder)return;let t=Array.from(e.dataTransfer.files);for(let i of t){let r=i.name.split(".").pop()?.toLowerCase();if(!["jpg","jpeg","png"].includes(r||"")){window.alert("Only JPG, JPEG, or PNG files are allowed.");continue}this._fileManagerService.uploadFile(this.selectedFolder.id,i).pipe(I(this._unsubscribeAll)).subscribe({next:c=>{this.selectedFolder&&this._fileManagerService.loadImages(this.selectedFolder.id)},error:c=>{console.error("Upload (via drop) failed:",c),window.alert("Failed to upload "+i.name)}})}}refreshFile(e){let t=this.renderer.createElement("input");t.type="file",t.accept="image/png, image/jpeg, image/jpg",t.onchange=i=>{let r=i.target;if(!r.files||r.files.length===0||!this.selectedFolder)return;let c=r.files[0];this._fileManagerService.refreshFile(e.id,this.selectedFolder.id,c).pipe(I(this._unsubscribeAll)).subscribe({next:m=>{this.selectedFolder&&this._fileManagerService.loadImages(this.selectedFolder.id)},error:m=>{console.error("Error refreshing file:",m),window.alert("Failed to replace the file.")}})},t.click()}deleteFile(e){!this.selectedFolder||!window.confirm(`Are you sure you want to delete "${e.id}"?`)||this._fileManagerService.deleteFile(this.selectedFolder.id,e.id).pipe(I(this._unsubscribeAll)).subscribe({next:()=>{this.selectedFolder&&this._fileManagerService.loadImages(this.selectedFolder.id)},error:i=>{console.error("Failed to delete image:",i),window.alert("Error deleting image.")}})}copyHrefToClipboard(e,t){e.preventDefault();let i=this.renderer.createElement("textarea");i.value=q.MasterApi+"/user-img/uploads/"+t.id,this.renderer.appendChild(this.elementRef.nativeElement,i),i.select(),document.execCommand("copy"),this.renderer.removeChild(this.elementRef.nativeElement,i),window.alert("Copied to clipboard: "+i.value)}deleteFolder(e,t){t.stopPropagation(),window.confirm(`Delete folder "${e.name}"?`)&&this._fileManagerService.deleteFolder(e.id).pipe(I(this._unsubscribeAll)).subscribe({next:()=>{this.selectedFolder?.id===e.id&&(this._fileManagerService.setSelectedFolder(null),this.images=[]),this._fileManagerService.loadFolders()},error:r=>{console.error("Failed to delete folder:",r),window.alert("Error deleting folder.")}})}createFolder(){let e=window.prompt("Enter new folder name:");!e||!e.trim()||this._fileManagerService.createFolder(e.trim()).pipe(I(this._unsubscribeAll)).subscribe({next:t=>{this._fileManagerService.loadFolders()},error:t=>{console.error("Failed to create folder:",t),window.alert("Error creating folder.")}})}closeDrawer(){this.matDrawer.close(),this._router.navigate(["/file-manager/folders",this.selectedFolder.id])}static{this.\u0275fac=function(t){return new(t||n)(v(W),v(ne),v(B),v(z),v(De),v(Pe),v(Ge))}}static{this.\u0275cmp=k({type:n,selectors:[["app-file-manager-list"]],viewQuery:function(t,i){if(t&1&&(ue(kt,7),ue(Dt,7)),t&2){let r;fe(r=he())&&(i.matDrawer=r.first),fe(r=he())&&(i.fileInput=r.first)}},decls:32,vars:8,consts:[["matDrawer",""],["fileInput",""],[1,"position-absolute","inset-0","flex","flex-col","h-100","w-100","overflow-hidden",3,"dragover","drop"],[1,"flex-1","h-100","p-3","me-0",3,"backdropClick"],["position","end",3,"mode","opened","disableClose"],[1,"flex","justify-end","p-2"],["mat-icon-button","",3,"click"],[1,"p-4","overflow-auto","d-flex","flex-column","flex-grow-1"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-sm","text-gray-500","mt-1"],[1,"d-flex","gap-2"],["mat-flat-button","","color","accent",3,"click"],[1,"mr-1"],["mat-flat-button","","color","primary",3,"click"],["type","file","hidden","","multiple","",3,"change"],[1,"flex-grow-1","position-relative"],[1,"position-absolute","h-100","w-100","overflow-y-auto"],["class","mb-4",4,"ngIf"],[4,"ngIf"],["class","flex flex-col items-center justify-center mt-20 text-gray-500",4,"ngIf"],[1,"mb-4"],[1,"text-lg","font-semibold","text-gray-700","mb-3"],[1,"container-fluid"],[1,"d-flex","flex-wrap","gap-3"],["class","position-relative","remSize","",3,"wPX","minWPX",4,"ngFor","ngForOf","ngForTrackBy"],["remSize","",1,"position-relative",3,"wPX","minWPX"],[1,"btn","rounded-4","ratio","ratio-1x1","shadow",3,"click","matTooltip","ngClass"],[1,"p-4","d-flex","flex-column","align-items-center"],[1,"h1","text-gray-400"],[1,"mt-4","text-sm","font-medium","text-gray-800","text-truncate"],[1,"position-absolute","top-0","end-0","mt-2","me-2",2,"z-index","5"],["mat-icon-button","","color","warn","matTooltip","Delete Folder",3,"click"],["remSize","",3,"wPX","minWPX",4,"ngFor","ngForOf","ngForTrackBy"],["remSize","",3,"wPX","minWPX"],[1,"card","border","shadow-sm","position-relative"],["role","img",1,"ratio","ratio-1x1","bg-light","bg-opacity-25",3,"click","ngStyle"],[1,"card-body","p-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-truncate",2,"max-width","75%",3,"matTooltip"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-sm"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"fa","fa-copy","me-2"],[1,"fa","fa-refresh","me-2"],[1,"dropdown-item","text-danger",3,"click"],[1,"fa","fa-trash","me-2"],["target","_blank",1,"dropdown-item",3,"href"],[1,"fa","fa-eye","me-2"],["download","",1,"dropdown-item",3,"href"],[1,"fa","fa-download","me-2"],[1,"flex","flex-col","items-center","justify-center","mt-20","text-gray-500"],[1,"text-6xl"],[1,"mt-2","text-lg"]],template:function(t,i){if(t&1){let r=T();a(0,"div",2),u("dragover",function(m){return f(r),h(i.onDragOver(m))})("drop",function(m){return f(r),h(i.onDrop(m))}),a(1,"mat-drawer-container",3),u("backdropClick",function(){return f(r),h(i.onBackdropClicked())}),a(2,"mat-drawer",4,0)(4,"div",5)(5,"button",6),u("click",function(){return f(r),h(i.closeDrawer())}),a(6,"mat-icon"),l(7,"close"),o()()(),_(8,"router-outlet"),o(),a(9,"mat-drawer-content",7)(10,"div",8)(11,"div")(12,"h2",9),l(13,"File Manager"),o(),a(14,"p",10),l(15),o()(),a(16,"div",11)(17,"button",12),u("click",function(){return f(r),h(i.createFolder())}),a(18,"mat-icon",13),l(19,"create_new_folder"),o(),l(20," New Folder "),o(),a(21,"button",14),u("click",function(){return f(r),h(i.onUploadClick())}),a(22,"mat-icon",13),l(23,"upload"),o(),l(24," Upload file "),o(),a(25,"input",15,1),u("change",function(m){return f(r),h(i.onFileSelected(m))}),o()()(),a(27,"div",16)(28,"div",17),F(29,Lt,6,3,"div",18)(30,$t,6,3,"div",19)(31,jt,5,0,"div",20),o()()()()()}t&2&&(s(2),d("mode",i.drawerMode)("opened",!1)("disableClose",!1),s(13),$e(" ",i.folders.length," folders, ",i.images.length," files "),s(14),d("ngIf",i.folders.length),s(),d("ngIf",i.images.length),s(),d("ngIf",!i.folders.length&&!i.images.length))},dependencies:[Re,Be,te,ie,re,nt,oe,le,de,gt,ut,pt,Ne],encapsulation:2,data:{animation:[qe("fadeInStagger",[Ye("* => *",[Ze(":enter",[ve({opacity:0,transform:"scale(0.9)"}),Ke(100,[Je("300ms ease-out",ve({opacity:1,transform:"scale(1)"}))])],{optional:!0})])])]},changeDetection:0})}}return n})();var At=n=>({"background-image":n,"background-size":"contain","background-position":"center","background-repeat":"no-repeat"});function Rt(n,p){if(n&1&&(a(0,"div",2)(1,"mat-card",3),_(2,"div",4),o(),a(3,"mat-card",3)(4,"mat-card-title"),l(5),o(),a(6,"mat-card-subtitle"),l(7),o(),_(8,"mat-divider",5),a(9,"div",6)(10,"div")(11,"strong"),l(12,"ID:"),o(),l(13),o(),a(14,"div")(15,"strong"),l(16,"Description:"),o(),l(17),o(),a(18,"div")(19,"strong"),l(20,"Size:"),o(),l(21),o(),a(22,"div")(23,"strong"),l(24,"Created At:"),o(),l(25),o()()(),a(26,"div",7)(27,"a",8)(28,"mat-icon"),l(29,"open_in_new"),o(),a(30,"span"),l(31,"Open"),o()(),a(32,"a",9)(33,"mat-icon"),l(34,"download"),o(),a(35,"span"),l(36,"Download"),o()()()()),n&2){let e=g();s(2),d("ngStyle",K(9,At,"url("+e.apiUrl+"/user-img/uploads/"+e.image.id+"?thumb=medium)")),s(3),O(e.image.image_url||"Unnamed"),s(2),O(e.image.metadata||"No metadata"),s(6),w(" ",e.image.id,""),s(4),w(" ",e.image.description||"N/A",""),s(4),w(" ",e.image.size||"Unknown",""),s(4),w(" ",e.image.created_at||"N/A",""),s(2),d("href",e.getImageUrl(),A),s(5),d("href",e.getImageUrl(),A)}}function Bt(n,p){n&1&&(a(0,"mat-card",10)(1,"mat-icon",11),l(2,"image_not_supported"),o(),a(3,"div",12),l(4,"Image not found"),o(),a(5,"div",13),l(6,"Make sure the image ID is correct."),o()())}var be=(()=>{class n{constructor(e,t,i,r){this.route=e,this.fileManagerService=t,this.listComponent=i,this.cdr=r,this.image=null,this.apiUrl=q.MasterApi,this.subscription=new Se}ngOnInit(){this.subscription.add(this.route.paramMap.subscribe(e=>{let t=e.get("id");if(t){let i=this.fileManagerService.imagesSubject.getValue();this.image=i.find(r=>r.id===t)||null,this.cdr.markForCheck()}})),this.listComponent.matDrawer.open()}loadImageDetails(e){let i=this.fileManagerService.imagesSubject.getValue().find(r=>r.id===e);if(this.image=i||null,!this.image&&this.fileManagerService.selectedFolder$){let r=this.fileManagerService.selectedFolderSubject.getValue();r&&this.fileManagerService.loadImages(r.id)}this.cdr.markForCheck()}ngOnDestroy(){this.subscription.unsubscribe()}getImageUrl(){return`${this.apiUrl}/user-img/uploads/${this.image?.id}`}closeDrawer(){return this.listComponent.matDrawer.close()}trackByFn(e,t){return t.id||e}static{this.\u0275fac=function(t){return new(t||n)(v(ne),v(z),v($),v(B))}}static{this.\u0275cmp=k({type:n,selectors:[["app-details"]],decls:3,vars:2,consts:[["notFound",""],["class","p-4",4,"ngIf","ngIfElse"],[1,"p-4"],[1,"mb-4"],["role","img",1,"ratio","ratio-1x1","bg-light","bg-opacity-25",3,"ngStyle"],[1,"my-2"],[1,"d-flex","flex-column","gap-2"],[1,"d-flex","gap-2"],["mat-flat-button","","color","primary","target","_blank",3,"href"],["mat-stroked-button","","download","",3,"href"],[1,"p-4","text-center"],[1,"mb-2",2,"font-size","48px"],[1,"text-lg","font-medium"],[1,"text-secondary"]],template:function(t,i){if(t&1&&F(0,Rt,37,11,"div",1)(1,Bt,7,0,"ng-template",null,0,Ae),t&2){let r=Oe(2);d("ngIf",i.image)("ngIfElse",r)}},dependencies:[te,ie,rt,le,He,We,Qe,dt]})}}return n})();var Nt=(n,p)=>{let e=V(z),t=V(W);return e.getItems(n.paramMap.get("folderId")).pipe(x(i=>{console.error(i);let r=p.url.split("/").slice(0,-1).join("/");return t.navigateByUrl(r),b(()=>i)}))},bt=(n,p)=>{let e=V(z),t=V(W);return e.getItemById(n.paramMap.get("id")).pipe(x(i=>{console.error(i);let r=p.url.split("/").slice(0,-1).join("/");return t.navigateByUrl(r),b(()=>i)}))},xt=(n,p,e,t)=>{let i=t.root;for(;i.firstChild;)i=i.firstChild;return!t.url.includes("/file-manager")||t.url.includes("/details")?!0:n.closeDrawer().then(()=>!0)},Ut=[{path:"",component:_t,children:[{path:"folders/:folderId",component:$,resolve:{item:Nt},children:[{path:"details/:id",component:be,resolve:{item:bt},canDeactivate:[xt]}]},{path:"",component:$,resolve:{items:()=>V(z).getItems()},children:[{path:"details/:id",component:be,resolve:{item:bt},canDeactivate:[xt]}]}]}],St=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=y({type:n})}static{this.\u0275inj=C({imports:[P.forChild(Ut),P]})}}return n})();function Gt(n,p){if(n&1&&(a(0,"mat-option",16),l(1),o()),n&2){let e=p.$implicit;d("value",e),s(),w(" ",e," ")}}function Xt(n,p){if(n&1){let e=T();a(0,"mat-form-field",13)(1,"mat-select",15),u("selectionChange",function(i){f(e);let r=g(2);return h(r._changePageSize(i.value))}),ze(2,Gt,2,2,"mat-option",16,Ee),o()()}if(n&2){let e=g(2);d("appearance",e._formFieldAppearance)("color",e.color),s(),d("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),s(),Le(e._displayedPageSizeOptions)}}function Ht(n,p){if(n&1&&(a(0,"div",14),l(1),o()),n&2){let e=g(2);s(),O(e.pageSize)}}function Qt(n,p){if(n&1&&(a(0,"div",2)(1,"div",12),l(2),o(),F(3,Xt,4,7,"mat-form-field",13)(4,Ht,2,1,"div",14),o()),n&2){let e=g();s(),D("id",e._pageSizeLabelId),s(),w(" ",e._intl.itemsPerPageLabel," "),s(),R(3,e._displayedPageSizeOptions.length>1?3:-1),s(),R(4,e._displayedPageSizeOptions.length<=1?4:-1)}}function Wt(n,p){if(n&1){let e=T();a(0,"button",17),u("click",function(){f(e);let i=g();return h(i.firstPage())}),H(),a(1,"svg",7),_(2,"path",18),o()()}if(n&2){let e=g();d("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),D("aria-label",e._intl.firstPageLabel)}}function qt(n,p){if(n&1){let e=T();a(0,"button",19),u("click",function(){f(e);let i=g();return h(i.lastPage())}),H(),a(1,"svg",7),_(2,"path",20),o()()}if(n&2){let e=g();d("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),D("aria-label",e._intl.lastPageLabel)}}var me=(()=>{class n{constructor(){this.changes=new J,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,t,i)=>{if(i==0||t==0)return`0 of ${i}`;i=Math.max(i,0);let r=e*t,c=r<i?Math.min(r+t,i):r+t;return`${r+1} \u2013 ${c} of ${i}`}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jt(n){return n||new me}var Yt={provide:me,deps:[[new Me,new Ce,me]],useFactory:Jt},Zt=50;var Kt=new Fe("MAT_PAGINATOR_DEFAULT_OPTIONS"),ei=0,ti=(()=>{class n{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(t=>Q(t,0)),this._updateDisplayedPageSizeOptions()}constructor(e,t,i){if(this._intl=e,this._changeDetectorRef=t,this._pageSizeLabelId=`mat-paginator-page-size-label-${ei++}`,this._isInitialized=!1,this._initializedStream=new Ie(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new ke,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){let{pageSize:r,pageSizeOptions:c,hidePageSize:m,showFirstLastButtons:S}=i;r!=null&&(this._pageSize=r),c!=null&&(this._pageSizeOptions=c),m!=null&&(this.hidePageSize=m),S!=null&&(this.showFirstLastButtons=S)}this._formFieldAppearance=i?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let e=this.getNumberOfPages()-1;return this.pageIndex<e&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){let t=this.pageIndex*this.pageSize,i=this.pageIndex;this.pageIndex=Math.floor(t/e)||0,this.pageSize=e,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:Zt),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,t)=>e-t),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static{this.\u0275fac=function(t){return new(t||n)(v(me),v(B),v(Kt,8))}}static{this.\u0275cmp=k({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[L.HasDecoratorInputTransform,"pageIndex","pageIndex",Q],length:[L.HasDecoratorInputTransform,"length","length",Q],pageSize:[L.HasDecoratorInputTransform,"pageSize","pageSize",Q],pageSizeOptions:"pageSizeOptions",hidePageSize:[L.HasDecoratorInputTransform,"hidePageSize","hidePageSize",ee],showFirstLastButtons:[L.HasDecoratorInputTransform,"showFirstLastButtons","showFirstLastButtons",ee],selectConfig:"selectConfig",disabled:[L.HasDecoratorInputTransform,"disabled","disabled",ee]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[Te,je],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"div",1),F(2,Qt,5,4,"div",2),a(3,"div",3)(4,"div",4),l(5),o(),F(6,Wt,3,5,"button",5),a(7,"button",6),u("click",function(){return i.previousPage()}),H(),a(8,"svg",7),_(9,"path",8),o()(),ye(),a(10,"button",9),u("click",function(){return i.nextPage()}),H(),a(11,"svg",7),_(12,"path",10),o()(),F(13,qt,3,5,"button",11),o()()()),t&2&&(s(2),R(2,i.hidePageSize?-1:2),s(3),w(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),s(),R(6,i.showFirstLastButtons?6:-1),s(),d("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),D("aria-label",i._intl.previousPageLabel),s(3),d("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),D("aria-label",i._intl.nextPageLabel),s(3),R(13,i.showFirstLastButtons?13:-1))},dependencies:[et,at,Xe,oe,de],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})(),It=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=y({type:n})}static{this.\u0275inj=C({providers:[Yt],imports:[U,ot,G,ti]})}}return n})();var Ft=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=y({type:n})}static{this.\u0275inj=C({imports:[N,Ue,P,U,se,it,mt,lt,ae,G,It,tt,ft,ce]})}}return n})();var wt=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=y({type:n})}static{this.\u0275inj=C({imports:[N,P,U,se,ae,G,ct,ce]})}}return n})();var yn=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=y({type:n})}static{this.\u0275inj=C({providers:[$],imports:[N,St,Ft,wt,P]})}}return n})();export{yn as FileManagerModule};
