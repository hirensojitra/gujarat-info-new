import{a as m}from"./chunk-QUJ6LAZ7.js";import{a as h}from"./chunk-RGVYU375.js";import{A as s,J as c,M as i,Mb as u,p as o,t as n}from"./chunk-WT3K4JXK.js";var S=(()=>{class e{constructor(t,r,a){this.authService=t,this.router=r,this.platformService=a}canActivate(t,r){return this.platformService.isBrowser()?this.checkAuth(r.url):o(!1)}checkAuth(t){return this.authService.isAuthenticated().pipe(n(r=>r?!0:(this.router.navigate(["/auth/login"],{queryParams:{returnUrl:t},queryParamsHandling:"merge"}),!1)),s(()=>(this.router.navigate(["/auth/login"],{queryParams:{returnUrl:t},queryParamsHandling:"merge"}),o(!1))))}static{this.\u0275fac=function(r){return new(r||e)(i(m),i(u),i(h))}}static{this.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var P=(()=>{class e{constructor(t,r,a){this.authService=t,this.router=r,this.platformService=a}canActivate(t,r){if(!this.platformService.isBrowser())return o(!1);let a=t.data.roles||[];return this.checkAuthorization(r.url,a)}checkAuthorization(t,r){return this.authService.isAuthenticated().pipe(n(a=>a?this.authService.hasRole(r)?!0:(this.router.navigate(["/unauthorized"],{queryParams:{returnUrl:t},queryParamsHandling:"merge"}),!1):(this.navigateToLogin(t),!1)),s(()=>(this.navigateToLogin(t),o(!1))))}navigateToLogin(t){this.router.navigate(["/auth/login"],{queryParams:{returnUrl:t},queryParamsHandling:"merge"})}static{this.\u0275fac=function(r){return new(r||e)(i(m),i(u),i(h))}}static{this.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{S as a,P as b};
