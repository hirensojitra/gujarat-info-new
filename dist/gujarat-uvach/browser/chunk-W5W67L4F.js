import{a as D}from"./chunk-7WMUUMW3.js";import{a as j}from"./chunk-QKFZANPX.js";import{n as A}from"./chunk-Z4YSZAJG.js";import{a as F}from"./chunk-JP4WEFTC.js";import"./chunk-SQRP6PMK.js";import"./chunk-T4EISGAZ.js";import{a as L}from"./chunk-YRG5W6VS.js";import"./chunk-7YVPWAOW.js";import{a as k}from"./chunk-RWKAEW2Z.js";import"./chunk-WIB4C2YZ.js";import{B as R,C as W,c as E,g as T,l as x}from"./chunk-ZDPQXU7Z.js";import{u as N,w as S}from"./chunk-KB4EY57F.js";import{$b as _,Db as y,Fb as l,O as v,Qb as s,Rb as n,Zb as C,kb as a,kc as m,la as c,lb as d,mc as f,md as b,pc as w,qc as g,rc as h,v as P,va as M,wa as u,wd as I}from"./chunk-YECJCXI6.js";import"./chunk-CWTPBX7D.js";function O(e,V){if(e&1&&(s(0,"div",6),m(1),n()),e&2){let i=_();a(),f(" ",i.errorMessage,`
`)}}var q=(()=>{class e{constructor(i,o,t,p,r){this.router=i,this.registerService=o,this.authService=t,this.toast=p,this.cookie=r,this.isLoading=!1,this.errorMessage="",this.newPassword="",this.confirmPassword=""}ngOnInit(){this.userId=this.cookie.get("google_user_id"),this.userId||this.router.navigate(["/"])}onSubmitNewPassword(){if(this.newPassword!==this.confirmPassword){this.errorMessage="Passwords do not match";return}this.isLoading=!0,this.registerService.setPassword(this.userId,this.newPassword).pipe(v(i=>(this.isLoading=!1,this.toast.show(i.message||"Could not set password",{class:"bg-danger"}),P(null)))).subscribe(i=>{this.isLoading=!1,i?.token?(this.cookie.delete("requires_password"),this.cookie.delete("google_user_id"),this.authService.setToken(i.token),this.router.navigate(["/home"])):this.errorMessage="Unexpected server response"})}static{this.\u0275fac=function(o){return new(o||e)(d(N),d(D),d(L),d(F),d(k))}}static{this.\u0275cmp=M({type:e,selectors:[["app-set-password"]],decls:13,vars:7,consts:[[1,"mb-3","text-center"],[1,"form-group","mb-3"],[1,"form-label"],["type","password",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","alert alert-danger py-1",4,"ngIf"],[1,"btn","btn-primary","w-100",3,"click","disabled"],[1,"alert","alert-danger","py-1"]],template:function(o,t){o&1&&(s(0,"h5",0),m(1,"Set Your Password"),n(),s(2,"div",1)(3,"label",2),m(4,"New Password"),n(),s(5,"input",3),h("ngModelChange",function(r){return g(t.newPassword,r)||(t.newPassword=r),r}),n()(),s(6,"div",1)(7,"label",2),m(8,"Confirm Password"),n(),s(9,"input",3),h("ngModelChange",function(r){return g(t.confirmPassword,r)||(t.confirmPassword=r),r}),n()(),y(10,O,2,1,"div",4),s(11,"button",5),C("click",function(){return t.onSubmitNewPassword()}),m(12),n()),o&2&&(a(5),w("ngModel",t.newPassword),l("disabled",t.isLoading),a(4),w("ngModel",t.confirmPassword),l("disabled",t.isLoading),a(),l("ngIf",t.errorMessage),a(),l("disabled",t.isLoading),a(),f(" ",t.isLoading?"Saving...":"Save Password",`
`))},dependencies:[b,E,T,x]})}}return e})();var U=[{path:"",component:q,data:{title:"PostNew | Set Password",description:"Set your password for PostNew portal to access services",keywords:"PostNew, set password, authentication, portal",robots:"index, follow"},canActivate:[j]}],G=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=c({imports:[S.forChild(U),S]})}}return e})();var le=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=c({imports:[I,G,R,W,A]})}}return e})();export{le as SetPasswordModule};
