import{a as R}from"./chunk-2OCQMUO2.js";import{a as T}from"./chunk-445EEONG.js";import{A as D,J as j,N,a as F,z as X}from"./chunk-E3XRSMLB.js";import{b as k}from"./chunk-VWVYJ5NX.js";import"./chunk-E7GWMVA6.js";import{a as I}from"./chunk-WVD7KDO5.js";import{v as P}from"./chunk-BWZ6RO2W.js";import{Ab as M,Ac as E,Ha as S,Hb as U,Ma as a,Na as u,Z as p,ab as x,cb as s,ha as b,ia as g,ib as r,jb as o,kb as l,nb as C,ob as f,pb as c,qa as v,ra as w,sc as O,tc as z,yb as d,zb as y}from"./chunk-UQPPIRHC.js";var q=()=>[30,50,100];function L(i,h){if(i&1){let e=C();r(0,"a",24),f("click",function(){v(e);let n=c().$implicit,m=c();return w(m.sendMail(n.email))}),r(1,"small"),l(2,"i",25),o()()}i&2&&s("hPX",30)("wPX",30)}function B(i,h){if(i&1){let e=C();r(0,"a",24),f("click",function(){v(e);let n=c().$implicit,m=c();return w(m.makeCall(n.mobile))}),r(1,"small"),l(2,"i",26),o()()}i&2&&s("hPX",30)("wPX",30)}function G(i,h){if(i&1&&(r(0,"div",6)(1,"div",7)(2,"div",8),l(3,"img",9),r(4,"div",10)(5,"h5",11),d(6),o(),r(7,"small",12)(8,"i"),d(9),o()()(),l(10,"hr",13),r(11,"div",14),x(12,L,3,2,"a",15)(13,B,3,2,"a",15),o()(),r(14,"div",16)(15,"a",17),l(16,"i",18),o(),r(17,"div",19)(18,"a",20),l(19,"i",21),d(20," Edit"),o(),r(21,"a",22),l(22,"i",23),d(23," Delete"),o()()()()()),i&2){let e=h.$implicit,t=c();a(3),s("src",t.validateImage(e.username),S)("alt",e.firstname?e.firstname+" "+e.lastname:"User")("wPX",60)("hPX",60),a(2),s("title",e.fullname),a(),y(e.fullname),a(),s("title",e.username),a(2),M("@",e.username,""),a(3),s("ngIf",e.email),a(),s("ngIf",e.mobile)}}var V=(()=>{class i{changePageSize(e){throw new Error("Method not implemented.")}constructor(e,t,n){this.userService=e,this.toastService=t,this.DS=n,this.users=[],this.pagination={},this.currentPage=1,this.limit=10,this.availableRoles=["master","admin","moderator","curator","poster creator","premium user","free user","guest"],this.apiUrl=I.MasterApi+"/auth/profile-image/"}ngOnInit(){this.loadUsers()}loadUsers(e=this.currentPage){this.userService.getAllUsers({page:e,limit:this.limit}).subscribe(t=>{this.users=t.users,this.pagination=t.pagination,console.log(t.pagination),this.currentPage=t.pagination.currentPage},t=>{this.toastService.show(t.error.error,{class:"bg-danger",title:"Error fetching users:"})})}changePage(e){this.loadUsers(e)}updateUserRole(e,t){confirm(`Are you sure you want to assign the role "${t}" to this user? ${e}`)&&this.userService.updateUserData(e,{roles:t}).subscribe(n=>{this.toastService.show("User role updated successfully!",{class:"bg-success",title:"Success:"}),this.loadUsers()},n=>{this.toastService.show(n.error.error,{class:"bg-danger",title:"Error updating role:"})})}validateImage(e){return e?`${this.apiUrl+e}?format=png&quality=10`:"https://dummyimage.com/300x300/F4F4F4/000000&text=USER"}makeCall(e){return this.DS.makeCall(e),!1}sendMail(e,t="",n=""){return this.DS.sendMail(e,t,n),!1}static{this.\u0275fac=function(t){return new(t||i)(u(k),u(T),u(R))}}static{this.\u0275cmp=b({type:i,selectors:[["app-users"]],decls:6,vars:6,consts:[[1,"h-100","w-100","d-flex","flex-column"],[1,"flex-grow-1","overflow-y-auto","position-relative"],[1,"position-absolute","h-100","w-100","p-3"],[1,"row","g-3","align-items-stretch"],["class","col-md-4 col-sm-6 col-lg-4 col-xl-3 col-xxl-2 col-6",4,"ngFor","ngForOf"],["pagination","",1,"mt-0","mb-0","px-3",3,"currentPageChange","pageSizeChange","currentPage","totalItems","pageSize","pageSizes"],[1,"col-md-4","col-sm-6","col-lg-4","col-xl-3","col-xxl-2","col-6"],[1,"profile-widget","p-3","h-100","bg-white","d-flex","flex-column","rounded-3","border"],[1,"flex-grow-1","d-flex","align-items-center","flex-column"],["remSize","",1,"rounded-2","border-2","shadow","border","border-white","mx-auto","mb-3",3,"src","alt","wPX","hPX"],[1,"text-center"],[1,"text-truncate","fw-bold","mb-0","text-dark",3,"title"],[1,"text-truncate","m-0",3,"title"],[1,"border-dark","w-75"],[1,"d-flex","align-items-center"],["href","#","class","btn btn-outline-secondary rounded-0 btn-sm m-1 p-0 d-flex align-items-center justify-content-center","remSize","","type","button",3,"hPX","wPX","click",4,"ngIf"],[1,"dropdown","profile-action","h-100","d-flex","align-items-start"],["href","#","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle","btn","btn-lighter","border-0","outline-0"],[1,"fa","fa-ellipsis-h"],[1,"dropdown-menu","dropdown-menu-right"],["href","#","data-bs-toggle","modal","data-bs-target","#edit_employee",1,"dropdown-item"],[1,"fa","fa-pencil","me-2"],["href","#","data-bs-toggle","modal","data-bs-target","#delete_employee",1,"dropdown-item"],[1,"fa","fa-trash","me-2"],["href","#","remSize","","type","button",1,"btn","btn-outline-secondary","rounded-0","btn-sm","m-1","p-0","d-flex","align-items-center","justify-content-center",3,"click","hPX","wPX"],[1,"fa","fa-envelope","text-center"],[1,"fa","fa-phone","text-center"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4,G,24,10,"div",4),o()()(),r(5,"div",5),f("currentPageChange",function(_){return n.changePage(_)})("pageSizeChange",function(_){return n.changePageSize(_)}),o()()),t&2&&(a(4),s("ngForOf",n.users),a(),s("currentPage",n.currentPage)("totalItems",n.pagination.totalUsers)("pageSize",n.limit)("pageSizes",U(5,q)))},dependencies:[O,z,j,F],styles:[".profile-widget[_ngcontent-%COMP%]{position:relative}.profile-widget[_ngcontent-%COMP%]   .dropdown.profile-action[_ngcontent-%COMP%]{text-align:right;position:absolute;top:0;right:0;padding-right:10px;padding-top:10px;pointer-events:none}.profile-widget[_ngcontent-%COMP%]   .dropdown.profile-action[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{color:var(--bs-secondary-600);font-size:var(--bs-font-size-18);display:inline-block;pointer-events:auto}.profile-widget[_ngcontent-%COMP%]   .dropdown.profile-action[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{pointer-events:auto}.profile-widget[_ngcontent-%COMP%]   .dropdown.profile-action[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.profile-widget[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%], .profile-widget[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--bs-secondary-900)}"]})}}return i})();var H=[{path:"",component:V,data:{title:"PostNew | Authentication",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, authentication, portal",robots:"index, follow"}}],A=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=g({type:i})}static{this.\u0275inj=p({imports:[P.forChild(H),P]})}}return i})();var de=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=g({type:i})}static{this.\u0275inj=p({imports:[E,A,X,D,N]})}}return i})();export{de as UsersModule};
