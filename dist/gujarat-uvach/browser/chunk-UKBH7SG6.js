import{a as mt}from"./chunk-F64UFHWB.js";import{a as pt,b as ht}from"./chunk-2UPOZDHX.js";import{a as We}from"./chunk-P6UW2C3L.js";import{a as dt}from"./chunk-GEG6VYY3.js";import{d as ot,h as at,i as rt,j as st,n as lt,r as ct}from"./chunk-F3KBCKKL.js";import{c as He,d as q,f as Ge,g as qe,i as Je,k as Ke,o as Ye,r as Qe,s as Xe,t as Ze,u as et,w as tt,x as it,y as nt}from"./chunk-R4GYVDXC.js";import{a as ze}from"./chunk-RGVYU375.js";import{a as ve}from"./chunk-WIB4C2YZ.js";import{$ as Te,Aa as H,Ba as G,Ca as Q,Da as M,Db as Re,Ea as b,Eb as Le,Fa as V,Ga as me,Gb as je,Ha as pe,Ia as he,J as se,Ja as fe,K as le,Kb as $e,La as c,M as oe,Ma as B,Na as Pe,Nb as Oe,Ob as ye,P as Ce,Q as ce,V as A,Va as _e,W as P,X as Ee,Y as ke,ba as de,da as ae,ga as m,gb as Fe,ha as I,hb as Me,ib as Ne,jb as Ue,ka as Ae,pa as F,qb as Be,r as De,ra as p,rb as ge,sb as Ve,vb as ue,xa as a,ya as r,za as f}from"./chunk-WT3K4JXK.js";import{a as ee,b as ne,f as x}from"./chunk-CWTPBX7D.js";var ft=(()=>{class o{constructor(e,t){this.document=e,this.platformId=t,this.baseUrl=""}getBaseUrl(){if(ge(this.platformId)){let e=this.document.baseURI;e.startsWith("https://")||(e="https://"+e.substring(e.indexOf("://")+3)),this.baseUrl=e}else console.warn("Document is not available in SSR. Returning fallback base URL."),this.baseUrl="https://gujarat-uvach.netlify.app/";return this.baseUrl}static{this.\u0275fac=function(t){return new(t||o)(oe(Fe),oe(de))}}static{this.\u0275prov=se({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var gt=(()=>{class o{constructor(e){this.http=e,this.apiUrl=ve.MasterApi+"/track"}saveData(e,t){let i={formData:e,imgParam:t};return console.log(i),this.http.post(this.apiUrl+"/saveData",i)}static{this.\u0275fac=function(t){return new(t||o)(oe(ue))}}static{this.\u0275prov=se({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Ct=["imageDraw"],Et=["textInput"],kt=["imageInput"],ut=o=>({"d-none":o});function Tt(o,w){o&1&&(a(0,"div",54),f(1,"img",55),a(2,"button",56),f(3,"i",57),c(4,"Home"),r()()),o&2&&(m(2),p("routerLink","/latest"))}function At(o,w){if(o&1&&(a(0,"h1",76),c(1),r()),o&2){let e=b(4);m(),B(e.postDetails.title)}}function Pt(o,w){if(o&1&&(a(0,"h2",77),c(1),r()),o&2){let e=b(4);m(),B(e.postDetails.info)}}function Ft(o,w){if(o&1&&(H(0),a(1,"h5",78)(2,"b"),c(3),r()(),G()),o&2){let e=b(4);m(3),B(e.postStatus)}}function Mt(o,w){if(o&1&&(a(0,"div",72),F(1,At,2,1,"h1",73)(2,Pt,2,1,"h2",74)(3,Ft,4,1,"ng-container",75),r()),o&2){let e=b(3);m(),p("ngIf",e.postDetails.title),m(),p("ngIf",e.postDetails.info),m(),p("ngIf",e.postStatus!=="loading"&&e.isDeleted==!1)}}function Nt(o,w){if(o&1&&f(0,"img",79),o&2){let e=b(3);p("src",e.imgUrl+e.postDetails.id,ae)("alt",e.postDetails.title)}}function Ut(o,w){if(o&1){let e=Q();a(0,"div",60),F(1,Mt,4,3,"div",61)(2,Nt,1,2,"img",62),a(3,"button",63),M("click",function(){A(e);let i=b(2);return P(i.openInBrowser())}),f(4,"i",64),c(5," DOWNLOAD POSTER "),r(),a(6,"div",65)(7,"h3",66),f(8,"i",67),c(9," You're using an in-app browser!"),r(),a(10,"p",68),c(11,"For the best experience, please open this page in your default browser."),r(),a(12,"h5",69),c(13,"\u{1F4CC} How to Open in Browser:"),r(),a(14,"ul",70)(15,"li",71)(16,"strong"),c(17,"Facebook:"),r(),c(18," Tap "),a(19,"b"),c(20,"\u2022\u2022\u2022 (three dots)"),r(),c(21," in the top-right & select "),a(22,"b"),c(23,'"Open in Browser"'),r(),c(24,"."),r(),a(25,"li",71)(26,"strong"),c(27,"Instagram:"),r(),c(28," Tap "),a(29,"b"),c(30,"\u2022\u2022\u2022 (three dots)"),r(),c(31," in the top-right & select "),a(32,"b"),c(33,'"Open in Browser"'),r(),c(34,"."),r(),a(35,"li",71)(36,"strong"),c(37,"Twitter:"),r(),c(38," Tap the "),a(39,"b"),c(40,"share icon"),r(),c(41," & choose "),a(42,"b"),c(43,'"Open in Browser"'),r(),c(44,"."),r()()()()}if(o&2){let e=b(2);m(),p("ngIf",e.postDetails),m(),p("ngIf",e.postDetails)}}function Bt(o,w){if(o&1&&(a(0,"div",58),F(1,Ut,45,2,"div",59),r()),o&2){let e=b();m(),p("ngIf",e.isInAppBrowser)}}function Vt(o,w){if(o&1&&(a(0,"h1",76),c(1),r()),o&2){let e=b(3);m(),B(e.postDetails.title)}}function Rt(o,w){if(o&1&&(a(0,"h2",77),c(1),r()),o&2){let e=b(3);m(),B(e.postDetails.info)}}function Lt(o,w){if(o&1&&(H(0),a(1,"h5",78)(2,"b"),c(3),r()(),G()),o&2){let e=b(3);m(3),B(e.postStatus)}}function jt(o,w){if(o&1&&(a(0,"div",72),F(1,Vt,2,1,"h1",73)(2,Rt,2,1,"h2",74)(3,Lt,4,1,"ng-container",75),r()),o&2){let e=b(2);m(),p("ngIf",e.postDetails.title),m(),p("ngIf",e.postDetails.info),m(),p("ngIf",e.postStatus!=="loading")}}function $t(o,w){if(o&1&&f(0,"img",79),o&2){let e=b(2);p("src",e.imgUrl+e.postDetailsDefault.id+"?quality=100",ae)("alt",e.postDetailsDefault.title)}}function Ot(o,w){if(o&1&&f(0,"img",93),o&2){let e=b(2);p("src",e.imgUrl+e.postDetails.id,ae)("alt",e.postDetails.title)("ngClass",_e(3,ut,e.postStatus!=="loading"))}}function zt(o,w){o&1&&(a(0,"div"),c(1,"Loading"),r())}function Wt(o,w){o&1&&(a(0,"a",94),f(1,"i",95),c(2,"Join PostNew Channel"),r())}function Ht(o,w){o&1&&(a(0,"a",96),f(1,"i",49),c(2,"Join PostNew "),r())}function Gt(o,w){if(o&1&&(H(0),a(1,"label",110),c(2),r(),f(3,"input",111),G()),o&2){let e=b().$implicit;m(),V("for",e.id),m(),B(e.title),m(),V("id",e.id),V("name",e.id),V("formControlName",e.id),p("placeholder",e.title)}}function qt(o,w){if(o&1&&(H(0),a(1,"label",110),c(2),r(),f(3,"input",112),G()),o&2){let e=b().$implicit;m(),V("for",e.id),m(),B(e.title),m(),V("id",e.id),V("name",e.id),V("formControlName",e.id)}}function Jt(o,w){if(o&1){let e=Q();H(0),a(1,"label",113),c(2),r(),f(3,"input",114),a(4,"input",115),M("change",function(i){A(e);let n=b().$implicit,s=b(3);return P(s.onFileChange(i,n.id,n.index))}),r(),G()}if(o&2){let e=b().$implicit;m(2),B(e.title),m(),V("id",e.id),V("name",e.id),V("formControlName",e.id),m(),me("id","",e.id,"-file"),me("name","",e.id,"-file"),me("formControlName","",e.id,"-file")}}function Kt(o,w){if(o&1&&(a(0,"option",120),c(1),r()),o&2){let e=w.$implicit,t=b(2).$implicit;p("value",e.id),m(),B(t.lang=="gu"?e.gu_name:e.name)}}function Yt(o,w){if(o&1&&(H(0),a(1,"label",116),c(2),r(),a(3,"select",117)(4,"option",118),c(5),r(),F(6,Kt,2,2,"option",119),r(),G()),o&2){let e=b().$implicit,t=b(3);m(2),B(e.title),m(),V("formControlName",e.id),m(2),Pe("-- Select ",e.title," --"),m(),p("ngForOf",t.apiData[e.controlName])}}function Qt(o,w){if(o&1&&(a(0,"div",109),F(1,Gt,4,6,"ng-container",75)(2,qt,4,5,"ng-container",75)(3,Jt,5,10,"ng-container",75)(4,Yt,7,4,"ng-container",75),r()),o&2){let e=w.$implicit;m(),p("ngIf",e.type==="text"),m(),p("ngIf",e.type==="date"),m(),p("ngIf",e.type==="image"),m(),p("ngIf",e.type==="select"&&e.controlName)}}function Xt(o,w){o&1&&(a(0,"div",121)(1,"label",45),c(2,"Mobile Number"),r(),f(3,"input",122),r())}function Zt(o,w){if(o&1){let e=Q();a(0,"form",97),M("ngSubmit",function(){A(e);let i=b(2);return P(i.onSubmitFormData())}),F(1,Qt,5,4,"div",98)(2,Xt,4,0,"div",99),a(3,"div",100),f(4,"hr",101),r(),a(5,"div",102)(6,"button",103),f(7,"i",104),c(8,"Generate Poster"),r(),a(9,"button",105),M("click",function(){A(e);let i=b(2);return P(i.resetForm())}),f(10,"i",31),r()(),a(11,"div",100),f(12,"hr",101),r(),a(13,"div",106)(14,"button",107),M("click",function(){A(e);let i=b(2);return P(i.checkDownload("whatsapp"))}),f(15,"i",95),a(16,"span",108),c(17,"WhatsApp"),r()()()()}if(o&2){let e=b(2);p("formGroup",e.formData),m(),p("ngForOf",e.dataset),m(),p("ngIf",e.postDetails==null?null:e.postDetails.track)}}function ei(o,w){o&1&&(H(0),a(1,"h5",123)(2,"b"),c(3,"No any post available for this link."),r()(),G())}function ti(o,w){if(o&1){let e=Q();a(0,"div",124)(1,"div",100)(2,"div",125)(3,"button",126),M("click",function(){A(e);let i=b(2);return P(i.checkDownload("download"))}),f(4,"i",64),c(5,"Download "),r(),a(6,"button",127),M("click",function(){A(e);let i=b(2);return P(i.resetForm())}),f(7,"i",31),r()()(),a(8,"div",100),f(9,"hr",101),r(),a(10,"div",128)(11,"button",129),M("click",function(){A(e);let i=b(2);return P(i.checkDownload("whatsapp"))}),f(12,"i",95),a(13,"span",108),c(14,"WhatsApp"),r()(),a(15,"button",130),M("click",function(){A(e);let i=b(2);return P(i.checkDownload("facebook"))}),f(16,"i",49),c(17,"Facebook "),r()()()}}function ii(o,w){if(o&1&&(a(0,"div",80),F(1,jt,4,3,"div",61),a(2,"div",81)(3,"div",82)(4,"div",83),F(5,$t,1,2,"img",62),Ee(),f(6,"svg",84,2),F(8,Ot,1,5,"img",85)(9,zt,2,0,"div",75),ke(),a(10,"div",86),F(11,Wt,3,0,"a",87)(12,Ht,3,0,"a",88),r()()()(),a(13,"div",89),F(14,Zt,18,3,"form",90),r(),F(15,ei,4,0,"ng-container",75),a(16,"div",91),F(17,ti,18,0,"div",92),r()()),o&2){let e=b();m(),p("ngIf",e.postDetails),m(4),p("ngIf",e.postStatus=="This image is not published"||e.postStatus=="This image has been deleted"&&e.postDetailsDefault),m(),p("ngClass",_e(10,ut,e.postStatus=="loading"||e.isDeleted||!e.dataProccessed)),m(2),p("ngIf",e.postStatus=="loading"&&e.postDetails),m(),p("ngIf",e.postStatus=="loading"),m(2),p("ngIf",e.postDetails==null?null:e.postDetails.info_show),m(),p("ngIf",e.postDetails==null?null:e.postDetails.info_show),m(2),p("ngIf",!e.canDownload&&e.dataset.length),m(),p("ngIf",!e.postStatus),m(2),p("ngIf",e.canDownload)}}function ni(o,w){if(o&1){let e=Q();a(0,"div",131),c(1," Created by "),a(2,"a",132),M("click",function(){return A(e),b().myInfo.show(),P(!1)}),c(3,"Hiren Sojitra"),r(),a(4,"a",133),c(5,"More Info"),r()()}o&2&&(m(4),p("routerLink","/about-us"))}var vt=(()=>{class o{constructor(e,t,i,n,s,l,d,g,u,h,_,D,y,k,C,S,j,E,N,T,R){this.route=e,this.titleService=t,this.metaService=i,this.PS=n,this.renderer=s,this.Rect=l,this.Circle=d,this.Ellipse=g,this.commonService=u,this.fb=h,this.platformService=_,this.http=D,this.toastService=y,this.loaderService=k,this.fontService=C,this.elementRef=S,this.baseUrlService=j,this.seoService=E,this.platformId=N,this.transferState=T,this.trackService=R,this.postStatus="loading",this.dataset=[],this.apiData={},this.selectData={},this.selectedIndex=null,this.selectedID=null,this.downloaded=!1,this.canDownload=!1,this.textModalTitle="",this.encodedText=encodeURIComponent(`Hello, Hiren!
I'm interested to create Poster Generate Link`),this.selectedImage="",this.pageLink="",this.imgUrl=ve.MasterApi+"/thumb-images/",this.imgModalTitle="",this.cropperModalTitle="",this.facebookAccessToken=null,this.isInAppBrowser=!1,this.POST_DETAILS_KEY="postDetails",this.inputTextForm=this.fb.group({text:["",q.required]}),this.inputImageForm=this.fb.group({image:[""]}),this.formData=this.fb.group({}),this.baseUrl=this.baseUrlService.getBaseUrl()}ngOnInit(){return x(this,null,function*(){ge(this.platformId)&&(this.detectInAppBrowser(),yield this.seoService.initSEO(),this.transferState.hasKey(this.POST_DETAILS_KEY)&&(this.postDetailsDefault=this.transferState.get(this.POST_DETAILS_KEY,null),this.transferState.remove(this.POST_DETAILS_KEY),this.dataProccessed=!0,yield this.changeMetadataDynamically()),yield this.route.paramMap.subscribe(e=>x(this,null,function*(){if(this.imgParam=e.get("img"),this.imgParam)try{this.postStatus="loading",this.postDetails=void 0,this.postDetailsDefault&&!this.postDetailsDefault.deleted&&this.postDetailsDefault.published?(yield this.getPostById(),this.pageLink=window.location.href):(this.postDetails=this.postDetailsDefault,this.isDeleted=this.postDetailsDefault?.deleted,this.postStatus=this.postDetailsDefault?.deleted?"This image has been deleted":"This image is not published")}catch(t){console.error("Error fetching post:",t),this.postStatus="Error loading image",this.postDetails=void 0,this.dataProccessed=!0}}))),Ve(this.platformId)&&(yield this.seoService.initSEO(),this.route.data.subscribe(e=>x(this,null,function*(){this.titleService.setTitle(e.title||"Poster Download"),this.metaService.updateTag({name:"description",content:e.description||"Discover our web application for generating election campaign posters, festival posts, and other promotional activities. Customize posters with photos, names, addresses, designations, and contact details for efficient and personalized promotional material."}),this.metaService.updateTag({name:"keywords",content:e.keywords||"poster generation, campaign posters, election posters, festival posts, promotional activities, customization, PostNew, web application"}),this.metaService.updateTag({name:"robots",content:e.robots||"index, follow"}),this.metaService.updateTag({property:"og:title",content:e["og:title"]||"Default OG title"}),this.metaService.updateTag({property:"og:description",content:e["og:description"]||"Default OG description"}),this.metaService.updateTag({property:"og:image",content:e["og:image"]||"https://api.postnew.in/api/v1/img/uploads/wLmyK?quality=30"})})),yield this.route.paramMap.subscribe(e=>x(this,null,function*(){if(this.imgParam=e.get("img"),this.imgParam)try{this.postDetailsDefault=yield this.PS.getPostById(this.imgParam.toString()).toPromise(),this.postDetailsDefault&&(yield this.changeMetadataDynamically(),this.transferState.set(this.POST_DETAILS_KEY,this.postDetailsDefault))}catch{this.dataProccessed=!0}}))),yield new Promise(e=>setTimeout(e,1500))})}detectInAppBrowser(){let e=navigator.userAgent||navigator.vendor;/FBAN|FBAV|Instagram|Twitter|Snapchat|WhatsApp|Messenger|Line/i.test(e)&&(this.isInAppBrowser=!0)}openInBrowser(){let t=`intent://${window.location.href.replace(/^https?:\/\//,"")}#Intent;scheme=https;package=com.android.chrome;end;`;window.location.href=t}changeMetadataDynamically(){return x(this,null,function*(){let{title:e="Default Title",info:t="Default Description",backgroundurl:i="https://api.postnew.in/api/v1/img/uploads/defaultImage",id:n="defaultID"}=this.postDetailsDefault||{},s="Hiren Sojitra",l="PostNew",d="@Sojitra_Hiren",g=`${this.imgUrl}${n}`,u=`https://www.postnew.in/poster/${n}`,h="en_US";this.titleService.setTitle(e),this.metaService.updateTag({name:"description",content:t}),this.metaService.updateTag({property:"og:title",content:e}),this.metaService.updateTag({property:"og:description",content:t}),this.metaService.updateTag({property:"og:image",content:g}),this.metaService.updateTag({property:"og:url",content:u}),this.metaService.updateTag({property:"og:type",content:"poster"}),this.metaService.updateTag({property:"og:site_name",content:l}),this.metaService.updateTag({property:"og:locale",content:h}),this.metaService.updateTag({property:"article:author",content:s}),this.metaService.updateTag({property:"twitter:card",content:"summary_large_image"}),this.metaService.updateTag({property:"twitter:url",content:u}),this.metaService.updateTag({property:"twitter:title",content:e}),this.metaService.updateTag({property:"twitter:description",content:t}),this.metaService.updateTag({property:"twitter:image",content:g}),this.metaService.updateTag({property:"twitter:site",content:d}),this.metaService.updateTag({property:"twitter:creator",content:d}),this.metaService.updateTag({rel:"canonical",href:u})})}getPostById(){return x(this,null,function*(){let e=this.postDetailsDefault;if(e){try{this.postDetails=e;let t=JSON.parse(JSON.stringify(e));if(this.isDeleted=e.deleted,e.deleted)e.deleted&&e.msg&&(this.postStatus=e.msg);else{this.postStatus="loading";try{let i=yield this.getImageDataUrl(e.backgroundurl);e.backgroundurl=i}catch(i){console.error("Error fetching background image URL:",i)}for(let i of e.data)if(i.image&&i.image.imageUrl)try{i.image.imageUrl=yield this.getImageDataUrl(i.image.imageUrl)}catch(n){console.error("Error fetching image URL:",n)}this.postDetails.download_counter?this.postStatus="Total Download: "+this.postDetails.download_counter:this.postStatus="No download counter available",this.initialize()}this.dataProccessed=!0}catch(t){console.error("Error in getPostById:",t),this.postStatus="Error loading post"}this.textModal=new bootstrap.Modal(document.getElementById("textModal"),{focus:!1,keyboard:!1,static:!1}),this.textModal._element.addEventListener("hide.bs.modal",()=>{this.inputTextForm.reset()}),this.textModal._element.addEventListener("show.bs.modal",()=>{}),this.textModal._element.addEventListener("shown.bs.modal",()=>{this.textInput.nativeElement.focus()}),this.myInfo=new bootstrap.Modal(document.getElementById("myInfo"),{focus:!1,keyboard:!1,static:!1}),this.cropperModal=new bootstrap.Modal(document.getElementById("cropperModal"),{focus:!1,keyboard:!1,static:!1}),this.cropperModal._element.addEventListener("hide.bs.modal",()=>{this.cropper&&this.cropper.destroy()}),this.cropperModal._element.addEventListener("show.bs.modal",()=>{}),this.imageCropper=new bootstrap.Modal(document.getElementById("imageCropper"),{focus:!1,keyboard:!1,static:!1}),this.imageCropper._element.addEventListener("hide.bs.modal",()=>{this.cropper&&this.cropper.destroy()}),this.imageCropper._element.addEventListener("show.bs.modal",()=>{})}})}getImageDataUrl(e){return x(this,null,function*(){try{let i=yield(yield fetch(e)).blob();return new Promise((n,s)=>{let l=new FileReader;l.onloadend=()=>n(l.result),l.onerror=s,l.readAsDataURL(i)})}catch(t){throw console.error("Error fetching or converting image:",t),t}})}initialize(){return x(this,null,function*(){try{yield Promise.all([this.drawSVG(),this.buildForm()])}catch(e){console.error("An error occurred during initialization:",e)}})}drawSVG(){return x(this,null,function*(){if(this.postDetails){let e=this.postDetails.backgroundurl,t=this.imageDraw.nativeElement,i=document.createElementNS("http://www.w3.org/2000/svg","defs");for(;t.firstChild;)t.removeChild(t.firstChild);let n=document.createElementNS("http://www.w3.org/2000/svg","link");n.setAttribute("rel","stylesheet"),n.setAttribute("href","https://fonts.googleapis.com/css2?family=Anek+Gujarati:wght@100..800&family=Baloo+Bhai+2:wght@400..800&family=Farsan&family=Hind+Vadodara:wght@300;400;500;600;700&family=Kumar+One&family=Kumar+One+Outline&family=Mogra&family=Mukta+Vaani:wght@200;300;400;500;600;700;800&family=Noto+Sans+Gujarati:wght@100..900&family=Noto+Serif+Gujarati:wght@100..900&family=Rasa:ital,wght@0,300..700;1,300..700&family=Shrikhand&display=swap"),i.appendChild(n),t.appendChild(i),this.renderer.setAttribute(t,"viewBox","0 0 "+(this.postDetails.w||0)+" "+(this.postDetails.h||0));let s=this.renderer.createElement("image","http://www.w3.org/2000/svg");this.renderer.setAttribute(s,"x","0"),this.renderer.setAttribute(s,"y","0"),this.renderer.setAttribute(s,"width","100%"),this.renderer.setAttribute(s,"height","100%"),this.renderer.setAttribute(s,"preserveAspectRatio","xMidYMid slice"),this.renderer.setAttribute(s,"href",e),this.renderer.appendChild(t,i),this.renderer.appendChild(t,s);let l=0;this.postDetails?.data.forEach((d,g)=>x(this,null,function*(){let u=d.editable&&this.dataset[l]?.id||Math.random().toString(36).substr(2,9);switch(!0){case!!d.text:if(d.text){let h=this.renderer.createElement("text","http://www.w3.org/2000/svg"),{x:_,y:D,fs:y,fw:k,text:C,type:S,controlName:j,api:E,lang:N,dependency:T,color:R,fontStyle:J,rotate:v,fontFamily:K,textShadow:U,backgroundColor:z,textEffects:W,textAnchor:X,alignmentBaseline:we,letterSpacing:re,lineHeight:te,textTransformation:wt,originX:xt,originY:_t,opacity:Se}=d.text;if(C){let L=this.textFormat(C);if(d.editable&&this.renderer.setStyle(h,"pointer-events","none"),L.length===1){let $=this.renderer.createText(C);j&&N&&S&&S=="select"&&(this.selectData[j]={lang:N,value:C,api:E,dependency:T||"none",text:$}),this.renderer.appendChild(h,$)}else{let $=y*te||0,Z=0;switch(X){case"middle":Z=L.reduce((Y,O)=>Y+this.getTextWidth(O,y,K),0)/2;break;case"end":Z=L.reduce((Y,O)=>{let Ie=this.getTextWidth(O,y,K);return Ie>Y?Ie:Y},0);break}L.forEach((ie,Y)=>{let O=this.renderer.createElement("tspan","http://www.w3.org/2000/svg");switch(this.renderer.appendChild(O,this.renderer.createText(ie)),(Y>0||Y===0&&ie.trim()==="")&&this.renderer.setAttribute(O,"dy",`${$}px`),this.renderer.setAttribute(O,"x",_.toString()),X){case"middle":this.renderer.setAttribute(O,"dx",`-${Z}px`);break;case"end":this.renderer.setAttribute(O,"dx",`-${Z}px`);break}this.renderer.appendChild(h,O)})}}let xe={"data-type":"text",x:_.toString(),y:D.toString(),"font-size":y.toString(),fill:R||"#000000","text-anchor":X||"start","alignment-baseline":we||"middle","dominant-baseline":"reset-size","font-family":K?"'"+K+"', sans-serif":"'Hind Vadodara', sans-serif","font-weight":k||"normal","text-decoration":J.underline?"underline":"none","font-style":J.italic?"italic":"normal",opacity:Se?Se.toString():"100"};z&&(xe["background-color"]=z);let yt={"-webkit-user-select":"none","letter-spacing":re?`${re}px`:"normal","line-height":te?`${te}`:"normal","text-transform":wt||"none"};if(U.enable&&(xe.filter=`drop-shadow(${U.offsetX}px ${U.offsetY}px ${U.blur}px ${U.color})`||"none"),Object.entries(xe).forEach(([L,$])=>this.renderer.setAttribute(h,L,$)),Object.entries(yt).forEach(([L,$])=>this.renderer.setStyle(h,L,$)),this.renderer.setAttribute(h,"data-id",u),v||xt!==void 0&&_t!==void 0){let L=h.getBBox(),$=L.width,Z=L.height,ie=`rotate(${v||0} ${_+$/2} ${D+Z/2})`;this.renderer.setAttribute(h,"transform",ie)}this.dataset[l]==null&&d.editable&&this.dataset.push({id:u,lang:N||"en",value:C||"Select "+d.title,index:g.toString(),type:S,title:d.title,controlName:j,api:E,dependency:T}),this.renderer.appendChild(t,h),this.renderer.addClass(h,"pointer-events-none"),d.editable&&this.renderer.listen(h,"click",()=>{this.selectedIndex=g,this.selectedID=u,this.setText()}),d.editable&&l++}break;case!!d.rect:if(d.rect){let h=this.Rect.createRect(d.rect);return this.renderer.appendChild(t,h),h}break;case!!d.circle:if(d.circle){let h=this.Circle.createCircle(d.circle);return this.renderer.appendChild(t,h),h}break;case!!d.ellipse:if(d.ellipse){let h=this.Ellipse.createEllipse(d.ellipse);return this.renderer.appendChild(t,h),h}break;case!!d.image:if(d.image){let{x:h,y:_,r:D,imageUrl:y,borderColor:k,borderWidth:C,shape:S,origin:j,placeholder:E,svgProperties:N,rotate:T}=d.image,{w:R,h:J}=this.commonService.calculateWH(d.image),v;switch(S){case"circle":v=this.renderer.createElement("circle","http://www.w3.org/2000/svg"),this.renderer.setAttribute(v,"cx",String(h)),this.renderer.setAttribute(v,"cy",String(_)),this.renderer.setAttribute(v,"r",String(D)),this.renderer.setAttribute(v,"data-type","circle");break;case"ellipse":v=this.renderer.createElement("ellipse","http://www.w3.org/2000/svg"),this.renderer.setAttribute(v,"cx",String(h)),this.renderer.setAttribute(v,"cy",String(_)),this.renderer.setAttribute(v,"rx",String(D)),this.renderer.setAttribute(v,"ry",String(D)),this.renderer.setAttribute(v,"data-type","ellipse");break;case"rect":case"rect_3_2":case"rect_4_3":case"rect_16_9":case"rect_1_1":case"rect_5_4":case"rect_3_1":case"rect_7_5":case"rect_2_3":case"rect_3_4":case"rect_9_16":case"rect_4_5":case"rect_5_7":v=this.renderer.createElement("rect","http://www.w3.org/2000/svg"),this.renderer.setAttribute(v,"x",String(h)),this.renderer.setAttribute(v,"y",String(_)),this.renderer.setAttribute(v,"width",String(R)),this.renderer.setAttribute(v,"height",String(J)),this.renderer.setAttribute(v,"data-type","rect"),this.renderer.setAttribute(v,"fill","#FFF");break;default:return console.error("Invalid shape"),null}if(v!==null){let K=u;this.renderer.addClass(v,"pointer-events-none"),this.renderer.setAttribute(v,"fill","url(#"+K+")"),d.editable&&this.renderer.setStyle(v,"pointer-events","none"),this.renderer.setStyle(v,"filter","url(#shadow)");let U=this.renderer.createElement("pattern","http://www.w3.org/2000/svg");this.renderer.setAttribute(U,"id",K),this.renderer.setAttribute(U,"x","0"),this.renderer.setAttribute(U,"y","0"),this.renderer.setAttribute(U,"height","100%"),this.renderer.setAttribute(U,"width","100%"),this.renderer.setAttribute(U,"viewBox","0 0 "+String(R)+" "+String(J)),this.renderer.setAttribute(v,"data-id",u),this.dataset[l]==null&&d.editable&&this.dataset.push({id:u,value:"",index:g.toString(),type:"image",title:d.title}),d.editable&&this.renderer.listen(v,"click",()=>{this.selectedIndex=g,this.selectedID=u,this.setImage()});let z=this.renderer.createElement("image","http://www.w3.org/2000/svg");this.renderer.setAttribute(z,"x","0"),this.renderer.setAttribute(z,"y","0"),this.renderer.setAttribute(z,"width",String(R)),this.renderer.setAttribute(z,"height",String(J)),this.renderer.setAttribute(z,"href",y);let W=this.renderer.createElement("rect","http://www.w3.org/2000/svg");if(this.renderer.setAttribute(W,"x","0"),this.renderer.setAttribute(W,"y","0"),this.renderer.setAttribute(W,"width",String(R)),this.renderer.setAttribute(W,"height",String(J)),this.renderer.setAttribute(W,"fill","#FFFFFF"),d.editable&&this.renderer.appendChild(U,W),this.renderer.appendChild(U,z),this.renderer.appendChild(t,U),C&&k&&(this.renderer.setAttribute(v,"stroke",k),this.renderer.setAttribute(v,"stroke-width",String(C))),this.renderer.appendChild(t,v),T||h!==void 0&&_!==void 0){let X=v.getBBox(),we=X.width,re=X.height,te=`rotate(${T||0} ${h+we/2} ${_+re/2})`;this.renderer.setAttribute(v,"transform",te)}return d.editable&&l++,v}}break;default:console.log("Element data not found");break}}))}this.downloaded=!1,this.canDownload=!1,this.formData.reset({},{emitEvent:!1});for(let e in this.selectData){let t=this.selectData[e];t.dependency==="none"?yield this.loadData(e,t.api):yield this.setupDependency(e,t);let i=this.apiData[e].filter(n=>n.id==t.value);i.length&&this.renderer.setValue(t.text,i[0][t.lang=="gu"?"gu_name":"name"])}})}buildForm(){return x(this,null,function*(){Object.keys(this.formData.controls).forEach(t=>{this.formData.get(t)&&this.formData.removeControl(t)});let e={};this.dataset.forEach(t=>{let i=parseInt(t.index,10);if(!isNaN(i)&&this.postDetails?.data){if(t.type==="text"||t.type==="date"){let n=this.postDetails.data.filter((s,l)=>l===i)[0]?.text;n&&(this.formData.addControl(t.id,this.fb.control("",q.required)),this.formData.get(t.id)?.valueChanges.subscribe(s=>{n.text=s,t.value=s}))}else if(t.type==="select"){let n=this.postDetails.data.filter((s,l)=>l===i)[0]?.text;if(n){let s=this.formData.addControl(t.id,this.fb.control(t.value,q.required));this.formData.get(t.id)?.valueChanges.subscribe(l=>{n.text=l,t.value=l}),t.dependency&&t.controlName&&t.api&&(e[t.controlName]={title:t.title,control:this.formData.get(t.id),api:t.api,dependency:t.dependency})}}else if(t.type==="image"){let n=this.postDetails.data.filter((s,l)=>l===i)[0]?.image;n&&(this.formData.addControl(t.id,this.fb.control("",q.required)),this.formData.addControl(t.id+"-file",this.fb.control("",q.required)),this.formData.get(t.id)?.valueChanges.subscribe(s=>{n.imageUrl=s,t.value=s}))}}});for(let t in e){let i=e[t];e[t].dependency!=="none"&&e[t].dependency in e&&e[e[t].dependency].control?e[e[t].dependency].control.valueChanges.subscribe(n=>x(this,null,function*(){if(n){let s=`${i.api}${n}`;yield this.fetchDataFromAPI(s,t)}})):console.warn(`Dependency "${e[t].dependency}" for "${t}" is invalid or not found.`)}this.postDetails&&this.postDetails.track&&this.formData.addControl("mobile",new Je("",[q.required,q.pattern(/^\+?[0-9]{10,15}$/)]))})}textFormat(e){let i=e.replace(/\n/g,`
`).replace(/\n(?!\*{3})/g,`***
`).split(`
`);for(let n=0;n<i.length;n++)i[n]=i[n].replace(/\*\*\*/g,"\xA0");return i}getTextWidth(e,t,i){let n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("font-size",`${t}px`),n.setAttribute("font-family","fontFamily"),n.textContent=e,document.body.appendChild(n);let s=n.getBBox().width;return document.body.removeChild(n),s}setText(){this.inputTextForm.reset();let e=this.selectedIndex;if(e!==null){let t=this.postDetails?.data[e].text?.text,i=this.postDetailsDefault?.data[e].text?.text,n=t==i?"":t;this.inputTextForm.get("text")?.setValue(n),this.textInput.nativeElement.placeholder=i,this.textModalTitle=this.postDetails?.data[e].title||void 0,this.textModal.show()}}setImage(){this.inputImageForm.reset();let e=this.selectedIndex;if(e!==null){let t=this.postDetails?.data[e].image?.imageUrl,i=this.postDetailsDefault?.data[e].image?.imageUrl,n=t==i?i:t;this.inputImageForm.get("image")?.setValue(n),this.cropperModalTitle=this.postDetails?.data[e].title||void 0,this.cropperModal.show()}}loadData(e,t){return x(this,null,function*(){this.apiData[e]||(yield this.fetchDataFromAPI(t,e))})}setupDependency(e,t){return x(this,null,function*(){t.api.endsWith("/")||(t.api+="/");let i=t.dependency,n=this.selectData[i].value,s=`${t.api}${n}`;yield this.fetchDataFromAPI(s,e)})}fetchDataFromAPI(e,t){return x(this,null,function*(){try{let i=this.getIdByControlName(t),n=yield this.http.get(e).toPromise();t&&n?this.apiData[t]=n:this.apiData[t]=[]}catch(i){console.error("Error fetching data from API:",i)}})}onSubmitFormData(){return x(this,null,function*(){if(this.commonService.markFormGroupTouched(this.formData),this.formData.valid){this.dataset.forEach(t=>{let i=parseInt(t.index,10);if(!isNaN(i)&&this.postDetails?.data){if(t.type==="text"){let n=this.postDetails.data.filter((s,l)=>l===i)[0]?.text;n&&(n.text=t.value,this.canDownload=!1)}else if(t.type==="image"){let n=this.postDetails.data.filter((s,l)=>l===i)[0]?.image;n&&(n.imageUrl=t.value,this.canDownload=!1)}}});let e=ee({},this.formData.value);this.dataset.forEach(t=>{delete e[t.id],delete e[t.id+"-file"],t.type==="image"||t.id&&t.id.endsWith("-file")||(e[t.title]=t.value)}),console.log(e),yield De(this.trackService.saveData(e,this.imgParam)),yield this.drawSVG(),this.canDownload=!0,this.formData.reset({},{emitEvent:!1})}})}onFileChange(e,t,i){let n=parseInt(i,10);if(e.target.files.length>0){let s=e.target.files[0],l=s.type;if(l.startsWith("image/"))if(l==="image/jpeg"||l==="image/png"||l==="image/gif"||l==="image/bmp"||l==="image/webp"||l==="image/svg+xml"||l==="image/tiff"){let d=new FileReader;d.onload=g=>{let u=g.target?.result;this.imageCropper.show();let h=this.postDetails?.data[n].image,_=320,D=320,y=320,k=320;if(this.postDetails?.data[n].image){let S=this.commonService.calculateWH(h);D=S.w,_=S.h}let C=document.getElementById("imageToCropped");this.cropper=new Cropper(C,{scalable:!0,viewMode:3,crop:S=>{},autoCropArea:1,dragMode:"move",responsive:!0,cropBoxResizable:!1,minCropBoxWidth:k,minCropBoxHeight:y,minContainerWidth:320,minContainerHeight:320,aspectRatio:D/_}),this.cropper.replace(u),this.selectedImage=t},d.readAsDataURL(s)}else this.toastService.show("Please select image type.",{class:"bg-danger",title:"Invalid Image Type"});else this.toastService.show("Please select valid file format.",{class:"bg-danger",title:"Invalid File Format"})}}resetForm(){this.canDownload=!1,this.formData.reset({},{emitEvent:!1})}checkDownload(e){return x(this,null,function*(){let t=`${this.baseUrl}poster/${this.postDetails?.id}`,i=this.postDetails?.title.trim(),n=this.postDetails?.info.trim();switch(e){case"download":this.capturePhoto();break;case"whatsapp":let s=`*${t}*

*${i}*
*_${n}_*

\u0AAA\u0ACB\u0AB8\u0ACD\u0A9F\u0AB0 \u0AAC\u0AA8\u0ABE\u0AB5\u0AB5\u0ABE \u0A89\u0AAA\u0AB0\u0AA8\u0AC0 \u0AB2\u0ABF\u0A82\u0A95 \u0A95\u0ACD\u0AB2\u0ABF\u0A95 \u0A95\u0AB0\u0ACB
\u0A85\u0AA8\u0ACD\u0AAF \u0AB8\u0AAC\u0A82\u0AA7\u0ABF\u0AA4 \u0AB5\u0ACD\u0AAF\u0A95\u0ACD\u0AA4\u0ABF \u0AA8\u0AC7 \u0AAA\u0AA3 \u0AB6\u0AC7\u0AB0 \u0A95\u0AB0\u0ACB.`;window.location.href=`whatsapp://send?text=${encodeURIComponent(s)}`;break;case"facebook":let l=this.postDetails?.title+" "+this.postDetails?.info,d=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}&quote=${encodeURIComponent(l)}`;window.open(d,"_blank");break;default:this.capturePhoto();break}return!0})}capturePhoto(e){return x(this,null,function*(){this.loaderService.show(0);let t=this.imageDraw.nativeElement,n=(t.getAttribute("viewBox")||"").split(" ").map(Number),s=n[2],l=n[3],d=document.createElement("canvas"),g=d.getContext("2d");d.width=s,d.height=l;let u=new Image,h=new XMLSerializer,_=this.getFontStylesFromSVG(t);yield this.loadFonts(_);let D=h.serializeToString(t);u.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(D))),u.onload=()=>x(this,null,function*(){g?.drawImage(u,0,0);let y=d.toDataURL("image/png"),C=`IMG-${new Date().toISOString().replace(/:/g,"-")}.png`,S=document.createElement("a");S.href=y,this.finalImage=y,S.download=C,S.target="_top";let j=t.querySelectorAll("text");g&&j.forEach(E=>{let N=E.getAttribute("font-family")||"Arial",T=parseFloat(E.getAttribute("font-size")||"16");g.font=`${T}px ${N}`}),this.downloaded=!0,S.target="_blank",document.body.appendChild(S),S.click(),yield this.PS.updateDownloadCounter(this.imgParam).subscribe(E=>{if(E){let N=JSON.parse(JSON.stringify(E));this.postStatus="Total Download: "+E.download_counter,this.resetForm()}document.body.removeChild(S)},E=>{document.body.removeChild(S),this.postStatus=void 0,console.error("Error fetching post:",E)}),this.loaderService.hide()})})}facebookPhoto(){return x(this,null,function*(){if(!this.facebookAccessToken){this.loginWithFacebook();return}this.loaderService.show(0);let e=this.imageDraw.nativeElement,i=(e.getAttribute("viewBox")||"").split(" ").map(Number),n=i[2],s=i[3],l=document.createElement("canvas"),d=l.getContext("2d");l.width=n,l.height=s;let g=new Image,u=new XMLSerializer,h=this.getFontStylesFromSVG(e);yield this.loadFonts(h);let _=u.serializeToString(e);g.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(_))),g.onload=()=>x(this,null,function*(){d?.drawImage(g,0,0);let D=l.toDataURL("image/png"),k=`IMG-${new Date().toISOString().replace(/:/g,"-")}.png`,C=document.createElement("a");C.href=D,this.finalImage=D,C.download=k;let S=e.querySelectorAll("text");d&&S.forEach(N=>{let T=N.getAttribute("font-family")||"Arial",R=parseFloat(N.getAttribute("font-size")||"16");d.font=`${R}px ${T}`}),this.downloaded=!0;let j=this.dataURLtoBlob(this.finalImage),E=new FormData;E.append("access_token",this.facebookAccessToken),E.append("message",this.postDetails.info),E.append("source",j,"image.png"),yield this.http.post("https://graph.facebook.com/v14.0/me/photos",E).subscribe(N=>x(this,null,function*(){yield this.PS.updateDownloadCounter(this.imgParam).subscribe(T=>{if(T){let R=JSON.parse(JSON.stringify(T));this.postStatus="Total Download: "+T.download_counter,this.resetForm(),this.facebookAccessToken=null}},T=>{this.postStatus=void 0,console.error("Error fetching post:",T)}),console.log("Successfully posted to Facebook:",N),this.postStatus="Image posted successfully to Facebook!"}),N=>{console.error("Error posting to Facebook:",N),this.postStatus="Failed to post image to Facebook."}),this.loaderService.hide()})})}loginWithFacebook(){FB.login(e=>{e.authResponse?(this.facebookAccessToken=e.authResponse.accessToken,console.log("Facebook Access Token:",this.facebookAccessToken)):console.error("User cancelled login or did not fully authorize.")},{scope:"public_profile,email"})}dataURLtoBlob(e){let[t,i]=e.split(","),n=t.match(/:(.*?);/)[1],s=atob(i),l=[];for(let d=0;d<s.length;d++)l.push(s.charCodeAt(d));return new Blob([new Uint8Array(l)],{type:n})}getFontStylesFromSVG(e){let t=e.querySelectorAll("text"),i={};return t.forEach(n=>{let s=n.getAttribute("font-family"),l=n.getAttribute("font-weight")||"normal";if(s){let d=s.split(",")[0].replace(/['"]/g,"").trim();i[d]||(i[d]=new Set),i[d].add(l)}}),i}loadFonts(e){return x(this,null,function*(){let t=this.imageDraw.nativeElement,i=t.querySelector("defs")||t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","defs")),n=i.querySelector("style");n||(n=document.createElementNS("http://www.w3.org/2000/svg","style"),i.appendChild(n));let s=new Set;for(let[l,d]of Object.entries(e))for(let g of d){let u=this.fontService.getFontPath(l,g),h=yield this.loadFontAsBase64(`assets/fonts/${u}.ttf`),_=`@font-face {
          font-family: '${l}';
          font-style: normal;
          font-weight: ${g};
          font-stretch: 100%;
          font-display: swap;
          src: url(data:font/truetype;base64,${h}) format('truetype');
        }`;s.has(_)||(n.textContent+=_,s.add(_))}})}loadFontAsBase64(e){return x(this,null,function*(){let i=yield(yield fetch(e)).arrayBuffer();return btoa(new Uint8Array(i).reduce((n,s)=>n+String.fromCharCode(s),""))})}shareOnFacebook(){return x(this,null,function*(){this.loaderService.show(0);let e=this.imageDraw.nativeElement,i=(e.getAttribute("viewBox")||"").split(" ").map(Number),n=i[2],s=i[3],l=document.createElement("canvas"),d=l.getContext("2d");l.width=n,l.height=s;let g=new Image,u=new XMLSerializer,h=this.getFontStylesFromSVG(e);yield this.loadFonts(h);let _=u.serializeToString(e);g.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(_))),g.onload=()=>x(this,null,function*(){d?.drawImage(g,0,0);let D=l.toDataURL("image/png");this.finalImage=D,this.PS.updateDownloadCounter(this.imgParam).subscribe(y=>{y&&(this.postStatus="Total Download: "+y.download_counter,this.resetForm())},y=>{this.postStatus=void 0,console.error("Error fetching post:",y)}),this.loaderService.hide(),window.FB.ui({method:"feed",link:this.pageLink,picture:this.finalImage,name:"Check out my Poster",caption:"My Poster Creation",description:"I created this poster with awesome features. Take a look!"},y=>{y&&!y.error_message?console.log("Posted successfully."):console.error("Error while posting:",y.error_message)})})})}onTextSubmit(){return x(this,null,function*(){this.selectedIndex!==null&&this.postDetails?.data&&(this.postDetails.data=this.postDetails.data.map((e,t)=>{if(t===this.selectedIndex&&e.text){let i=this.inputTextForm.get("text")?.value;if(this.selectedID&&this.elementRef.nativeElement.querySelector(`[data-id="${this.selectedID}"]`)){let s=this.dataset.filter(l=>l.id===this.selectedID);s[0]&&(s[0].value=i||e.text.text)}return ne(ee({},e),{text:ne(ee({},e.text),{text:i})})}return e})),yield this.drawSVG(),this.textModal.hide()})}handleImageInputChange(e){let i=e.target.files?.[0];if(i){let n=i.type;if(n.startsWith("image/"))if(n==="image/jpeg"||n==="image/png"||n==="image/gif"||n==="image/bmp"||n==="image/webp"||n==="image/svg+xml"||n==="image/tiff"){let s=new FileReader;s.onload=l=>{let d=l.target?.result,g=this.dataset.find(k=>k.id===this.selectedImage),u=320,h=320,_=320,D=320;if(g){let k=parseInt(g.index,10);if(this.postDetails?.data[k].image){let C=this.commonService.calculateWH(this.postDetails?.data[k].image);u=C.w,h=C.h}}this.cropperModal.show();let y=document.getElementById("cropper");this.cropper=new Cropper(y,{scalable:!0,viewMode:3,crop:k=>{},autoCropArea:1,dragMode:"move",responsive:!0,cropBoxResizable:!1,minCropBoxWidth:_,minCropBoxHeight:D,minContainerWidth:320,minContainerHeight:320,aspectRatio:u/h}),this.cropper.replace(d)},s.readAsDataURL(i)}else this.toastService.show("Please select image type.",{class:"bg-danger",title:"Invalid Image Type"});else this.toastService.show("Please select valid file format.",{class:"bg-danger",title:"Invalid File Format"})}i&&(i.type==="image/jpeg"||i.type)}onImageSubmit(){return x(this,null,function*(){this.handleCropEvent(),this.selectedIndex!==null&&this.postDetails?.data&&(this.postDetails.data=this.postDetails.data.map((e,t)=>{if(t===this.selectedIndex&&e.image){let i=this.inputImageForm.get("image")?.value;if(this.selectedID&&this.elementRef.nativeElement.querySelector(`[data-id="${this.selectedID}"]`)){let s=this.dataset.filter(l=>l.id===this.selectedID);s[0]&&(s[0].value=i||e.image.imageUrl)}return ne(ee({},e),{image:ne(ee({},e.image),{imageUrl:i})})}return e})),yield this.drawSVG(),this.cropperModal.hide()})}handleCropEvent(){if(this.cropper){let e=this.dataset.find(g=>g.id===this.selectedImage),t=800,i=800;if(e){let g=parseInt(e.index,10);if(this.postDetails?.data[g].image){let u=this.commonService.calculateWH(this.postDetails?.data[g].image);t=u.w,i=u.h}}let n=this.cropper.getCroppedCanvas(),s=document.createElement("canvas"),l=s.getContext("2d");s.width=t,s.height=i,l.drawImage(n,0,0,t,i);let d=s.toDataURL("image/png");this.inputImageForm.get("image")?.setValue(d)}}openImageCropperDialog(){let e=this.imageInput.nativeElement;e&&(e.click(),e.value=null),this.cropperModal.hide()}handleSelectedEvent(){if(this.cropper){let e=this.dataset.find(g=>g.id===this.selectedImage),t=800,i=800;if(e){let g=parseInt(e.index,10);if(this.postDetails?.data[g].image){let u=this.commonService.calculateWH(this.postDetails?.data[g].image);t=u.w,i=u.h}}let n=this.cropper.getCroppedCanvas(),s=document.createElement("canvas"),l=s.getContext("2d");s.width=t,s.height=i,l.drawImage(n,0,0,t,i);let d=s.toDataURL("image/png");if(e){let g=parseInt(e.index,10);!isNaN(g)&&this.postDetails?.data&&(this.formData.get(this.selectedImage)?.setValue(d),this.imageCropper.hide())}}}getIdByControlName(e){let t=this.dataset.find(i=>i.controlName===e);return t?t.id:null}static{this.\u0275fac=function(t){return new(t||o)(I($e),I(Le),I(Re),I(We),I(Ae),I(rt),I(st),I(lt),I(mt),I(tt),I(ze),I(ue),I(dt),I(pt),I(at),I(Te),I(ft),I(ht),I(de),I(je),I(gt))}}static{this.\u0275cmp=Ce({type:o,selectors:[["app-poster"]],viewQuery:function(t,i){if(t&1&&(pe(Ct,5),pe(Et,5),pe(kt,5)),t&2){let n;he(n=fe())&&(i.imageDraw=n.first),he(n=fe())&&(i.textInput=n.first),he(n=fe())&&(i.imageInput=n.first)}},decls:94,vars:12,consts:[["textInput",""],["imageInput",""],["imageDraw",""],[1,"h-100-vh","d-flex","flex-column"],[1,"d-flex","align-items-center","justify-content-center"],[1,"max-w-100","my-3",3,"routerLink"],["src","assets/images/svg/logo-large.svg","alt","PostNew.in",1,"max-w-300-px","w-100"],["class","flex-grow-1 overflow-auto align-items-center d-flex flex-column justify-content-center",4,"ngIf"],["class","flex-grow-1 overflow-auto align-items-center",4,"ngIf"],["class","flex-grow-1 overflow-auto",4,"ngIf"],[1,"bg-dark","border-top","p-1","text-white"],["class","w-100 mx-auto d-flex align-items-center justify-content-center",4,"ngIf"],["id","textModal","tabindex","-1","aria-labelledby","textModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","textModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","bg-dark"],[3,"ngSubmit","formGroup"],["type","text","formControlName","text",1,"form-control","form-control-lg","fw-bold"],[1,"d-flex","mt-4"],["type","submit",1,"btn","btn-primary","mx-auto",3,"disabled"],[1,"fa","fa-save"],["id","cropperModal","tabindex","-1","aria-labelledby","cropperModalLabel","aria-hidden","true",1,"modal","fade"],["id","cropperModalLabel",1,"modal-title"],[1,"modal-body"],["id","cropper","alt","Crop",1,"w-100",3,"src"],["type","file",2,"display","none",3,"change"],["type","hidden","formControlName","image"],["type","button",1,"btn","btn-success","mx-auto",3,"click"],[1,"fa","fa-refresh"],[1,"btn","btn-primary","mx-auto",3,"disabled"],["id","imageCropper","tabindex","-1","aria-labelledby","imageCropperLabel","aria-hidden","true",1,"modal","fade"],["id","imageCropperLabel",1,"modal-title"],["id","imageToCropped","alt","Crop",1,"w-100",3,"src"],[1,"modal-footer"],[1,"btn","btn-danger","ms-3",3,"click"],[1,"fa","fa-close"],["type","button",1,"btn","btn-success","ms-3",3,"click"],["id","myInfo","tabindex","-1","aria-labelledby","myInfoLabel","aria-hidden","true",1,"modal","fade"],["id","myInfoLabel",1,"modal-title"],[1,"mb-3"],["for","email",1,"form-label"],["href","mailto:hirensojitra007@gmail.com",1,"form-control","text-decoration-none","fw-bold"],["for","mobile",1,"form-label"],["href","tel:+919429558759",1,"form-control","text-decoration-none","fw-bold"],["for","social",1,"form-label"],["href","http://www.facebook.com/SOJITRAHIREN","target","_blank",1,"btn","btn-primary","m-2","text-decoration-none"],[1,"fa","fa-facebook","me-2"],["href","http://www.instagram.com/HIREN_SOJITRA","target","_blank",1,"btn","btn-danger","m-2","text-decoration-none"],[1,"fa","fa-instagram","me-2"],["href","http://www.twitter.com/SOJITRA_HIREN","target","_blank",1,"btn","btn-dark","m-2","text-decoration-none"],[1,"fa","fa-twitter","me-2"],[1,"flex-grow-1","overflow-auto","align-items-center","d-flex","flex-column","justify-content-center"],["src","./assets/images/svg/no-post.svg",1,"max-w-100","max-h-100","rounded-4"],[1,"btn","btn-danger","m-3",3,"routerLink"],[1,"fa","fa-home","me-3"],[1,"flex-grow-1","overflow-auto","align-items-center"],["class","container mt-4",4,"ngIf"],[1,"container","mt-4"],["class","px-3",4,"ngIf"],["class","w-100",3,"src","alt",4,"ngIf"],[1,"btn","btn-success","btn-lg","mt-3","mx-auto","d-block",3,"click"],[1,"fa","fa-download","me-2"],[1,"alert","alert-secondary","text-center","p-4","my-4"],[1,"text-danger"],[1,"bi","bi-exclamation-triangle"],[1,"mt-2"],[1,"mt-3"],[1,"list-group","list-group-flush","text-start","mx-auto","w-75"],[1,"list-group-item"],[1,"px-3"],["class","text-center my-4 fw-b h5",4,"ngIf"],["class","text-center mb-4 lh-base h6",4,"ngIf"],[4,"ngIf"],[1,"text-center","my-4","fw-b","h5"],[1,"text-center","mb-4","lh-base","h6"],[1,"text-center","mb-4"],[1,"w-100",3,"src","alt"],[1,"flex-grow-1","overflow-auto"],[1,"container","p-0"],[1,"row","g-0"],[1,"col-md-6","col-lg-3","mx-auto","text-center"],[1,"max-w-100","max-h-100","border",3,"ngClass"],["class","w-100",3,"src","alt","ngClass",4,"ngIf"],[1,"d-flex","justify-content-center","mt-3"],["class","btn btn-success btn-md mx-2","href","https://whatsapp.com/channel/0029VaePspU1iUxd0HOsMA1d","target","_blank",4,"ngIf"],["class","btn btn-primary btn-md mx-2","href","https://www.facebook.com/profile.php?id=61574918183049","target","_blank",4,"ngIf"],[1,"container","mt-3"],["class","row g-3",3,"formGroup","ngSubmit",4,"ngIf"],[1,"container"],["class","row g-2",4,"ngIf"],[1,"w-100",3,"src","alt","ngClass"],["href","https://whatsapp.com/channel/0029VaePspU1iUxd0HOsMA1d","target","_blank",1,"btn","btn-success","btn-md","mx-2"],[1,"fa","fa-whatsapp","me-2"],["href","https://www.facebook.com/profile.php?id=61574918183049","target","_blank",1,"btn","btn-primary","btn-md","mx-2"],[1,"row","g-3",3,"ngSubmit","formGroup"],["class","form-group col-lg-4 offset-lg-4  col-sm-8 offset-sm-2 col-12 offset-0 position-relative",4,"ngFor","ngForOf"],["class","form-group col-lg-4 offset-lg-4 col-sm-8 offset-sm-2 col-12 position-relative",4,"ngIf"],[1,"col-lg-4","offset-lg-4","col-sm-8","offset-sm-2","col-12","offset-0"],[1,"my-2"],[1,"col-lg-4","offset-lg-4","col-sm-8","offset-sm-2","col-12","offset-0","d-flex"],["type","submit",1,"btn","btn-primary","btn-md","w-100","me-2","text-nowrap"],[1,"fa","fa-gears","me-2"],["type","button",1,"btn","btn-danger","mx-auto","btn-md","text-nowrap",3,"click"],[1,"col-lg-4","offset-lg-4","col-sm-8","offset-sm-2","col-12","offset-0","d-flex","justify-content-center","pb-3"],["type","button",1,"btn","btn-success","btn-md","text-nowrap","me-1",3,"click"],[1,"d-none-sm"],[1,"form-group","col-lg-4","offset-lg-4","col-sm-8","offset-sm-2","col-12","offset-0","position-relative"],[1,"form-label",3,"for"],["type","text",1,"form-control",3,"id","name","formControlName","placeholder"],["type","date",1,"form-control",3,"id","name","formControlName"],[1,"form-label"],["type","hidden",1,"form-control",3,"id","name","formControlName"],["type","file","accept","image/*",1,"form-control",3,"change","id","name","formControlName"],["for","text",1,"form-label"],["id","type",1,"form-select",3,"formControlName"],["value","null","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-group","col-lg-4","offset-lg-4","col-sm-8","offset-sm-2","col-12","position-relative"],["type","tel","id","mobile","formControlName","mobile","placeholder","Enter your mobile number",1,"form-control"],[1,"text-center","my-2","text-danger"],[1,"row","g-2"],[1,"d-flex"],[1,"btn","btn-primary","btn-md","me-1","w-100",3,"click"],[1,"btn","btn-danger","ms-1","btn-md","text-nowrap",3,"click"],[1,"col-lg-4","offset-lg-4","col-sm-8","offset-sm-2","col-12","offset-0","d-flex","pb-3"],["type","button",1,"btn","btn-success","btn-md","text-nowrap","w-100","me-1",3,"click"],["type","button",1,"btn","btn-primary","btn-md","text-nowrap","w-100","ms-1",3,"click"],[1,"w-100","mx-auto","d-flex","align-items-center","justify-content-center"],["href","https://www.facebook.com/SOJITRAHIREN","target","_blank",1,"fw-bold","btn","btn-danger","ms-3",3,"click"],[1,"text-danger","fw-bold","text-decoration-none","mx-3","my-1",3,"routerLink"]],template:function(t,i){if(t&1){let n=Q();a(0,"div",3)(1,"div",4)(2,"a",5),f(3,"img",6),r()(),F(4,Tt,5,1,"div",7)(5,Bt,2,1,"div",8)(6,ii,18,12,"div",9),a(7,"div",10),F(8,ni,6,1,"div",11),r()(),a(9,"div",12)(10,"div",13)(11,"div",14)(12,"div",15)(13,"h5",16),c(14),r(),f(15,"button",17),r(),a(16,"div",18)(17,"form",19),M("ngSubmit",function(){return A(n),P(i.onTextSubmit())}),f(18,"input",20,0),a(20,"div",21)(21,"button",22),f(22,"i",23),c(23," Save"),r()()()()()()(),a(24,"div",24)(25,"div",13)(26,"div",14)(27,"div",15)(28,"h5",25),c(29),r(),f(30,"button",17),r(),a(31,"div",26),f(32,"img",27),a(33,"input",28,1),M("change",function(l){return A(n),P(i.handleImageInputChange(l))}),r(),a(35,"form",19),M("ngSubmit",function(){return A(n),P(i.onImageSubmit())}),f(36,"input",29),a(37,"div",21)(38,"button",30),M("click",function(){return A(n),P(i.openImageCropperDialog())}),f(39,"i",31),c(40," Change Photo"),r(),a(41,"button",32),f(42,"i",23),c(43," Save"),r()()()()()()(),a(44,"div",33)(45,"div",13)(46,"div",14)(47,"div",15)(48,"h5",34),c(49,"Crop Photo"),r(),f(50,"button",17),r(),a(51,"div",26),f(52,"img",35),r(),a(53,"div",36)(54,"div",21)(55,"button",37),M("click",function(){let l;return A(n),i.imageCropper.hide(),P((l=i.formData.get(i.selectedImage+"-file"))==null?null:l.reset())}),f(56,"i",38),c(57," Cancel"),r(),a(58,"button",39),M("click",function(){return A(n),P(i.handleSelectedEvent())}),f(59,"i",23),c(60," Save"),r()()()()()(),a(61,"div",40)(62,"div",13)(63,"div",14)(64,"div",15)(65,"h5",41),c(66,"Contact Information"),r(),f(67,"button",17),r(),a(68,"div",26)(69,"h5"),c(70,"Hiren Sojitra"),r(),a(71,"div",42)(72,"label",43),c(73,"Email:"),r(),a(74,"a",44),c(75,"hirensojitra007@gmail.com"),r()(),a(76,"div",42)(77,"label",45),c(78,"Mobile:"),r(),a(79,"a",46),c(80,"+919429558759"),r()(),a(81,"div",42)(82,"label",47),c(83,"Social Links:"),r(),f(84,"br"),a(85,"a",48),f(86,"i",49),c(87,"Facebook"),r(),a(88,"a",50),f(89,"i",51),c(90,"Instagram"),r(),a(91,"a",52),f(92,"i",53),c(93,"Twitter"),r()()()()()()}if(t&2){let n;m(2),p("routerLink","/latest"),m(2),p("ngIf",!i.postDetailsDefault),m(),p("ngIf",i.isInAppBrowser&&i.postDetails),m(),p("ngIf",!i.isInAppBrowser&&i.postDetails),m(2),p("ngIf",(i.postDetails==null?null:i.postDetails.info_show)||!i.postDetails),m(6),B(i.textModalTitle),m(3),p("formGroup",i.inputTextForm),m(4),p("disabled",i.inputTextForm.invalid),m(8),B(i.cropperModalTitle),m(3),p("src",(n=i.inputImageForm.get("image"))==null?null:n.value,ae),m(3),p("formGroup",i.inputImageForm),m(6),p("disabled",i.inputImageForm.invalid)}},dependencies:[Me,Ne,Ue,Oe,ot,Ke,Ze,et,He,Xe,Ge,qe,Ye,Qe]})}}return o})();var oi=[{path:"",component:vt,data:{title:"Proposal for Web Application Poster Generation Service | PostNew",description:"Discover our web application for generating election campaign posters, festival posts, and other promotional activities. Customize posters with photos, names, addresses, designations, and contact details for efficient and personalized promotional material.",keywords:"poster generation, campaign posters, election posters, festival posts, promotional activities, customization, PostNew, web application",robots:"index, follow","og:image":"https://api.postnew.in/api/v1/img/uploads/wLmyK?quality=30","og:image:alt":"PostNew Logo","og:image:type":"image/svg+xml","og:image:width":"1200","og:image:height":"630","og:title":"Web Application Poster Generation Service | PostNew","og:description":"Generate personalized posters for campaigns and festivals with Gujarat Info\u2019s web application. Easily customize with your photos, names, and contact details."}}],bt=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=ce({type:o})}static{this.\u0275inj=le({imports:[ye.forChild(oi),ye]})}}return o})();var Hi=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=ce({type:o})}static{this.\u0275inj=le({imports:[Be,bt,ct,it,nt]})}}return o})();export{Hi as PosterModule};
