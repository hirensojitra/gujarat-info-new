import './polyfills.server.mjs';
import{a as W}from"./chunk-HRTQ2G2J.mjs";import"./chunk-4PYPEGK6.mjs";import{a as K}from"./chunk-C6R3THEX.mjs";import{b as J,k as Z,r as tt}from"./chunk-YTK6T7UM.mjs";import{x as X,y as Y}from"./chunk-X6RFGL5P.mjs";import{a as H}from"./chunk-CGEXYLQB.mjs";import{a as $}from"./chunk-ZOQGZUTB.mjs";import{$ as E,Aa as a,Ba as c,Ca as C,Da as I,E as v,Ea as b,Fa as S,Ga as L,Gb as G,Ha as p,Ib as V,K as z,Ka as j,L as _,La as A,Ma as T,Oa as h,Pa as k,Q as y,Qa as x,R as w,Xa as F,ea as R,ec as q,ha as n,hc as O,ia as m,ic as Q,jc as M,mb as D,sa as f,ta as P,ua as d,va as B,yb as N,zb as U}from"./chunk-YAE7DDPL.mjs";import{h as l}from"./chunk-VVCT4QZE.mjs";var st=["masonryGrid"],at=()=>[12,24,48];function lt(e,u){if(e&1&&(a(0,"div",3)(1,"div",4),C(2,"img",5),a(3,"div",6),C(4,"div",7),c(),a(5,"b",8),h(6),c()()()),e&2){let t=p();n(4),B("width",t.progress,"%"),P("aria-valuenow",t.progress),n(2),x("",t.progress,"%")}}function ct(e,u){if(e&1){let t=S();a(0,"div",20)(1,"h3",21),h(2),c(),a(3,"a",22)(4,"img",23),L("load",function(o){y(t);let r=p().$implicit,s=p(3);return w(s.onSvgLoad(r,o))}),c(),a(5,"span",24),h(6),a(7,"span",25),h(8,"unread messages"),c()()(),a(9,"p",26),h(10),c()()}if(e&2){let t=p().$implicit;n(2),x(" ",t.title," "),n(),d("routerLink","/poster/"+t.id),n(),d("src",t.image,R),P("alt",t.title),n(2),x(" Download: ",t.download_counter," "),n(4),k(t.info)}}function mt(e,u){if(e&1&&(I(0),f(1,ct,11,6,"div",19),b()),e&2){let t=u.$implicit;n(),d("ngIf",(t==null?null:t.info_show)&&(t==null?null:t.image))}}function dt(e,u){if(e&1&&(I(0),a(1,"div",16)(2,"div",17,0),f(4,mt,2,1,"ng-container",18),c()(),b()),e&2){let t=p(2);n(4),d("ngForOf",t.posts)}}function pt(e,u){if(e&1){let t=S();a(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),f(5,dt,5,1,"ng-container",14),c()()()(),a(6,"div",15),L("currentPageChange",function(o){y(t);let r=p();return w(r.changePage(o))})("pageSizeChange",function(o){y(t);let r=p();return w(r.changePageSize(o))}),c()()}if(e&2){let t=p();n(5),d("ngIf",t.posts.length),n(),d("currentPage",t.currentPage)("totalItems",t.pagination.totalPosts)("pageSize",t.limit)("pageSizes",F(5,at))}}var it=(()=>{class e{constructor(t,i,o,r,s,g,rt,nt){this.PS=t,this.route=i,this.router=o,this.authService=r,this.platformId=s,this.cdr=g,this.platformService=rt,this.colorService=nt,this.posts=[],this.currentPage=1,this.limit=12,this.search="",this.sortBy="created_at",this.order="desc",this.pagination={totalPosts:0,currentPage:1,totalPages:0},this.loading=!1,this.progress=0,this.imgUrl=$.MasterApi+"/thumb-images/",this.isBrowser=V(this.platformId)}ngOnInit(){return l(this,null,function*(){this.route.queryParams.subscribe(t=>l(this,null,function*(){this.currentPage=+t.page||1,this.limit=+t.limit||this.limit,this.search=t.search||this.search,this.sortBy=t.sortBy||this.sortBy,this.order=t.order||this.order,yield this.getAllPosts()}))})}ngAfterViewInit(){this.isBrowser&&(this.initializeMasonry(),window.addEventListener("resize",()=>{this.masonryInstance&&this.masonryInstance.layout()}))}initializeMasonry(){this.masonryGridRef&&this.isBrowser&&(console.log("Initializing Masonry:",this.masonryGridRef.nativeElement),this.masonryInstance=new Masonry(this.masonryGridRef.nativeElement,{itemSelector:".masonry-box",percentPosition:!0}))}getAllPosts(){return l(this,null,function*(){this.loading=!0,this.progress=0,this.PS.getAllPosts({page:this.currentPage,limit:this.limit,search:this.search,sortBy:this.sortBy,order:this.order}).subscribe(t=>l(this,null,function*(){let i=t.posts.length,o=0;this.posts=yield Promise.all(t.posts.map(r=>l(this,null,function*(){let s=this.imgUrl+r.id;return r.image=yield this.convertImageToDataURI(s),o++,this.progress=Math.round(o/i*100),this.cdr.detectChanges(),r}))),this.pagination=t.pagination,this.loading=!1,this.progress=100,this.cdr.detectChanges(),setTimeout(()=>{this.masonryInstance?(this.masonryInstance.reloadItems(),this.masonryInstance.layout()):this.initializeMasonry()},0)}))})}convertImageToDataURI(t){return l(this,null,function*(){if(!this.isBrowser)return t;try{let o=yield(yield fetch(t,{mode:"cors"})).blob();return new Promise((r,s)=>{let g=new FileReader;g.onloadend=()=>r(g.result),g.onerror=s,g.readAsDataURL(o)})}catch(i){return console.error("Error converting image to Data URI:",i),""}})}changePage(t){return l(this,null,function*(){this.currentPage!==t&&(this.currentPage=t,this.progress=0,this.loading=!0,this.updateUrlParams(),yield this.getAllPosts())})}changePageSize(t){return l(this,null,function*(){this.limit!==t&&(this.limit=t,this.currentPage=1,this.progress=0,this.loading=!0,this.updateUrlParams(),yield this.getAllPosts())})}updateUrlParams(){this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,limit:this.limit,search:this.search,sortBy:this.sortBy,order:this.order},queryParamsHandling:"merge"})}isAdmin(){return this.authService.hasRole(["admin","master"])}onSvgLoad(t,i){this.masonryInstance&&this.isBrowser&&window.dispatchEvent(new Event("resize"));let o=i?.target?.parentElement,r=t.image;r&&o&&this.getColors(r,5).then(s=>{s.length>0&&(o.style.backgroundColor=s[2])}).catch(s=>{console.error("Failed to fetch colors:",s)})}getColors(t,i){return l(this,null,function*(){try{return yield this.colorService.getColors(t,i)}catch(o){return console.error("Error updating colors:",o),[]}})}static{this.\u0275fac=function(i){return new(i||e)(m(K),m(q),m(O),m(W),m(E),m(D),m(H),m(Z))}}static{this.\u0275cmp=z({type:e,selectors:[["app-latest"]],viewQuery:function(i,o){if(i&1&&j(st,5),i&2){let r;A(r=T())&&(o.masonryGridRef=r.first)}},decls:2,vars:2,consts:[["masonryGrid",""],["class","h-100-vh d-flex flex-column align-items-center",4,"ngIf"],["class","h-100-vh d-flex flex-column",4,"ngIf"],[1,"h-100-vh","d-flex","flex-column","align-items-center"],[1,"flex-grow-1","p-3","position-relative","overflow-hidden","w-100","d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/images/svg/logo.svg","alt","Post New",1,"w-60-px","mb-3"],[1,"progress","w-100",2,"height","5px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"p-3"],[1,"h-100-vh","d-flex","flex-column"],[1,"flex-grow-1","position-relative","overflow-hidden"],[1,"position-absolute","h-100","w-100","d-flex","overflow-auto","flex-column"],[1,"container-fluid","h-100","w-100","py-3"],[1,"row","g-3"],[4,"ngIf"],["pagination","",1,"mt-0","mb-0","px-3",3,"currentPageChange","pageSizeChange","currentPage","totalItems","pageSize","pageSizes"],[1,"col-12","px-md-3","px-2"],["data-masonry","{'percentPosition': true}",1,"row","g-md-3","g-2"],[4,"ngFor","ngForOf"],["class","col-lg-3 col-md-6 col-4 masonry-box",4,"ngIf"],[1,"col-lg-3","col-md-6","col-4","masonry-box"],[1,"h5","fw-bold","m-0","p-3","bg-black","text-white","d-none","d-md-block"],["target","_blank",1,"position-relative","shadow-sm","p-2","text-decoration-none","d-block",3,"routerLink"],[1,"w-100","img-fluid","d-block",3,"load","src"],[1,"position-absolute","top-0","start-50","translate-middle","badge","rounded-pill","bg-danger","d-md-block"],[1,"visually-hidden"],[1,"h6","m-0","p-3","bg-light","text-dark","d-none","d-md-block"]],template:function(i,o){i&1&&f(0,lt,7,4,"div",1)(1,pt,7,6,"div",2),i&2&&(d("ngIf",o.isBrowser&&o.loading),n(),d("ngIf",o.isBrowser&&!o.loading))},dependencies:[N,U,Q,J]})}}return e})();var gt=[{path:"",component:it,data:{title:"Proposal for Web Application Poster Generation Service | PostNew",description:"Discover our web application for generating election campaign posters, festival posts, and other promotional activities. Customize posters with photos, names, addresses, designations, and contact details for efficient and personalized promotional material.",keywords:"poster generation, campaign posters, election posters, festival posts, promotional activities, customization, PostNew, web application",robots:"index, follow","og:image":"https://api.postnew.in/api/v1/img/uploads/wLmyK?quality=10","og:image:alt":"PostNew Logo","og:image:type":"image/svg+xml","og:image:width":"1200","og:image:height":"630","og:title":"Web Application Poster Generation Service | PostNew","og:description":"Generate personalized posters for campaigns and festivals with Gujarat Info\u2019s web application. Easily customize with your photos, names, and contact details."}}],ot=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=_({type:e})}static{this.\u0275inj=v({imports:[M.forChild(gt),M]})}}return e})();var Dt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=_({type:e})}static{this.\u0275inj=v({imports:[G,ot,tt,X,Y]})}}return e})();export{Dt as LatestModule};
