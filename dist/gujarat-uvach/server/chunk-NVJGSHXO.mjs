import './polyfills.server.mjs';
import{a as A}from"./chunk-GEAKS7UG.mjs";import"./chunk-JVYDACQO.mjs";import"./chunk-WQAH27MK.mjs";import{a as D}from"./chunk-PQHBR4RA.mjs";import"./chunk-ZOSFQCFM.mjs";import{a as L}from"./chunk-SBPX72W3.mjs";import{c as N,d as p,f as w,g as M,k as I,o as k,r as x,x as E,y as j,z as R}from"./chunk-DXF4L3C7.mjs";import"./chunk-D7IAKCP3.mjs";import{A as f,y as _,z as F}from"./chunk-W6Z6YZO4.mjs";import{Bb as d,Lb as o,Mb as n,Nb as g,Sb as v,cc as a,dd as y,ec as b,ha as c,hb as l,ib as m,mc as S,od as C,ra as h,sa as u}from"./chunk-MA44MDZG.mjs";import"./chunk-VVCT4QZE.mjs";var q=i=>({"is-invalid":i}),P=(()=>{class i{constructor(r,e,t,s,V){this.fb=r,this.loginService=e,this.authService=t,this.router=s,this.toast=V,this.loading=!1,this.errorMessage=""}ngOnInit(){this.loginForm=this.fb.group({login_id:["",[p.required]],pass_key:["",[p.required,p.minLength(6)]]})}login(){if(this.loginForm.invalid)return;this.loading=!0;let r=this.loginForm.value;this.loginService.login(r).subscribe({next:e=>{this.loading=!1,this.authService.saveSession(e.token,e.user),this.toast.show("Login successful!",{class:"bg-success"}),e.user.email_verified?this.router.navigate(["/home"]):this.router.navigate(["/authentication/verify-email"])},error:e=>{this.loading=!1,console.log(e),this.toast.show(e.message||"Login failed.",{class:"bg-danger"})}})}static{this.\u0275fac=function(e){return new(e||i)(m(E),m(A),m(L),m(_),m(D))}}static{this.\u0275cmp=h({type:i,selectors:[["app-login"]],decls:19,vars:7,consts:[[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","login_id",1,"form-label"],["type","text","id","login_id","formControlName","login_id","placeholder","Enter your email or username",1,"form-control",3,"ngClass"],["for","pass_key",1,"form-label"],["type","password","id","pass_key","formControlName","pass_key","placeholder","Enter your password",1,"form-control"],["type","submit",1,"btn","btn-dark","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"text-decoration-none",3,"routerLink"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"h4"),a(2,"Sign In to Your Account"),n()(),o(3,"form",1),v("ngSubmit",function(){return t.login()}),o(4,"div",2)(5,"label",3),a(6,"Email / Username"),n(),g(7,"input",4),n(),o(8,"div",2)(9,"label",5),a(10,"Password"),n(),g(11,"input",6),n(),o(12,"button",7),a(13),n()(),o(14,"div",8)(15,"p"),a(16,"Don't have an account? "),o(17,"a",9),a(18,"Register"),n()()()),e&2){let s;l(3),d("formGroup",t.loginForm),l(4),d("ngClass",S(5,q,((s=t.loginForm.get("login_id"))==null?null:s.invalid)&&((s=t.loginForm.get("login_id"))==null?null:s.touched))),l(5),d("disabled",t.loginForm.invalid||t.loading),l(),b(" ",t.loading?"Signing in...":"Sign In"," "),l(4),d("routerLink","/authentication/register")}},dependencies:[y,F,I,N,w,M,k,x]})}}return i})();var B=[{path:"",component:P,data:{title:"PostNew | Authentication",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, authentication, portal",robots:"index, follow"}}],T=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=c({imports:[f.forChild(B),f]})}}return i})();var ne=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=c({imports:[C,T,j,R]})}}return i})();export{ne as LoginModule};
