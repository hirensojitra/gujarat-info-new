import './polyfills.server.mjs';
import{a as I}from"./chunk-PVWSR64F.mjs";import{a as A}from"./chunk-NRHGKVYS.mjs";import"./chunk-FW4VF2IF.mjs";import"./chunk-EJW5OMJX.mjs";import{a as x}from"./chunk-46BBL2TG.mjs";import"./chunk-6XMGVEEK.mjs";import{a as y}from"./chunk-7HDQKCIK.mjs";import"./chunk-AJBY5M5H.mjs";import{B as j,C as k}from"./chunk-U6GZNWZS.mjs";import{A as s,w as C,y as S}from"./chunk-VQU2SKIF.mjs";import{$b as w,Cd as b,Hb as v,O as u,Sb as l,Tb as h,Ub as m,la as a,mb as d,mc as p,nb as r,nc as M,v as g,va as f,wa as c}from"./chunk-SNHROY6X.mjs";import"./chunk-VVCT4QZE.mjs";var G=(()=>{class e{constructor(i,o,t,n,R){this.router=i,this.registerService=o,this.authService=t,this.toast=n,this.cookie=R,this.isLoading=!1,this.errorMessage="",this.showSetPassword=!1,this.googleUserId="",this.newPassword="",this.confirmPassword=""}handleGoogleCredential(i){console.log("Google response:",i);try{let o=i.credential;this.isLoading=!0,this.errorMessage="",this.registerService.googleAuth(o).pipe(u(t=>(this.isLoading=!1,this.toast.show(t.message||"Google auth failed",{class:"bg-danger"}),g(null)))).subscribe(t=>{if(this.isLoading=!1,!!t&&t.token){let n={path:"/",secure:window.location.protocol==="https:",sameSite:"Lax"};this.authService.saveSession(t.token,t.user),t.requiresPassword?(this.cookie.set("requires_password",String(t.requiresPassword),n),this.cookie.set("google_user_id",t.user.id,n),this.router.navigate(["/authentication-action/set-password"])):this.router.navigate(["/home"])}})}catch(o){console.error("handleGoogleCredential error:",o),this.toast.show("Internal error processing Google response",{class:"bg-danger"}),this.isLoading=!1}}registerWithGoogle(){this.isLoading=!0,google.accounts.id.initialize({client_id:"650577899089-abc77o2gr9jldf1sfi6rcg6gptcdq4p8.apps.googleusercontent.com",callback:i=>this.handleGoogleCredential(i)}),google.accounts.id.prompt(i=>{})}static{this.\u0275fac=function(o){return new(o||e)(r(S),r(I),r(x),r(A),r(y))}}static{this.\u0275cmp=f({type:e,selectors:[["app-authentication"]],decls:12,vars:2,consts:[[1,"container","d-flex","align-items-center","justify-content-center","min-vh-100","flex-column"],[1,"card","shadow","p-4",2,"width","400px","border-radius","15px"],["src","assets/images/svg/logo-large.svg","alt","logo",1,"w-66-p","mx-auto","mb-3"],[1,"or-container"],[1,"text-center"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-outline-danger","border","w-100","me-2",3,"click","disabled"],[1,"fa","fa-google","me-3"]],template:function(o,t){o&1&&(l(0,"div",0)(1,"div",1),m(2,"img",2)(3,"hr")(4,"router-outlet")(5,"span",3),l(6,"p",4),p(7,"Connect with us by"),h(),l(8,"div",5)(9,"button",6),w("click",function(){return t.registerWithGoogle()}),m(10,"i",7),p(11),h()()()()),o&2&&(d(9),v("disabled",t.isLoading),d(2),M(t.isLoading?"Google Signing In ...":"Google"))},dependencies:[C]})}}return e})();var N=[{path:"",component:G,data:{title:"PostNew | Authentication",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, authentication, portal",robots:"index, follow"},children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",loadChildren:()=>import("./chunk-Q7JX63XQ.mjs").then(e=>e.LoginModule)},{path:"register",loadChildren:()=>import("./chunk-IOFP6RJZ.mjs").then(e=>e.RegisterModule)},{path:"forgot-password",loadChildren:()=>import("./chunk-YKJHDBPB.mjs").then(e=>e.ForgotPasswordModule)},{path:"reset-password",loadChildren:()=>import("./chunk-BUYDG7KK.mjs").then(e=>e.ResetPasswordModule)},{path:"verify-email",loadChildren:()=>import("./chunk-42PKYPPK.mjs").then(e=>e.VerifyEmailModule)}]}],P=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=c({type:e})}static{this.\u0275inj=a({imports:[s.forChild(N),s]})}}return e})();var X=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=c({type:e})}static{this.\u0275inj=a({imports:[b,s,P,j,k]})}}return e})();export{X as AuthenticationModule};
