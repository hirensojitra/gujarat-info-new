import './polyfills.server.mjs';
import{a as ut,b as ht,c as gt,d as ft,e as _t,f as vt,g as bt,h as Mt}from"./chunk-TNI6USF5.mjs";import"./chunk-VU3PTMYY.mjs";import{a as qe,r as ve}from"./chunk-WSVCQRCV.mjs";import"./chunk-6LI5R7ZS.mjs";import{a as ee}from"./chunk-AJBY5M5H.mjs";import{a as _e,b as Q}from"./chunk-ANSJO3EY.mjs";import{a as tt,b as it,c as nt,d as ue,e as rt,f as dt,g as pt}from"./chunk-YSWCXYAP.mjs";import{d as ot,e as at}from"./chunk-2GLKHGPN.mjs";import{a as Pe,d as mt}from"./chunk-B6ZFWIQG.mjs";import{a as st,b as lt,c as he,d as G,e as ge,f as fe}from"./chunk-3LO3X7K3.mjs";import{G as ke,N as Je,S as et,aa as ct,o as Ke,p as Fe}from"./chunk-EW6GGP5E.mjs";import{c as K,d as X,f as T,g as Ce,i as Y,k as Qe,l as We}from"./chunk-BPJ7ZZQW.mjs";import{A as Ze}from"./chunk-3JOF4ORF.mjs";import{A as E,v as de,w as pe,y as J}from"./chunk-6JIZBOEB.mjs";import{A as W,Da as g,Db as S,Ea as f,Eb as P,Fa as U,Fb as c,Ga as Le,La as xe,Lb as B,Ma as Ie,Mb as Be,N as M,Nb as Ne,Ob as Ve,Oc as A,Pb as a,Qb as r,Rb as _,Vb as D,Vc as q,Wc as Z,Yb as h,_b as p,a as Ee,ca as ye,da as w,ec as ae,fa as F,fc as re,g as te,gb as H,gc as se,h as ie,hc as $e,i as Re,ic as s,ja as ne,jc as N,ka as x,kc as C,kd as Ye,lb as l,lc as Ue,ld as Ge,ma as oe,mb as v,md as ce,oa as Oe,pa as O,qa as ze,qc as we,qd as me,ra as Ae,sb as je,ta as z,tc as le,u as $,ua as k,uc as He,v as b,va as I,wd as L,zb as Se,zc as Xe}from"./chunk-FUKAYGLY.mjs";import"./chunk-VVCT4QZE.mjs";var xt=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=k({type:n,selectors:[["app-file-manager"]],decls:1,vars:0,template:function(t,i){t&1&&_(0,"router-outlet")},dependencies:[pe]})}}return n})();var j=(()=>{class n{constructor(e){this.imgService=e,this._folders$=new ie([]),this._images$=new ie([]),this._selectedFolder$=new ie(null),this.folders$=this._folders$.asObservable(),this.images$=this._images$.asObservable(),this.selectedFolder$=this._selectedFolder$.asObservable(),this.foldersSubject=this._folders$,this.imagesSubject=this._images$,this.selectedFolderSubject=this._selectedFolder$}loadFolders(e=1,t=9999,i="",o="created_at",m="DESC"){this.imgService.getFolders({page:e,limit:t,search:i,sortBy:o,order:m}).pipe(F(d=>{let y=d.folders||[];this._folders$.next(y);let Te=this._selectedFolder$.value;if(Te){let Me=y.find(Et=>Et.id===Te.id)||null;this._selectedFolder$.next(Me)}else{let Me=y.length>0?y[0]:null;this._selectedFolder$.next(Me)}}),ye(()=>{let d=this._selectedFolder$.value;return d?this.imgService.getImagesInFolder(d.id,1,9999,"","DESC").pipe(F(y=>{this._images$.next(y.images||[])}),M(y=>(this._images$.next([]),$(null)))):(this._images$.next([]),$(null))}),M(d=>(this._folders$.next([]),this._images$.next([]),this._selectedFolder$.next(null),b(()=>d)))).subscribe({next:()=>{},error:d=>{console.error("Error in loadFolders:",d)}})}setSelectedFolder(e){this._selectedFolder$.next(e),e?this.loadImages(e.id):this._images$.next([])}loadImages(e,t=1,i=12){this.imgService.getImagesInFolder(e,t,i,"","DESC").pipe(F(o=>{this._images$.next(o.images||[])}),M(o=>(this._images$.next([]),$(null)))).subscribe({next:()=>{},error:o=>{console.error("Error in loadImages:",o)}})}createFolder(e){return this.imgService.createFolder(e).pipe(F(()=>{this.loadFolders()}),M(t=>(console.error("Error creating folder:",t),b(()=>t))))}renameFolder(e,t){return this.imgService.renameFolder(e,t).pipe(F(()=>{this.loadFolders()}),M(i=>(console.error("Error renaming folder:",i),b(()=>i))))}deleteFolder(e){return this.imgService.deleteFolder(e).pipe(W(()=>{let t=this._selectedFolder$.value;t&&t.id===e&&(this._selectedFolder$.next(null),this._images$.next([]))}),F(()=>{this.loadFolders()}),M(t=>(console.error("Error deleting folder:",t),b(()=>t))))}uploadFile(e,t,i=""){return this.imgService.uploadImage(e,t,i).pipe(F(()=>{this.loadImages(e)}),M(o=>(console.error("Error uploading file:",o),b(()=>o))))}refreshFile(e,t,i){return this.imgService.refreshImage(e,t,i).pipe(F(()=>{this.loadImages(t)}),M(o=>(console.error("Error refreshing file:",o),b(()=>o))))}deleteFile(e,t){return this.imgService.deleteImage(e,t).pipe(W(()=>{}),F(()=>{this.loadImages(e)}),M(i=>(console.error("Error deleting file:",i),b(()=>i))))}refreshImagesForCurrentFolder(){let e=this._selectedFolder$.value;e&&this.loadImages(e.id)}getItems(e){return this.imgService.getFolders({page:1,limit:9999,search:"",sortBy:"created_at",order:"DESC"}).pipe(W(t=>{let i=t.folders||[];this._folders$.next(i);let o=e!=null?i.find(m=>m.id===e)||null:i.length>0?i[0]:null;return this._selectedFolder$.next(o),{folders:i,selected:o}}),ye(({folders:t,selected:i})=>i?this.imgService.getImagesInFolder(i.id,1,9999,"","DESC").pipe(W(o=>(this._images$.next(o.images||[]),{folders:t,images:o.images||[]}))):(this._images$.next([]),$({folders:t,images:[]}))),M(t=>(this._folders$.next([]),this._images$.next([]),this._selectedFolder$.next(null),b(()=>t))))}getItemById(e){if(!e)return b(()=>new Error("Invalid image ID"));let t=this._images$.value.find(i=>i.id===e);return t?$(t):b(()=>new Error("Image not found in cache"))}static{this.\u0275fac=function(t){return new(t||n)(Oe(ut))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var At=["matDrawer"],Lt=["fileInput"],jt=(n,u)=>({"btn-dark pe-none":n,"btn-outline-secondary":u}),Bt=n=>({"background-image":n,"background-size":"contain","background-position":"center","background-repeat":"no-repeat"});function Nt(n,u){if(n&1){let e=D();a(0,"div",26)(1,"button",27),h("click",function(){let i=g(e).$implicit;return p(2).onFolderSelect(i),f(!1)}),a(2,"div",28)(3,"mat-icon",29),s(4,"folder"),r(),a(5,"div",30),s(6),r()()(),a(7,"div",31)(8,"button",32),h("click",function(i){let o=g(e).$implicit,m=p(2);return f(m.deleteFolder(o,i))}),a(9,"mat-icon"),s(10,"delete_outline"),r()()()()}if(n&2){let e=u.$implicit,t=p(2);c("wPX",140)("minWPX",140),l(),c("matTooltip",e.name)("ngClass",He(5,jt,(t.selectedFolder==null?null:t.selectedFolder.id)===e.id,(t.selectedFolder==null?null:t.selectedFolder.id)!==e.id)),l(5),C(" ",e.name," ")}}function Vt(n,u){if(n&1&&(a(0,"div",21)(1,"h3",22),s(2,"Folders"),r(),a(3,"div",23)(4,"div",24),S(5,Nt,11,8,"div",25),r()()()),n&2){let e=p();l(4),c("@fadeInStagger",void 0),l(),c("ngForOf",e.folders)("ngForTrackBy",e.trackById)}}function $t(n,u){if(n&1){let e=D();a(0,"div",34)(1,"div",35)(2,"div",36),h("click",function(){let i=g(e).$implicit,o=p(2);return f(o.onFileDetails(i))}),r(),a(3,"div",37)(4,"div",38)(5,"small",39),s(6),r(),a(7,"div",40)(8,"button",41),_(9,"i",42),r(),a(10,"ul",43)(11,"li")(12,"button",44),h("click",function(i){let o=g(e).$implicit,m=p(2);return f(m.copyHrefToClipboard(i,o))}),_(13,"i",45),s(14,"Copy URL "),r()(),a(15,"li")(16,"button",44),h("click",function(){let i=g(e).$implicit,o=p(2);return f(o.refreshFile(i))}),_(17,"i",46),s(18,"Refresh "),r()(),a(19,"li")(20,"button",47),h("click",function(){let i=g(e).$implicit,o=p(2);return f(o.deleteFile(i))}),_(21,"i",48),s(22,"Delete "),r()(),a(23,"li")(24,"a",49),_(25,"i",50),s(26,"Open "),r()(),a(27,"li")(28,"a",51),_(29,"i",52),s(30,"Download "),r()()()()()()()()}if(n&2){let e=u.$implicit,t=p(2);c("wPX",140)("minWPX",140),l(2),c("ngStyle",le(8,Bt,"url("+t.apiUrl+"/user-img/uploads/"+e.id+"?thumb=small)")),P("aria-label",e.metadata||"Image"),l(3),c("matTooltip",e.image_url),l(),N(e.image_url||"Unnamed"),l(18),c("href",t.apiUrl+"/user-img/uploads/"+e.id,H),l(4),c("href",t.apiUrl+"/user-img/uploads/"+e.id,H)}}function Ut(n,u){if(n&1&&(a(0,"div")(1,"h3",22),s(2,"Files"),r(),a(3,"div",23)(4,"div",24),S(5,$t,31,10,"div",33),r()()()),n&2){let e=p();l(4),c("@fadeInStagger",void 0),l(),c("ngForOf",e.images)("ngForTrackBy",e.trackById)}}function Ht(n,u){n&1&&(a(0,"div",53)(1,"mat-icon",54),s(2,"folder_open"),r(),a(3,"p",55),s(4,"No folders or files available."),r()())}var V=(()=>{class n{constructor(e,t,i,o,m,d,y){this._router=e,this._route=t,this._cdr=i,this._fileManagerService=o,this.renderer=m,this.elementRef=d,this.breakpointObserver=y,this.apiUrl=ee.MasterApi,this.folders=[],this.images=[],this.selectedFolder=null,this.drawerMode="side",this._unsubscribeAll=new te}ngOnInit(){this.breakpointObserver.observe([Fe.Handset,Fe.Tablet]).pipe(w(this._unsubscribeAll)).subscribe(e=>{this.drawerMode=e.matches?"over":"side",this._cdr.markForCheck()}),this._fileManagerService.folders$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.folders=e,this._cdr.markForCheck()}),this._fileManagerService.images$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.images=e,this._cdr.markForCheck()}),this._fileManagerService.selectedFolder$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.selectedFolder=e,this._cdr.markForCheck()}),this._fileManagerService.loadFolders()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}onFolderSelect(e){!e||e.id===this.selectedFolder?.id||(this._fileManagerService.setSelectedFolder(e),this._fileManagerService.loadImages(e.id),this._router.navigate(["/file-manager/folders",e.id]))}onFileDetails(e){this.matDrawer.open(),this._router.navigate(["./details",e.id],{relativeTo:this._route})}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._route}),this._cdr.markForCheck()}trackById(e,t){return t.id}onUploadClick(){this.fileInput.nativeElement.value="",this.fileInput.nativeElement.click()}onFileSelected(e){let t=e.target;if(!t.files||!this.selectedFolder)return;let i=Array.from(t.files);for(let o of i){let m=o.name.split(".").pop()?.toLowerCase();if(!["jpg","jpeg","png"].includes(m||"")){window.alert("Only JPG, JPEG, or PNG files are allowed.");continue}this._fileManagerService.uploadFile(this.selectedFolder.id,o).pipe(w(this._unsubscribeAll)).subscribe({next:d=>{this.selectedFolder&&this._fileManagerService.loadImages(this.selectedFolder.id)},error:d=>{console.error("Upload failed:",d),window.alert("Failed to upload "+o.name)}})}}onDragOver(e){e.preventDefault()}onDrop(e){if(e.preventDefault(),!e.dataTransfer||!e.dataTransfer.files||!this.selectedFolder)return;let t=Array.from(e.dataTransfer.files);for(let i of t){let o=i.name.split(".").pop()?.toLowerCase();if(!["jpg","jpeg","png"].includes(o||"")){window.alert("Only JPG, JPEG, or PNG files are allowed.");continue}this._fileManagerService.uploadFile(this.selectedFolder.id,i).pipe(w(this._unsubscribeAll)).subscribe({next:m=>{this.selectedFolder&&this._fileManagerService.loadImages(this.selectedFolder.id)},error:m=>{console.error("Upload (via drop) failed:",m),window.alert("Failed to upload "+i.name)}})}}refreshFile(e){let t=this.renderer.createElement("input");t.type="file",t.accept="image/png, image/jpeg, image/jpg",t.onchange=i=>{let o=i.target;if(!o.files||o.files.length===0||!this.selectedFolder)return;let m=o.files[0];this._fileManagerService.refreshFile(e.id,this.selectedFolder.id,m).pipe(w(this._unsubscribeAll)).subscribe({next:d=>{this.selectedFolder&&this._fileManagerService.loadImages(this.selectedFolder.id)},error:d=>{console.error("Error refreshing file:",d),window.alert("Failed to replace the file.")}})},t.click()}deleteFile(e){!this.selectedFolder||!window.confirm(`Are you sure you want to delete "${e.id}"?`)||this._fileManagerService.deleteFile(this.selectedFolder.id,e.id).pipe(w(this._unsubscribeAll)).subscribe({next:()=>{this.selectedFolder&&this._fileManagerService.loadImages(this.selectedFolder.id)},error:i=>{console.error("Failed to delete image:",i),window.alert("Error deleting image.")}})}copyHrefToClipboard(e,t){e.preventDefault();let i=this.renderer.createElement("textarea");i.value=ee.MasterApi+"/user-img/uploads/"+t.id,this.renderer.appendChild(this.elementRef.nativeElement,i),i.select(),document.execCommand("copy"),this.renderer.removeChild(this.elementRef.nativeElement,i),window.alert("Copied to clipboard: "+i.value)}deleteFolder(e,t){t.stopPropagation(),window.confirm(`Delete folder "${e.name}"?`)&&this._fileManagerService.deleteFolder(e.id).pipe(w(this._unsubscribeAll)).subscribe({next:()=>{this.selectedFolder?.id===e.id&&(this._fileManagerService.setSelectedFolder(null),this.images=[]),this._fileManagerService.loadFolders()},error:o=>{console.error("Failed to delete folder:",o),window.alert("Error deleting folder.")}})}createFolder(){let e=window.prompt("Enter new folder name:");!e||!e.trim()||this._fileManagerService.createFolder(e.trim()).pipe(w(this._unsubscribeAll)).subscribe({next:t=>{this._fileManagerService.loadFolders()},error:t=>{console.error("Failed to create folder:",t),window.alert("Error creating folder.")}})}closeDrawer(){this.matDrawer.close(),this._router.navigate(["/file-manager/folders",this.selectedFolder.id])}static{this.\u0275fac=function(t){return new(t||n)(v(J),v(de),v(A),v(j),v(je),v(xe),v(Ke))}}static{this.\u0275cmp=k({type:n,selectors:[["app-file-manager-list"]],viewQuery:function(t,i){if(t&1&&(ae(At,7),ae(Lt,7)),t&2){let o;re(o=se())&&(i.matDrawer=o.first),re(o=se())&&(i.fileInput=o.first)}},decls:32,vars:8,consts:[["matDrawer",""],["fileInput",""],[1,"position-absolute","inset-0","flex","flex-col","h-100","w-100","overflow-hidden",3,"dragover","drop"],[1,"flex-1","h-100","p-3","me-0",3,"backdropClick"],["position","end",3,"mode","opened","disableClose"],[1,"flex","justify-end","p-2"],["mat-icon-button","",3,"click"],[1,"p-4","overflow-auto","d-flex","flex-column","flex-grow-1"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-sm","text-gray-500","mt-1"],[1,"d-flex","gap-2"],["mat-flat-button","","color","accent",3,"click"],[1,"mr-1"],["mat-flat-button","","color","primary",3,"click"],["type","file","hidden","","multiple","",3,"change"],[1,"flex-grow-1","position-relative"],[1,"position-absolute","h-100","w-100","overflow-y-auto"],["class","mb-4",4,"ngIf"],[4,"ngIf"],["class","flex flex-col items-center justify-center mt-20 text-gray-500",4,"ngIf"],[1,"mb-4"],[1,"text-lg","font-semibold","text-gray-700","mb-3"],[1,"container-fluid"],[1,"d-flex","flex-wrap","gap-3"],["class","position-relative","remSize","",3,"wPX","minWPX",4,"ngFor","ngForOf","ngForTrackBy"],["remSize","",1,"position-relative",3,"wPX","minWPX"],[1,"btn","rounded-4","ratio","ratio-1x1","shadow",3,"click","matTooltip","ngClass"],[1,"p-4","d-flex","flex-column","align-items-center"],[1,"h1","text-gray-400"],[1,"mt-4","text-sm","font-medium","text-gray-800","text-truncate"],[1,"position-absolute","top-0","end-0","mt-2","me-2",2,"z-index","5"],["mat-icon-button","","color","warn","matTooltip","Delete Folder",3,"click"],["remSize","",3,"wPX","minWPX",4,"ngFor","ngForOf","ngForTrackBy"],["remSize","",3,"wPX","minWPX"],[1,"card","border","shadow-sm","position-relative"],["role","img",1,"ratio","ratio-1x1","bg-light","bg-opacity-25",3,"click","ngStyle"],[1,"card-body","p-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-truncate",2,"max-width","75%",3,"matTooltip"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-sm"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"fa","fa-copy","me-2"],[1,"fa","fa-refresh","me-2"],[1,"dropdown-item","text-danger",3,"click"],[1,"fa","fa-trash","me-2"],["target","_blank",1,"dropdown-item",3,"href"],[1,"fa","fa-eye","me-2"],["download","",1,"dropdown-item",3,"href"],[1,"fa","fa-download","me-2"],[1,"flex","flex-col","items-center","justify-center","mt-20","text-gray-500"],[1,"text-6xl"],[1,"mt-2","text-lg"]],template:function(t,i){if(t&1){let o=D();a(0,"div",2),h("dragover",function(d){return g(o),f(i.onDragOver(d))})("drop",function(d){return g(o),f(i.onDrop(d))}),a(1,"mat-drawer-container",3),h("backdropClick",function(){return g(o),f(i.onBackdropClicked())}),a(2,"mat-drawer",4,0)(4,"div",5)(5,"button",6),h("click",function(){return g(o),f(i.closeDrawer())}),a(6,"mat-icon"),s(7,"close"),r()()(),_(8,"router-outlet"),r(),a(9,"mat-drawer-content",7)(10,"div",8)(11,"div")(12,"h2",9),s(13,"File Manager"),r(),a(14,"p",10),s(15),r()(),a(16,"div",11)(17,"button",12),h("click",function(){return g(o),f(i.createFolder())}),a(18,"mat-icon",13),s(19,"create_new_folder"),r(),s(20," New Folder "),r(),a(21,"button",14),h("click",function(){return g(o),f(i.onUploadClick())}),a(22,"mat-icon",13),s(23,"upload"),r(),s(24," Upload file "),r(),a(25,"input",15,1),h("change",function(d){return g(o),f(i.onFileSelected(d))}),r()()(),a(27,"div",16)(28,"div",17),S(29,Vt,6,3,"div",18)(30,Ut,6,3,"div",19)(31,Ht,5,0,"div",20),r()()()()()}t&2&&(l(2),c("mode",i.drawerMode)("opened",!1)("disableClose",!1),l(13),Ue(" ",i.folders.length," folders, ",i.images.length," files "),l(14),c("ngIf",i.folders.length),l(),c("ngIf",i.images.length),l(),c("ngIf",!i.folders.length&&!i.images.length))},dependencies:[Ye,Ge,ce,me,pe,st,he,ge,_e,vt,bt,_t,qe],encapsulation:2,data:{animation:[K("fadeInStagger",[Y("* => *",[Qe(":enter",[T({opacity:0,transform:"scale(0.9)"}),We(100,[X("300ms ease-out",T({opacity:1,transform:"scale(1)"}))])],{optional:!0})])])]},changeDetection:0})}}return n})();var Yt=n=>({"background-image":n,"background-size":"contain","background-position":"center","background-repeat":"no-repeat"});function Gt(n,u){if(n&1&&(a(0,"div",2)(1,"mat-card",3),_(2,"div",4),r(),a(3,"mat-card",3)(4,"mat-card-title"),s(5),r(),a(6,"mat-card-subtitle"),s(7),r(),_(8,"mat-divider",5),a(9,"div",6)(10,"div")(11,"strong"),s(12,"ID:"),r(),s(13),r(),a(14,"div")(15,"strong"),s(16,"Description:"),r(),s(17),r(),a(18,"div")(19,"strong"),s(20,"Size:"),r(),s(21),r(),a(22,"div")(23,"strong"),s(24,"Created At:"),r(),s(25),r()()(),a(26,"div",7)(27,"a",8)(28,"mat-icon"),s(29,"open_in_new"),r(),a(30,"span"),s(31,"Open"),r()(),a(32,"a",9)(33,"mat-icon"),s(34,"download"),r(),a(35,"span"),s(36,"Download"),r()()()()),n&2){let e=p();l(2),c("ngStyle",le(9,Yt,"url("+e.apiUrl+"/user-img/uploads/"+e.image.id+"?thumb=medium)")),l(3),N(e.image.image_url||"Unnamed"),l(2),N(e.image.metadata||"No metadata"),l(6),C(" ",e.image.id,""),l(4),C(" ",e.image.description||"N/A",""),l(4),C(" ",e.image.size||"Unknown",""),l(4),C(" ",e.image.created_at||"N/A",""),l(2),c("href",e.getImageUrl(),H),l(5),c("href",e.getImageUrl(),H)}}function Qt(n,u){n&1&&(a(0,"mat-card",10)(1,"mat-icon",11),s(2,"image_not_supported"),r(),a(3,"div",12),s(4,"Image not found"),r(),a(5,"div",13),s(6,"Make sure the image ID is correct."),r()())}var De=(()=>{class n{constructor(e,t,i,o){this.route=e,this.fileManagerService=t,this.listComponent=i,this.cdr=o,this.image=null,this.apiUrl=ee.MasterApi,this.subscription=new Ee}ngOnInit(){this.subscription.add(this.route.paramMap.subscribe(e=>{let t=e.get("id");if(t){let i=this.fileManagerService.imagesSubject.getValue();this.image=i.find(o=>o.id===t)||null,this.cdr.markForCheck()}})),this.listComponent.matDrawer.open()}loadImageDetails(e){let i=this.fileManagerService.imagesSubject.getValue().find(o=>o.id===e);if(this.image=i||null,!this.image&&this.fileManagerService.selectedFolder$){let o=this.fileManagerService.selectedFolderSubject.getValue();o&&this.fileManagerService.loadImages(o.id)}this.cdr.markForCheck()}ngOnDestroy(){this.subscription.unsubscribe()}getImageUrl(){return`${this.apiUrl}/user-img/uploads/${this.image?.id}`}closeDrawer(){return this.listComponent.matDrawer.close()}trackByFn(e,t){return t.id||e}static{this.\u0275fac=function(t){return new(t||n)(v(de),v(j),v(V),v(A))}}static{this.\u0275cmp=k({type:n,selectors:[["app-details"]],decls:3,vars:2,consts:[["notFound",""],["class","p-4",4,"ngIf","ngIfElse"],[1,"p-4"],[1,"mb-4"],["role","img",1,"ratio","ratio-1x1","bg-light","bg-opacity-25",3,"ngStyle"],[1,"my-2"],[1,"d-flex","flex-column","gap-2"],[1,"d-flex","gap-2"],["mat-flat-button","","color","primary","target","_blank",3,"href"],["mat-stroked-button","","download","",3,"href"],[1,"p-4","text-center"],[1,"mb-2",2,"font-size","48px"],[1,"text-lg","font-medium"],[1,"text-secondary"]],template:function(t,i){if(t&1&&S(0,Gt,37,11,"div",1)(1,Qt,7,0,"ng-template",null,0,Xe),t&2){let o=$e(2);c("ngIf",i.image)("ngIfElse",o)}},dependencies:[ce,me,lt,ge,tt,nt,it,ht]})}}return n})();var Wt=(n,u)=>{let e=O(j),t=O(J);return e.getItems(n.paramMap.get("folderId")).pipe(M(i=>{console.error(i);let o=u.url.split("/").slice(0,-1).join("/");return t.navigateByUrl(o),b(()=>i)}))},St=(n,u)=>{let e=O(j),t=O(J);return e.getItemById(n.paramMap.get("id")).pipe(M(i=>{console.error(i);let o=u.url.split("/").slice(0,-1).join("/");return t.navigateByUrl(o),b(()=>i)}))},wt=(n,u,e,t)=>{let i=t.root;for(;i.firstChild;)i=i.firstChild;return!t.url.includes("/file-manager")||t.url.includes("/details")?!0:n.closeDrawer().then(()=>!0)},qt=[{path:"",component:xt,children:[{path:"folders/:folderId",component:V,resolve:{item:Wt},children:[{path:"details/:id",component:De,resolve:{item:St},canDeactivate:[wt]}]},{path:"",component:V,resolve:{items:()=>O(j).getItems()},children:[{path:"details/:id",component:De,resolve:{item:St},canDeactivate:[wt]}]}]}],Ct=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=I({type:n})}static{this.\u0275inj=x({imports:[E.forChild(qt),E]})}}return n})();var Ft={transformMenu:K("transformMenu",[Ce("void",T({opacity:0,transform:"scale(0.8)"})),Y("void => enter",X("120ms cubic-bezier(0, 0, 0.2, 1)",T({opacity:1,transform:"scale(1)"}))),Y("* => void",X("100ms 25ms linear",T({opacity:0})))]),fadeInItems:K("fadeInItems",[Ce("showing",T({opacity:1})),Y("void => *",[T({opacity:0}),X("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},In=Ft.fadeInItems,Sn=Ft.transformMenu;var Kt=new oe("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=O(Pe);return()=>n.scrollStrategies.reposition()}});function Jt(n){return()=>n.scrollStrategies.reposition()}var ei={provide:Kt,deps:[Pe],useFactory:Jt};var kt=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=I({type:n})}static{this.\u0275inj=x({providers:[ei],imports:[L,Je,ke,mt,ct,ke]})}}return n})();function ti(n,u){if(n&1&&(a(0,"mat-option",16),s(1),r()),n&2){let e=u.$implicit;c("value",e),l(),C(" ",e," ")}}function ii(n,u){if(n&1){let e=D();a(0,"mat-form-field",13)(1,"mat-select",15),h("selectionChange",function(i){g(e);let o=p(2);return f(o._changePageSize(i.value))}),Ne(2,ti,2,2,"mat-option",16,Be),r()()}if(n&2){let e=p(2);c("appearance",e._formFieldAppearance)("color",e.color),l(),c("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),l(),Ve(e._displayedPageSizeOptions)}}function ni(n,u){if(n&1&&(a(0,"div",14),s(1),r()),n&2){let e=p(2);l(),N(e.pageSize)}}function oi(n,u){if(n&1&&(a(0,"div",2)(1,"div",12),s(2),r(),S(3,ii,4,7,"mat-form-field",13)(4,ni,2,1,"div",14),r()),n&2){let e=p();l(),P("id",e._pageSizeLabelId),l(),C(" ",e._intl.itemsPerPageLabel," "),l(),B(3,e._displayedPageSizeOptions.length>1?3:-1),l(),B(4,e._displayedPageSizeOptions.length<=1?4:-1)}}function ai(n,u){if(n&1){let e=D();a(0,"button",17),h("click",function(){g(e);let i=p();return f(i.firstPage())}),U(),a(1,"svg",7),_(2,"path",18),r()()}if(n&2){let e=p();c("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),P("aria-label",e._intl.firstPageLabel)}}function ri(n,u){if(n&1){let e=D();a(0,"button",19),h("click",function(){g(e);let i=p();return f(i.lastPage())}),U(),a(1,"svg",7),_(2,"path",20),r()()}if(n&2){let e=p();c("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),P("aria-label",e._intl.lastPageLabel)}}var be=(()=>{class n{constructor(){this.changes=new te,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,t,i)=>{if(i==0||t==0)return`0 of ${i}`;i=Math.max(i,0);let o=e*t,m=o<i?Math.min(o+t,i):o+t;return`${o+1} \u2013 ${m} of ${i}`}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function si(n){return n||new be}var li={provide:be,deps:[[new ze,new Ae,be]],useFactory:si},ci=50;var mi=new oe("MAT_PAGINATOR_DEFAULT_OPTIONS"),di=0,pi=(()=>{class n{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(t=>Z(t,0)),this._updateDisplayedPageSizeOptions()}constructor(e,t,i){if(this._intl=e,this._changeDetectorRef=t,this._pageSizeLabelId=`mat-paginator-page-size-label-${di++}`,this._isInitialized=!1,this._initializedStream=new Re(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new Ie,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){let{pageSize:o,pageSizeOptions:m,hidePageSize:d,showFirstLastButtons:y}=i;o!=null&&(this._pageSize=o),m!=null&&(this._pageSizeOptions=m),d!=null&&(this.hidePageSize=d),y!=null&&(this.showFirstLastButtons=y)}this._formFieldAppearance=i?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let e=this.getNumberOfPages()-1;return this.pageIndex<e&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){let t=this.pageIndex*this.pageSize,i=this.pageIndex;this.pageIndex=Math.floor(t/e)||0,this.pageSize=e,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:ci),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,t)=>e-t),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static{this.\u0275fac=function(t){return new(t||n)(v(be),v(A),v(mi,8))}}static{this.\u0275cmp=k({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[z.HasDecoratorInputTransform,"pageIndex","pageIndex",Z],length:[z.HasDecoratorInputTransform,"length","length",Z],pageSize:[z.HasDecoratorInputTransform,"pageSize","pageSize",Z],pageSizeOptions:"pageSizeOptions",hidePageSize:[z.HasDecoratorInputTransform,"hidePageSize","hidePageSize",q],showFirstLastButtons:[z.HasDecoratorInputTransform,"showFirstLastButtons","showFirstLastButtons",q],selectConfig:"selectConfig",disabled:[z.HasDecoratorInputTransform,"disabled","disabled",q]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[Se,we],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"div",1),S(2,oi,5,4,"div",2),a(3,"div",3)(4,"div",4),s(5),r(),S(6,ai,3,5,"button",5),a(7,"button",6),h("click",function(){return i.previousPage()}),U(),a(8,"svg",7),_(9,"path",8),r()(),Le(),a(10,"button",9),h("click",function(){return i.nextPage()}),U(),a(11,"svg",7),_(12,"path",10),r()(),S(13,ri,3,5,"button",11),r()()()),t&2&&(l(2),B(2,i.hidePageSize?-1:2),l(3),C(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),l(),B(6,i.showFirstLastButtons?6:-1),l(),c("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),P("aria-label",i._intl.previousPageLabel),l(3),c("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),P("aria-label",i._intl.nextPageLabel),l(3),B(13,i.showFirstLastButtons?13:-1))},dependencies:[ot,dt,et,he,_e],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})(),Pt=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=I({type:n})}static{this.\u0275inj=x({providers:[li],imports:[G,pt,Q,pi]})}}return n})();var Dt=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=I({type:n})}static{this.\u0275inj=x({imports:[L,Ze,E,G,fe,rt,ft,kt,ue,Q,Pt,at,Mt,ve]})}}return n})();var Tt=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=I({type:n})}static{this.\u0275inj=x({imports:[L,E,G,fe,ue,Q,gt,ve]})}}return n})();var Co=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=I({type:n})}static{this.\u0275inj=x({providers:[V],imports:[L,Ct,Dt,Tt,E]})}}return n})();export{Co as FileManagerModule};
