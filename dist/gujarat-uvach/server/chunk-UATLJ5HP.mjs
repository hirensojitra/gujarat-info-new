import './polyfills.server.mjs';
import{a as A}from"./chunk-DG2XSL6K.mjs";import"./chunk-526RFBAD.mjs";import"./chunk-VU3PTMYY.mjs";import{g as R,r as D}from"./chunk-WSVCQRCV.mjs";import{a as j}from"./chunk-ZD22DNAQ.mjs";import"./chunk-6LI5R7ZS.mjs";import{a as M}from"./chunk-KC3BFEEA.mjs";import"./chunk-KJXKQYSY.mjs";import"./chunk-AJBY5M5H.mjs";import{A as I,B as E,c as w,e as u,g as C,h as N,m as F,q as x,t as _,z as k}from"./chunk-3JOF4ORF.mjs";import{A as g,y,z as L}from"./chunk-6JIZBOEB.mjs";import{Fb as c,Pb as i,Qb as o,Rb as p,Yb as v,ic as s,ka as l,kc as S,lb as m,mb as a,ua as h,va as d,wd as b}from"./chunk-FUKAYGLY.mjs";import"./chunk-VVCT4QZE.mjs";var P=(()=>{class t{constructor(r,e,n,f,V){this.fb=r,this.loginService=e,this.authService=n,this.router=f,this.toast=V,this.loading=!1,this.errorMessage=""}ngOnInit(){this.loginForm=this.fb.group({login_id:["",[u.required]],pass_key:["",[u.required,u.minLength(6)]]})}login(){if(this.loginForm.invalid)return;this.loading=!0;let r=this.loginForm.value;this.loginService.login(r).subscribe({next:e=>{this.loading=!1,this.authService.saveSession(e.token,e.user),this.toast.show("Login successful!",{class:"bg-success"}),e.user.email_verified?this.router.navigate(["/home"]):this.router.navigate(["/authentication/verify-email"])},error:e=>{this.loading=!1,console.log(e),this.toast.show(e.message||"Login failed.",{class:"bg-danger"})}})}static{this.\u0275fac=function(e){return new(e||t)(a(k),a(A),a(M),a(y),a(j))}}static{this.\u0275cmp=h({type:t,selectors:[["app-login"]],decls:19,vars:4,consts:[[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","login_id",1,"form-label"],["type","text","id","login_id","formControlName","login_id","placeholder","Enter your email or username",1,"form-control"],["for","pass_key",1,"form-label"],["type","password","id","pass_key","formControlName","pass_key","placeholder","Enter your password",1,"form-control"],["type","submit",1,"btn","btn-dark","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"text-decoration-none",3,"routerLink"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"h4"),s(2,"Sign In to Your Account"),o()(),i(3,"form",1),v("ngSubmit",function(){return n.login()}),i(4,"div",2)(5,"label",3),s(6,"Email / Username"),o(),p(7,"input",4),o(),i(8,"div",2)(9,"label",5),s(10,"Password"),o(),p(11,"input",6),o(),i(12,"button",7),s(13),o()(),i(14,"div",8)(15,"p"),s(16,"Don't have an account? "),i(17,"a",9),s(18,"Register"),o()()()),e&2&&(m(3),c("formGroup",n.loginForm),m(9),c("disabled",n.loginForm.invalid||n.loading),m(),S(" ",n.loading?"Signing in...":"Sign In"," "),m(4),c("routerLink","/authentication/register"))},dependencies:[L,F,w,C,N,x,_,R]})}}return t})();var q=[{path:"",component:P,data:{title:"PostNew | Authentication",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, authentication, portal",robots:"index, follow"}}],T=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=d({type:t})}static{this.\u0275inj=l({imports:[g.forChild(q),g]})}}return t})();var re=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=d({type:t})}static{this.\u0275inj=l({imports:[b,T,I,E,D]})}}return t})();export{re as LoginModule};
