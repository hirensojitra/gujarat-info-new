import './polyfills.server.mjs';
import{a as we,b as Fe,c as Se,d as _e}from"./chunk-IUGQG6MJ.mjs";import{a as xe,b as ye,e as be,f as ve}from"./chunk-PCCWZCGQ.mjs";import"./chunk-IKPW7A2S.mjs";import{a as ne,f as fe,o as ge,r as ue}from"./chunk-TXBEKGQC.mjs";import"./chunk-AJBY5M5H.mjs";import"./chunk-LECRJSB3.mjs";import"./chunk-BPJ7ZZQW.mjs";import{a as ae}from"./chunk-RTGPZT5Z.mjs";import{a as oe}from"./chunk-3EV4HCP4.mjs";import{c as re,d as t,f as le,h as se,i as _,j as de,m as ce,x as me,y as he,z as pe}from"./chunk-AEJPAB7T.mjs";import"./chunk-6V7CEZXP.mjs";import{B as X,c as te,z as ie}from"./chunk-Y6FTUGKG.mjs";import{$b as z,Aa as v,Ab as c,Ba as q,Ca as k,Cb as R,Ha as Y,Kb as l,Lb as r,Mb as x,Nb as p,Ob as f,Pb as M,Rb as F,Tb as y,Wb as N,Xb as G,Zb as j,_b as B,bc as d,cc as E,cd as U,dc as T,dd as Q,ec as P,ed as K,fc as L,fd as J,ga as C,gb as o,gc as H,gd as Z,hb as w,hc as $,lc as A,nb as W,nd as ee,qa as O,ra as D,yb as u,za as b,zb as V}from"./chunk-37EVSRTU.mjs";import{a as I,h as g}from"./chunk-VVCT4QZE.mjs";var Me=["mainSVG"],Ee=a=>({"no-selection":a}),Te=a=>({"border-dark shadow":a});function Ie(a,m){a&1&&(l(0,"span"),d(1,"\u{1F451}"),r())}function Ve(a,m){if(a&1&&(l(0,"mat-icon",47),d(1),r(),d(2),u(3,Ie,2,0,"span",48)),a&2){let e=y().$implicit;o(),E(e.icon),o(),T(" ",e.label," "),o(),c("ngIf",e.isPremium)}}function Pe(a,m){if(a&1&&(l(0,"mat-tab",45),u(1,Ve,4,3,"ng-template",46),r()),a&2){let e=m.$implicit;N("label",e.label)}}function Ae(a,m){if(a&1&&(p(0),l(1,"div",52)(2,"div",53)(3,"div",54),q(),x(4,"svg",55),r()(),k(),l(5,"div",56)(6,"div",57),d(7),r(),l(8,"div",58),d(9),r()(),l(10,"a",59),d(11," Change Poster Dimensions "),r()(),f()),a&2){let e=y(2);o(2),c("wPX",60)("hPX",60),o(2),V("viewBox","0 0 "+e.selectedDimension.width+" "+e.selectedDimension.height)("width",e.selectedDimension.width)("height",e.selectedDimension.height),o(3),E(e.selectedDimension.type),o(2),P("",e.selectedDimension.width," X ",e.selectedDimension.height,"")}}function Xe(a,m){a&1&&(p(0),l(1,"strong"),d(2,"Theme"),r(),d(3," content goes here\u2026 "),f())}function Oe(a,m){a&1&&(p(0),l(1,"strong"),d(2,"Animation"),r(),d(3," content goes here\u2026 "),f())}function Ye(a,m){a&1&&(p(0),l(1,"strong"),d(2,"Background"),r(),d(3," content goes here\u2026 "),f())}function We(a,m){a&1&&(p(0),l(1,"strong"),d(2,"Margins"),r(),d(3," content goes here\u2026 "),f())}function Re(a,m){a&1&&(p(0),l(1,"strong"),d(2,"Bulk Create"),r(),d(3," content goes here\u2026 "),f())}function Ne(a,m){a&1&&(p(0),l(1,"strong"),d(2,"Replace"),r(),d(3," content goes here\u2026 "),f())}function Ge(a,m){a&1&&(p(0),l(1,"strong"),d(2,"Translate"),r(),d(3," content goes here\u2026 "),f())}function je(a,m){if(a&1&&(l(0,"div",49),p(1,50),u(2,Ae,12,8,"ng-container",51)(3,Xe,4,0,"ng-container",51)(4,Oe,4,0,"ng-container",51)(5,Ye,4,0,"ng-container",51)(6,We,4,0,"ng-container",51)(7,Re,4,0,"ng-container",51)(8,Ne,4,0,"ng-container",51)(9,Ge,4,0,"ng-container",51),f(),r()),a&2){let e=y();o(),c("ngSwitch",e.selectedTool),o(),c("ngSwitchCase","dimension"),o(),c("ngSwitchCase","theme"),o(),c("ngSwitchCase","animation"),o(),c("ngSwitchCase","background"),o(),c("ngSwitchCase","margins"),o(),c("ngSwitchCase","bulk"),o(),c("ngSwitchCase","replace"),o(),c("ngSwitchCase","language")}}function Be(a,m){if(a&1){let e=M();l(0,"li",60)(1,"button",61),F("click",function(){let i=b(e).index,s=y();return v(s.selectTab(i))}),d(2),r()()}if(a&2){let e=m.$implicit,n=m.index,i=y();o(),R("active",i.selectedPlatformIndex===n),o(),T(" ",e.platform," ")}}function ze(a,m){a&1&&(l(0,"div",67)(1,"div",68),x(2,"i",69),r()()),a&2&&(o(),c("wPX",30)("hPX",30))}function Le(a,m){if(a&1){let e=M();l(0,"div",62)(1,"div",63)(2,"input",64),$("ngModelChange",function(i){b(e);let s=y();return H(s.selectedDimension,i)||(s.selectedDimension=i),v(i)}),r(),l(3,"label",65)(4,"div",53)(5,"div",54),q(),x(6,"svg",55),r()(),k(),l(7,"div",56)(8,"div",57),d(9),r(),l(10,"div",58),d(11),r()(),u(12,ze,3,2,"div",66),r()()()}if(a&2){let e=m.$implicit,n=m.index,i=y();o(),c("ngClass",A(16,Te,i.isSelected(e))),o(),c("value",e),L("ngModel",i.selectedDimension),c("checked",i.isSelected(e))("id","box-"+n),o(),G("for","box-",n,""),o(),c("wPX",60)("hPX",60),o(2),V("viewBox","0 0 "+e.width+" "+e.height)("width",e.width)("height",e.height),o(3),T("",e.type," "),o(2),P("",e.width,"px X ",e.height,"px"),o(),c("ngIf",i.isSelected(e))}}var De=(()=>{class a{constructor(e,n,i,s,h,S){this.authService=e,this.renderer=n,this.elRef=i,this.fb=s,this.colorService=h,this.http=S,this.sizes=[{platform:"Instagram",entries:[{type:"square post",width:1080,height:1080},{type:"story",width:1080,height:1920},{type:"reel",width:1080,height:1920},{type:"carousel",width:1080,height:1080},{type:"story ad",width:1080,height:1920},{type:"feed ad",width:1080,height:1350},{type:"portrait post",width:1080,height:1350},{type:"landscape post",width:1080,height:566}]},{platform:"Facebook",entries:[{type:"post",width:1080,height:1080},{type:"story",width:1080,height:1920},{type:"feed ad",width:1080,height:1080},{type:"profile cover",width:851,height:315},{type:"event cover",width:1200,height:630},{type:"page cover",width:820,height:312},{type:"group cover",width:1640,height:856}]},{platform:"Google Ads",entries:[{type:"landscape image",width:1200,height:628},{type:"square image",width:1200,height:1200},{type:"portrait image",width:960,height:1200},{type:"landscape video",width:1920,height:1080},{type:"square video",width:1080,height:1080},{type:"portrait video",width:1080,height:1920},{type:"landscape logo",width:1200,height:300}]},{platform:"YouTube",entries:[{type:"video",width:1920,height:1080},{type:"thumbnail",width:1280,height:720},{type:"shorts",width:1080,height:1920},{type:"banner",width:2560,height:1440},{type:"profile photo",width:800,height:800},{type:"display ad",width:300,height:60},{type:"video ad",width:1920,height:1080}]},{platform:"Twitter (X)",entries:[{type:"post",width:1200,height:675},{type:"video",width:1920,height:1080},{type:"header",width:1500,height:500}]},{platform:"Pinterest",entries:[{type:"post",width:1e3,height:1500},{type:"idea pin",width:1080,height:1920},{type:"square",width:600,height:600},{type:"vertical post",width:600,height:900}]},{platform:"Other",entries:[{type:"Snapchat ad",width:1080,height:1920},{type:"Meme",width:1200,height:1200},{type:"Twitch banner",width:1200,height:480},{type:"Twitch overlay",width:1920,height:1080},{type:"Tumblr banner",width:3e3,height:1055},{type:"Reddit cover",width:1920,height:256},{type:"SoundCloud banner",width:2480,height:520},{type:"Snapchat filter",width:1080,height:1920},{type:"note header image",width:1280,height:670},{type:"WhatsApp icon",width:800,height:800},{type:"WhatsApp status",width:1080,height:1920},{type:"WhatsApp post",width:1080,height:1440}]}],this.selectedPlatformIndex=0,this.selectedDimension=this.sizes[0].entries[0],this.originalDimension=I({},this.selectedDimension),this.toolbarItems=[{key:"dimension",label:"Dimension",icon:"aspect_ratio",isPremium:!0},{key:"theme",label:"Theme",icon:"palette"},{key:"replace",label:"Replace",icon:"sync"},{key:"language",label:"Language",icon:"language"}],this.selectedTool=null,this.selectedIndex=null,this.postDetails={id:null,deleted:!1,download_counter:0,h:1024,w:1024,title:"image",info:"",info_show:!0,published:!1,track:!1,backgroundurl:"https://images.unsplash.com/photo-1536663094815-aa7e99627504?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",data:[{title:"Text 1",editable:!0,boxed:!0,text:{x:706,y:955,fs:40,fw:"normal",text:"Sample Text",type:"text",color:"#FFFFFF",fontStyle:{italic:!1,underline:!1},rotate:0,fontFamily:"Noto Sans Gujarati",textShadow:{enable:!1,color:"#FFFFFF",blur:0,offsetX:0,offsetY:0},backgroundColor:"#FFFFFF",textEffects:{enable:!1,gradient:{enable:!1,startColor:"#ffffff",endColor:"#000000",direction:"horizontal"},outline:{enable:!1,color:"#FFFFFF",width:2},glow:{enable:!1,color:"#ffffff",blur:0}},textAnchor:"start",alignmentBaseline:"start",letterSpacing:0,lineHeight:1.5,textTransformation:"none",opacity:100,originX:0,originY:0}}]},this.selectedElement=null,this.postDetailsForm=void 0,this.apiData={},this.colorSet=[],this.selectData={},this.controlSet=[],this.controlValues={rect:[{id:"border",title:"Border",icon:"fa-x-border",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"opacity",title:"Opacity",icon:"fa-x-opacity",active:!1},{id:"rotate",title:"Rotation",icon:"fa-x-rotation",active:!1},{id:"origin",title:"Origin",icon:"fa-x-origin",active:!1},{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}],circle:[{id:"border",title:"Border",icon:"fa-x-border",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"opacity",title:"Opacity",icon:"fa-x-opacity",active:!1},{id:"origin",title:"Origin",icon:"fa-x-origin",active:!1},{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}],ellipse:[{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"opacity",title:"opacity",icon:"fa-x-opacity",active:!1},{id:"originX",title:"originX",icon:"fa-",active:!1},{id:"originY",title:"originY",icon:"fa-",active:!1},{id:"rotate",title:"rotate",icon:"fa-",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}],line:[{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"opacity",title:"opacity",icon:"fa-x-opacity",active:!1},{id:"originX",title:"originX",icon:"fa-",active:!1},{id:"originY",title:"originY",icon:"fa-",active:!1},{id:"rotate",title:"rotate",icon:"fa-",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}],text:[{id:"edit",title:"Edit",icon:"fa-x-edit",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"fontSize",title:"Size",icon:"fa-x-font-size",active:!1},{id:"fontStyle",title:"Style",icon:"fa-italic",active:!1},{id:"textAlign",title:"Alignment",icon:"fa-align-left",active:!1},{id:"fontFamily",title:"Font",icon:"fa-font",active:!1},{id:"fontWeight",title:"Weight",icon:"fa-bold",active:!1},{id:"textShadow",title:"Shadow",icon:"fa-eye-slash",active:!1},{id:"textBackground",title:"Background",icon:"fa-x-text-background",active:!1},{id:"textEffects",title:"Effects",icon:"fa-magic",active:!1},{id:"letterSpacing",title:"Spacing",icon:"fa-arrows-h",active:!1},{id:"lineHeight",title:"Line Height",icon:"fa-arrows-v",active:!1},{id:"textTransformation",title:"Transformation",icon:"fa-text-width",active:!1},{id:"opacity",title:"Opacity",icon:"fa-x-opacity",active:!1},{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1},{id:"rotate",title:"Rotation",icon:"fa-x-rotation",active:!1}],image:[{id:"position",title:"Position",icon:"fa-x-position",active:!1},{id:"edit",title:"Edit",icon:"fa-x-edit",active:!1},{id:"dimension",title:"Dimension",icon:"fa-x-dimension",active:!1},{id:"fill",title:"Fill",icon:"fa-x-fill",active:!1},{id:"opacity",title:"opacity",icon:"fa-x-opacity",active:!1},{id:"origin",title:"Origin",icon:"fa-x-origin",active:!1},{id:"rotate",title:"rotate",icon:"fa-x-rotation",active:!1},{id:"url",title:"URL",icon:"fa-link",active:!1},{id:"control",title:"Control",icon:"fa-x-control",active:!1}]},this.positionShuffle=!1,this.rectData={title:"Rect",editable:!1,boxed:!0,rect:{x:30,y:30,width:100,height:100,fill:"#FFFFFF",opacity:1,originX:5,originY:5,rotate:0}},this.circleData={title:"Circle 1",editable:!1,boxed:!0,circle:{cx:50,cy:50,r:30,fill:"#FFFFFF",opacity:1,originX:0,originY:0}},this.ellipseData={title:"Ellipse 1",editable:!1,boxed:!0,ellipse:{cx:100,cy:100,rx:50,ry:30,fill:"green",opacity:.8,originX:0,originY:0,rotate:0}},this.lineData={title:"Line 1",editable:!1,boxed:!0,line:{x1:50,y1:50,x2:150,y2:150,stroke:"black",strokeWidth:2,opacity:1,originX:0,originY:0,rotate:0}},this.textData={title:"Text 1",editable:!0,boxed:!0,text:{x:100,y:100,fs:40,fw:"normal",text:"Sample Text",type:"text",color:"#FFFFFF",fontStyle:{italic:!1,underline:!1},rotate:0,fontFamily:"Noto Sans Gujarati",textShadow:{enable:!1,color:"#FFFFFF",blur:0,offsetX:0,offsetY:0},backgroundColor:"#FFFFFF",textEffects:{enable:!1,gradient:{enable:!1,startColor:"#ffffff",endColor:"#000000",direction:"horizontal"},outline:{enable:!1,color:"#FFFFFF",width:2},glow:{enable:!1,color:"#ffffff",blur:0}},textAnchor:"start",alignmentBaseline:"middle",letterSpacing:0,lineHeight:1.5,textTransformation:"none",opacity:100,originX:0,originY:0}},this.imageData={title:"Image 1",editable:!0,boxed:!0,image:{r:50,x:100,y:100,imageUrl:"assets/images/svg/upload-img.svg",borderColor:"#000000",borderWidth:2,shape:"circle",origin:"center",placeholder:"Placeholder Text",svgProperties:{fill:"#ffffff",stroke:"#000000",strokeWidth:2},rotate:0}}}ngOnInit(){return g(this,null,function*(){this.initForm();let e=yield this.authService.getUser();if(e)this.user=e,this.selectedDimension=this.sizes[0].entries[0],this.fullName=ae(e),this.applyDimension(),this.initForm();else return})}ngAfterViewInit(){}selectTab(e){this.selectedPlatformIndex=e}onTabChange(e){this.selectedIndex===e?(this.selectedIndex=-1,this.selectedTool=null):(this.selectedIndex=e,this.selectedTool=this.toolbarItems[e].key)}isSelected(e){return e.type===this.selectedDimension.type&&e.width===this.selectedDimension.width&&e.height===this.selectedDimension.height}get dimensionChanged(){return this.selectedDimension.width!==this.originalDimension.width||this.selectedDimension.height!==this.originalDimension.height}applyDimension(){this.originalDimension=I({},this.selectedDimension),this.mainSVG?.nativeElement&&this.renderer.setAttribute(this.mainSVG.nativeElement,"viewBox",`0 0 ${this.selectedDimension.width} ${this.selectedDimension.height}`);let e=document.getElementById("dimensionModal");e&&bootstrap.Modal.getInstance(e)?.hide()}getColors(e,n){return g(this,null,function*(){try{this.colorSet=yield this.colorService.getColors(e,n)}catch(i){console.error("Error updating colors:",i)}})}addData(e,n){let i=this.fb.group({});switch(e){case"rect":i=this.createRectFormGroup(n||this.rectData),this.controlSet.push(this.controlValues.rect);break;case"circle":i=this.createCircleFormGroup(n||this.circleData),this.controlSet.push(this.controlValues.circle);break;case"ellipse":i=this.createEllipseFormGroup(n||this.ellipseData),this.controlSet.push(this.controlValues.ellipse);break;case"line":i=this.createLineFormGroup(n||this.lineData),this.controlSet.push(this.controlValues.line);break;case"text":i=this.createTextFormGroup(n||this.textData),this.controlSet.push(this.controlValues.text);break;case"image":i=this.createImageFormGroup(n||this.imageData),this.controlSet.push(this.controlValues.image);break;default:console.error("Invalid type");break}i&&this.dataArray.push(i),this.postDetails=this.postDetailsForm?.value,this.selectedElement=this.dataArray.length}get dataArray(){return this.postDetailsForm?.get("data")}initForm(){this.postDetailsForm=this.fb.group({id:[this.postDetails.id],deleted:[this.postDetails.deleted,t.required],h:[this.postDetails.h,t.required],w:[this.postDetails.w,t.required],title:[this.postDetails.title,t.required],backgroundurl:[this.postDetails.backgroundurl,t.required],download_counter:[this.postDetails.download_counter,t.required],info:[this.postDetails.info||"",t.required],info_show:[this.postDetails.info_show||!1],published:[this.postDetails.published||!1],track:[this.postDetails.track||!1],data:this.fb.array([]),apiData:this.apiData}),this.postDetailsForm?.get("backgroundurl")?.valueChanges.subscribe(e=>g(this,null,function*(){this.postDetails.backgroundurl=e,yield this.getColors(e,20)})),this.postDetailsForm.valueChanges.subscribe(e=>g(this,null,function*(){this.postDetails=e})),this.getColors(this.postDetails.backgroundurl,10),this.postDetails.data.forEach(e=>{e.rect&&this.addData("rect",e),e.circle&&this.addData("circle",e),e.ellipse&&this.addData("ellipse",e),e.line&&this.addData("line",e),e.text&&this.addData("text",e),e.image&&this.addData("image",e)}),this.rebuild(this.postDetails.data)}createRectFormGroup(e){return this.fb.group({title:[e.title||"",t.required],editable:[e.editable||!1],boxed:[e.boxed||!1],rect:this.fb.group({x:[e.rect?.x||0,t.required],y:[e.rect?.y||0,t.required],rx:[e.rect?.rx||0,t.required],ry:[e.rect?.ry||0,t.required],width:[e.rect?.width||150,t.required],height:[e.rect?.height||150,t.required],fill:[e.rect?.fill||"#000000",t.required],opacity:[e.rect?.opacity||"1",t.required],originX:[e.rect?.originX||0,t.required],originY:[e.rect?.originY||0,t.required],rotate:[e.rect?.rotate||0,t.required],stroke:[e.rect?.stroke||"#000000",t.required],strokeWidth:[e.rect?.strokeWidth||1,t.required],strokeAlignment:[e.rect?.strokeAlignment||"center",t.required],fillOpacity:[e.rect?.fillOpacity||1,t.required],strokeOpacity:[e.rect?.strokeOpacity||1,t.required]})})}createCircleFormGroup(e){return this.fb.group({title:[e.title,t.required],editable:[e.editable],boxed:[e.boxed],circle:this.fb.group({cx:[e.circle?.cx,t.required],cy:[e.circle?.cy,t.required],r:[e.circle?.r,t.required],fill:[e.circle?.fill,t.required],fillOpacity:[e.circle?.fillOpacity||1,t.required],opacity:[e.circle?.opacity,t.required],originX:[e.circle?.originX,t.required],originY:[e.circle?.originY,t.required],stroke:[e.circle?.stroke||"#FFF",t.required],strokeWidth:[e.circle?.strokeWidth||0,t.required],strokeOpacity:[e.circle?.strokeOpacity||1,t.required],strokeAlignment:[e.circle?.strokeAlignment||"center",t.required]})})}createEllipseFormGroup(e){return this.fb.group({title:[e.title||"",t.required],editable:[e.editable||!1],boxed:[e.boxed||!1],ellipse:this.fb.group({cx:[e.ellipse?.cx||0,t.required],cy:[e.ellipse?.cy||0,t.required],rx:[e.ellipse?.rx||50,t.required],ry:[e.ellipse?.ry||50,t.required],fill:[e.ellipse?.fill||"#000000",t.required],fillOpacity:[e.ellipse?.fillOpacity||1,t.required],opacity:[e.ellipse?.opacity||1,t.required],originX:[e.ellipse?.originX||0,t.required],originY:[e.ellipse?.originY||0,t.required],rotate:[e.ellipse?.rotate||0,t.required],stroke:[e.ellipse?.stroke||"#000000",t.required],strokeWidth:[e.ellipse?.strokeWidth||1,t.required],strokeOpacity:[e.ellipse?.strokeOpacity||1,t.required],strokeAlignment:[e.ellipse?.strokeAlignment||"center",t.required]})})}createLineFormGroup(e){return this.fb.group({title:[e.title,t.required],editable:[e.editable],boxed:[e.boxed],line:this.fb.group({x1:[e.line?.x1,t.required],y1:[e.line?.y1,t.required],x2:[e.line?.x2,t.required],y2:[e.line?.y2,t.required],stroke:[e.line?.stroke,t.required],strokeWidth:[e.line?.strokeWidth,t.required],opacity:[e.line?.opacity,t.required],originX:[e.line?.originX,t.required],originY:[e.line?.originY,t.required],rotate:[e.line?.rotate,t.required]})})}createSvgPropertiesFormGroup(e){return this.fb.group({fill:[e.fill,t.required],stroke:[e.stroke,t.required],strokeWidth:[e.strokeWidth,t.required]})}createTextFormGroup(e){let n=this.fb.group({title:[e.title,t.required],editable:[e.editable],boxed:[e.boxed],text:this.fb.group({x:[e.text?.x,t.required],y:[e.text?.y,t.required],fs:[e.text?.fs,t.required],fw:[e.text?.fw,t.required],type:[e.text?.type||"text",t.required],text:[e.text?.text,t.required],color:[e.text?.color,t.required],fontStyle:this.fb.group({italic:[e.text?.fontStyle.italic,t.required],underline:[e.text?.fontStyle.underline,t.required]}),rotate:[e.text?.rotate,t.required],fontFamily:[e.text?.fontFamily,t.required],textShadow:this.fb.group({enable:[e.text?.textShadow.enable],color:[e.text?.textShadow.color],blur:[e.text?.textShadow.blur],offsetX:[e.text?.textShadow.offsetX],offsetY:[e.text?.textShadow.offsetY]}),backgroundColor:[e.text?.backgroundColor,t.required],textEffects:this.fb.group({enable:[!1],gradient:this.fb.group({enable:[!1],startColor:[e.text?.textEffects.gradient.startColor,t.required],endColor:[e.text?.textEffects.gradient.endColor,t.required],direction:[e.text?.textEffects.gradient.direction,t.required]}),outline:this.fb.group({enable:[!1],color:[e.text?.textEffects.outline.color,t.required],width:[e.text?.textEffects.outline.width,t.required]}),glow:this.fb.group({enable:[!1],color:[e.text?.textEffects.glow.color,t.required],blur:[e.text?.textEffects.glow.blur,t.required]})}),textAnchor:[e.text?.textAnchor],alignmentBaseline:[e.text?.textAnchor],letterSpacing:[e.text?.letterSpacing,t.required],lineHeight:[e.text?.lineHeight,t.required],textTransformation:[e.text?.textTransformation,t.required],opacity:[e.text?.opacity,t.required],originX:[e.text?.originX],originY:[e.text?.originY]})}),i=e.text?.controlName??Math.random().toString(36).substring(7),s=n.get("text");return e.text?.type==="select"&&this.addSelectControls(n,s,e,i),n.get("text.type")?.valueChanges.subscribe(h=>{h==="select"?this.addSelectControls(n,s,e,i):this.removeSelectControls(s)}),n}createImageFormGroup(e){return this.fb.group({title:[e.title,t.required],editable:[e.editable],boxed:[e.boxed],image:this.fb.group({r:[e.image?.r,t.required],x:[e.image?.x,t.required],y:[e.image?.y,t.required],imageUrl:[e.image?.imageUrl,t.required],borderColor:[e.image?.borderColor,t.required],borderWidth:[e.image?.borderWidth,t.required],shape:[e.image?.shape,t.required],origin:[e.image?.origin,t.required],placeholder:[e.image?.placeholder,t.required],svgProperties:this.createSvgPropertiesFormGroup(e.image?.svgProperties),rotate:[e.image?.rotate]})})}fetchDataFromAPI(e,n){return g(this,null,function*(){yield this.http.get(e).subscribe({next:i=>{this.apiData[n]=i.data||i,console.log(this.apiData[n])},error:()=>{}})})}syncData(e){return g(this,null,function*(){if(!(e instanceof se)){console.error("Invalid form group");return}let n=e.get("dependency")?.value,i=e.get("controlName")?.value,s=e.get("api")?.value;if(i&&s){if(s=s.endsWith("/")?s:`${s}/`,n){let h=this.selectData[n]?.control?.value;h&&(s+=h)}yield this.fetchDataFromAPI(s,i)}})}addSelectControls(e,n,i,s){this.selectData[s]={title:e.get("title")?.value||"",control:n.get("text"),api:i.text?.api,dependency:i.text?.dependency||"none",lang:i.text?.lang||"en"},n.contains("lang")||n.addControl("lang",new _(i.text?.lang,t.required)),n.contains("controlName")||n.addControl("controlName",new _(i.text?.controlName||s,t.required)),n.contains("dependency")||n.addControl("dependency",new _(i.text?.dependency||"none",t.required)),n.contains("api")||n.addControl("api",new _(i.text?.api,t.required))}rebuild(e){return g(this,null,function*(){this.dataArray.clear(),this.controlSet=[];for(let n=0;n<e.length;n++){let i=e[n];i.rect&&this.dataArray.push(this.createRectFormGroup(i)),i.rect&&this.controlSet.push(this.controlValues.rect),i.circle&&this.dataArray.push(this.createCircleFormGroup(i)),i.circle&&this.controlSet.push(this.controlValues.circle),i.ellipse&&this.dataArray.push(this.createEllipseFormGroup(i)),i.ellipse&&this.controlSet.push(this.controlValues.ellipse),i.line&&this.dataArray.push(this.createLineFormGroup(i)),i.line&&this.controlSet.push(this.controlValues.line),i.text&&this.dataArray.push(this.createTextFormGroup(i)),i.text&&this.controlSet.push(this.controlValues.text),i.image&&this.dataArray.push(this.createImageFormGroup(i)),i.image&&this.controlSet.push(this.controlValues.image)}if(this.postDetailsForm?.get("data")?.setValue(e),this.positionShuffle==!1)for(let n in this.selectData){let i=this.selectData[n];i.dependency==="none"?yield this.loadData(n,i.api):yield this.setupDependency(n,i)}})}loadData(e,n){this.apiData[e]||this.fetchDataFromAPI(n,e)}setupDependency(e,n){n.api.endsWith("/")||(n.api+="/");let i=n.dependency,s=this.selectData[i].control,h=`${n.api}${s.value}`;this.fetchDataFromAPI(h,e),s.valueChanges.subscribe(S=>g(this,null,function*(){let ke=`${n.api}${S}`;yield this.fetchDataFromAPI(ke,e),n.control.setValue(n.title,{emitEvent:!0})}))}removeSelectControls(e){e.contains("lang")&&e.removeControl("lang"),e.contains("controlName")&&e.removeControl("controlName"),e.contains("dependency")&&e.removeControl("dependency"),e.contains("api")&&e.removeControl("api")}static{this.\u0275fac=function(n){return new(n||a)(w(oe),w(W),w(Y),w(me),w(fe),w(te))}}static{this.\u0275cmp=O({type:a,selectors:[["app-frame-management"]],viewQuery:function(n,i){if(n&1&&j(Me,7),n&2){let s;B(s=z())&&(i.mainSVG=s.first)}},decls:52,vars:14,consts:[["mainSVG",""],[1,"position-absolute","h-100","w-100","d-flex","flex-column"],[1,"p-3","bg-dark","text-light","d-flex","align-items-center","border-bottom-1","border-light"],[1,"me-2",3,"routerLink"],["src","assets/images/svg/logo.svg","alt","","remSize","",3,"hPX"],[1,"m-0","me-2"],[1,"ms-auto"],[1,"container-fluid","flex-grow-1","p-0"],[1,"row","h-100","g-0"],[1,"col-md-4","col-lg-6","col","d-flex","flex-column","bg-light","bg-opacity-25"],[1,"d-flex","flex-column","flex-grow-1","w-100","position-relative"],[1,"position-relative","d-flex","flex-column","flex-grow-1"],[1,"position-absolute","w-100","h-100","d-flex","align-items-center","justify-content-center","p-3"],["viewBox","0 0 300 300","preserveAspectRatio","xMidYMid meet","svgDraw","",1,"svg-content","max-w-100-p","h-auto","max-h-100-p","img-fluid","mx-auto","d-block","bg-dark","rounded-4","shadow",3,"postDataSet"],[1,"col-md-8","col-lg-6","col"],[1,"content-wrapper","d-flex","flex-column","h-100"],[1,"content-header"],["mat-stretch-tabs","",1,"h-45-px",3,"selectedTabChange","dynamicHeight","selectedIndex","ngClass"],[3,"label",4,"ngFor","ngForOf"],[1,"content-body","flex-grow-1","position-relative"],[1,"position-absolute","overflow-y-auto","h-100","w-100","p-3","bg-light","bg-opacity-10"],[1,"row"],[1,"col-12"],["class","p-3",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","p-3","border","border-top-1","border-light"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"fa","fa-save","me-2"],[1,"btn","btn-secondary","mx-2",3,"click"],[1,"fa","fa-undo","me-2"],["id","dimensionModal","tabindex","-1","aria-labelledby","dimensionModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","dimensionModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","platformTab","role","tablist",1,"nav","nav-tabs","mb-3"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-content"],[1,"tab-pane","fade","show","active"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[3,"label"],["mat-tab-label",""],[1,"me-1"],[4,"ngIf"],[1,"p-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],["aria-label","Selected dimension preview",1,"d-flex","align-items-center","gap-3","mb-3","bg-light","bg-opacity-25","p-3","rounded-3"],["id","task-thumbnail-section","remSize","",1,"position-relative","rounded",3,"wPX","hPX"],[1,"position-absolute","h-100","w-100","d-flex","align-items-center","justify-content-center"],[1,"max-w-100","max-h-100","w-auto","h-auto","bg-light","rounded-3","border","border-secondary","bg-opacity-50"],["id","task-description-section"],["id","task-name",1,"fw-bold","small","text-capitalize"],["id","task-size",1,"text-muted","small"],["role","button","data-bs-toggle","modal","data-bs-target","#dimensionModal",1,"ms-auto","text-decoration-underline","small","cursor-pointer"],[1,"nav-item"],["type","button",1,"nav-link",3,"click"],[1,"col-md-4"],[1,"form-check","border","rounded-3","p-0","h-100","m-0",3,"ngClass"],["type","radio","name","dimension",1,"form-check-input","d-none",3,"ngModelChange","value","ngModel","checked","id"],["aria-label","Selected dimension preview",1,"form-check-label","d-flex","align-items-center","gap-3","bg-light","bg-opacity-25","p-3","rounded-3","position-relative","overflow-hidden",3,"for"],["class","position-absolute top-50 start-100 translate-middle pe-5",4,"ngIf"],[1,"position-absolute","top-50","start-100","translate-middle","pe-5"],["remSize","",1,"d-flex","flex-column","align-items-center","justify-content-center",3,"wPX","hPX"],[1,"fa","fa-circle-o","fa-2x"]],template:function(n,i){if(n&1){let s=M();l(0,"div",1)(1,"div",2)(2,"a",3),x(3,"img",4),r(),l(4,"h5",5),d(5,"Frame Management"),r(),l(6,"span",6),d(7),r()(),l(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12),q(),x(14,"svg",13,0),r()()()(),k(),l(16,"div",14)(17,"div",15)(18,"div",16)(19,"mat-tab-group",17),F("selectedTabChange",function(S){return b(s),v(i.onTabChange(S.index))}),u(20,Pe,2,1,"mat-tab",18),r()(),l(21,"div",19)(22,"div",20)(23,"div",21)(24,"div",22),u(25,je,10,9,"div",23),r()()()()()()()(),l(26,"div",24)(27,"button",25),F("click",function(){return b(s),v(!1)}),x(28,"i",26),d(29,"Save"),r(),l(30,"button",27),F("click",function(){return b(s),v(!1)}),x(31,"i",28),d(32,"Reset"),r()()(),l(33,"div",29)(34,"div",30)(35,"div",31)(36,"div",32)(37,"h5",33),d(38,"Select Poster Dimensions"),r(),x(39,"button",34),r(),l(40,"div",35)(41,"ul",36),u(42,Be,3,3,"li",37),r(),l(43,"div",38)(44,"div",39)(45,"div",40),u(46,Le,13,18,"div",41),r()()()(),l(47,"div",42)(48,"button",43),d(49,"Cancel"),r(),l(50,"button",44),F("click",function(){return b(s),v(i.applyDimension())}),d(51,"Resize"),r()()()()()}n&2&&(o(2),c("routerLink","/home"),o(),c("hPX",40),o(4),E(i.fullName),o(7),c("postDataSet",i.postDetailsForm.value),o(5),c("dynamicHeight",!1)("selectedIndex",i.selectedIndex>=0?i.selectedIndex:void 0)("ngClass",A(12,Ee,i.selectedIndex<0)),o(),c("ngForOf",i.toolbarItems),o(5),c("ngIf",i.selectedTool),o(17),c("ngForOf",i.sizes),o(4),c("ngForOf",i.sizes[i.selectedPlatformIndex]==null?null:i.sizes[i.selectedPlatformIndex].entries),o(4),c("disabled",!i.dimensionChanged))},dependencies:[U,Q,K,J,Z,ie,re,ce,le,de,ge,ne,xe,we,Fe,Se],styles:[".svg-wrapper[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;max-height:100%;display:flex;align-items:center;justify-content:center;overflow:hidden}.responsive-svg[_ngcontent-%COMP%]{width:100%;height:auto;display:block;max-width:100%;max-height:100%}"]})}}return a})();var He=[{path:"",component:De}],qe=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=D({type:a})}static{this.\u0275inj=C({imports:[X.forChild(He),X]})}}return a})();var wt=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=D({type:a})}static{this.\u0275inj=C({imports:[ee,qe,he,pe,ue,ye,be,_e,ve]})}}return a})();export{wt as FrameManagementModule};
