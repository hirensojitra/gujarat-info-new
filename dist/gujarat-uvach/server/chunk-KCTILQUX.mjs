import './polyfills.server.mjs';
import{a as L}from"./chunk-OFAF4QAB.mjs";import{a as I}from"./chunk-J4HSHKUV.mjs";import{a as k}from"./chunk-NRHGKVYS.mjs";import"./chunk-EJW5OMJX.mjs";import"./chunk-7HDQKCIK.mjs";import"./chunk-AJBY5M5H.mjs";import{A as V,B as G,C as R,c as T,e as C,g as A,h as x,m as j,q,t as D}from"./chunk-U6GZNWZS.mjs";import{A as N}from"./chunk-VQU2SKIF.mjs";import{$b as S,Cd as M,Fb as u,Hb as l,Jb as w,Sb as s,Tb as n,Ub as g,bc as v,la as p,mb as t,mc as a,nb as f,oc as y,qd as b,sd as E,va as F,wa as P,yc as h}from"./chunk-SNHROY6X.mjs";import"./chunk-VVCT4QZE.mjs";var _=r=>({"is-invalid":r});function z(r,d){r&1&&(s(0,"div",14),a(1," Current password is required. "),n())}function H(r,d){r&1&&(s(0,"div"),a(1,"New password is required."),n())}function J(r,d){if(r&1&&(s(0,"div"),a(1," Password must meet the following criteria: "),s(2,"ul")(3,"li"),a(4,"At least 8 characters"),n(),s(5,"li"),a(6,"At least one uppercase letter"),n(),s(7,"li"),a(8,"At least one lowercase letter"),n(),s(9,"li"),a(10,"At least one digit"),n(),s(11,"li"),a(12,"At least one special character"),n()()()),r&2){let o=v(2);t(3),w("text-success",o.newPasswordControl==null||o.newPasswordControl.errors==null?null:o.newPasswordControl.errors.hasMinLength),t(2),w("text-success",o.newPasswordControl==null||o.newPasswordControl.errors==null?null:o.newPasswordControl.errors.hasUpperCase),t(2),w("text-success",o.newPasswordControl==null||o.newPasswordControl.errors==null?null:o.newPasswordControl.errors.hasLowerCase),t(2),w("text-success",o.newPasswordControl==null||o.newPasswordControl.errors==null?null:o.newPasswordControl.errors.hasDigit),t(2),w("text-success",o.newPasswordControl==null||o.newPasswordControl.errors==null?null:o.newPasswordControl.errors.hasSpecialChar)}}function K(r,d){if(r&1&&(s(0,"div",14),u(1,H,2,0,"div",15)(2,J,13,10,"div",15),n()),r&2){let o=v();t(),l("ngIf",o.newPasswordControl==null||o.newPasswordControl.errors==null?null:o.newPasswordControl.errors.required),t(),l("ngIf",o.newPasswordControl==null||o.newPasswordControl.errors==null?null:o.newPasswordControl.errors.passwordStrength)}}function Q(r,d){r&1&&(s(0,"div",14),a(1," Confirm new password is required. "),n())}function W(r,d){r&1&&(s(0,"div",14),a(1," New password and confirmation do not match. "),n())}function X(r){let d=r.get("newPassword"),o=r.get("confirmNewPassword");return!d||!o?null:d.value!==o.value?{passwordsMismatch:!0}:null}var O=(()=>{class r{constructor(o,i,e){this.fb=o,this.authService=i,this.toast=e,this.loading=!1}ngOnInit(){this.changePasswordForm=this.fb.group({currentPassword:["",C.required],newPassword:["",[C.required,L]],confirmNewPassword:["",C.required]},{validators:X})}get newPasswordControl(){return this.changePasswordForm.get("newPassword")}get confirmNewPasswordControl(){return this.changePasswordForm.get("confirmNewPassword")}onChangePassword(){if(this.changePasswordForm.invalid){this.changePasswordForm.markAllAsTouched();return}this.loading=!0;let{currentPassword:o,newPassword:i}=this.changePasswordForm.value;this.authService.changePassword(o,i).subscribe({next:()=>{this.loading=!1,this.toast.show("Password changed successfully!",{class:"bg-success"}),this.changePasswordForm.reset()},error:e=>{this.loading=!1,this.toast.show(e.message||"Failed to change password.",{class:"bg-danger"})}})}static{this.\u0275fac=function(i){return new(i||r)(f(V),f(I),f(k))}}static{this.\u0275cmp=F({type:r,selectors:[["app-change-password"]],decls:24,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","currentPassword"],["type","password","id","currentPassword","formControlName","currentPassword",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control",3,"ngClass"],["for","confirmNewPassword"],["type","password","id","confirmNewPassword","formControlName","confirmNewPassword",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(i,e){if(i&1&&(s(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Change Password"),n()(),s(4,"div",3)(5,"form",4),S("ngSubmit",function(){return e.onChangePassword()}),s(6,"div",5)(7,"label",6),a(8,"Current Password"),n(),g(9,"input",7),u(10,z,2,0,"div",8),n(),s(11,"div",5)(12,"label",9),a(13,"New Password"),n(),g(14,"input",10),u(15,K,3,2,"div",8),n(),s(16,"div",5)(17,"label",11),a(18,"Confirm New Password"),n(),g(19,"input",12),u(20,Q,2,0,"div",8)(21,W,2,0,"div",8),n(),s(22,"button",13),a(23),n()()()()),i&2){let m,c;t(5),l("formGroup",e.changePasswordForm),t(4),l("ngClass",h(10,_,((m=e.changePasswordForm.get("currentPassword"))==null?null:m.invalid)&&((m=e.changePasswordForm.get("currentPassword"))==null?null:m.touched))),t(),l("ngIf",((c=e.changePasswordForm.get("currentPassword"))==null?null:c.invalid)&&((c=e.changePasswordForm.get("currentPassword"))==null?null:c.touched)),t(4),l("ngClass",h(12,_,(e.newPasswordControl==null?null:e.newPasswordControl.invalid)&&(e.newPasswordControl==null?null:e.newPasswordControl.touched))),t(),l("ngIf",(e.newPasswordControl==null?null:e.newPasswordControl.invalid)&&(e.newPasswordControl==null?null:e.newPasswordControl.touched)),t(4),l("ngClass",h(14,_,(e.confirmNewPasswordControl==null?null:e.confirmNewPasswordControl.invalid)&&(e.confirmNewPasswordControl==null?null:e.confirmNewPasswordControl.touched)||(e.changePasswordForm.errors==null?null:e.changePasswordForm.errors.passwordsMismatch))),t(),l("ngIf",(e.confirmNewPasswordControl==null?null:e.confirmNewPasswordControl.invalid)&&(e.confirmNewPasswordControl==null?null:e.confirmNewPasswordControl.touched)),t(),l("ngIf",(e.changePasswordForm.errors==null?null:e.changePasswordForm.errors.passwordsMismatch)&&(e.confirmNewPasswordControl==null?null:e.confirmNewPasswordControl.touched)),t(),l("disabled",e.changePasswordForm.invalid||e.loading),t(),y(" ",e.loading?"Changing...":"Change Password"," ")}},dependencies:[b,E,j,T,A,x,q,D]})}}return r})();var Y=[{path:"",component:O}],U=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=P({type:r})}static{this.\u0275inj=p({imports:[N.forChild(Y),N]})}}return r})();var ce=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=P({type:r})}static{this.\u0275inj=p({imports:[M,U,R,G]})}}return r})();export{ce as ChangePasswordModule};
