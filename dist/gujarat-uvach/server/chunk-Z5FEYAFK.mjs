import './polyfills.server.mjs';
import{b as x}from"./chunk-3VBPSQSZ.mjs";import{a as V}from"./chunk-W33DLK5C.mjs";import{A as L,C as T,N as P,g as E,h as m,i as M,j as R,k as j,m as k,q as _,t as I,y as A,z as G}from"./chunk-L5CJGTQH.mjs";import"./chunk-SMRXC6H5.mjs";import"./chunk-Z6IJNFE7.mjs";import{x as S,y as N,z as b}from"./chunk-6WLKSXTS.mjs";import{Ac as C,Eb as v,Ia as d,Ja as c,T as f,_a as u,ba as F,ca as h,eb as i,fb as o,gb as p,kb as y,rc as w,ub as a}from"./chunk-34FBJKO2.mjs";import"./chunk-VVCT4QZE.mjs";var D=e=>({"is-invalid":e}),q=(()=>{class e{constructor(n,r,t,s){this.fb=n,this.userService=r,this.router=t,this.toast=s,this.registrationForm=this.fb.group({username:["",[m.required,m.minLength(5),m.maxLength(20),m.pattern("^[a-zA-Z][a-zA-Z0-9_]*$")]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]],roles:["user"],emailVerified:[!1]})}ngOnInit(){}register(){let n=this.registrationForm.get("password")?.value;if(this.registrationForm.valid){let{username:r,password:t,email:s,emailVerified:l}=this.registrationForm.value,O=["user"];this.userService.registerUser(r,t,s,O,l).subscribe(g=>{g.error?this.toast.show(g.error,{class:"bg-danger"}):this.router.navigate(["/auth"])},g=>{console.error("Error registering user:",g)})}else this.markFormGroupTouched(this.registrationForm);this.registrationForm.get("password")?.setValue(n)}markFormGroupTouched(n){Object.keys(n.controls).forEach(r=>{let t=n.controls[r];t.markAsTouched(),t instanceof j&&this.markFormGroupTouched(t)})}static{this.\u0275fac=function(r){return new(r||e)(c(A),c(x),c(S),c(V))}}static{this.\u0275cmp=F({type:e,selectors:[["app-register"]],decls:29,vars:9,consts:[[1,"container","d-flex","align-items-center","justify-content-center","min-vh-100"],[1,"card","shadow","p-4",2,"width","400px","border-radius","15px"],[1,"text-center","mb-4"],["src","assets/images/svg/logo.svg","alt","logo",2,"width","60px"],[1,"mt-3"],[3,"ngSubmit","formGroup"],["type","hidden","formControlName","roles"],[1,"form-group","mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username","placeholder","Enter your username",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control",3,"ngClass"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-dark","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"text-decoration-none",3,"routerLink"]],template:function(r,t){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),p(3,"img",3),i(4,"h4",4),a(5,"Create an account"),o(),i(6,"p"),a(7,"Please fill in the details to sign up."),o()(),i(8,"form",5),y("ngSubmit",function(){return t.register()}),p(9,"input",6),i(10,"div",7)(11,"label",8),a(12,"Username"),o(),p(13,"input",9),o(),i(14,"div",7)(15,"label",10),a(16,"E-Mail Address"),o(),p(17,"input",11),o(),i(18,"div",7)(19,"label",12),a(20,"Password"),o(),p(21,"input",13),o(),i(22,"button",14),a(23,"Sign Up"),o()(),i(24,"div",15)(25,"p"),a(26,"Already have an account? "),i(27,"a",16),a(28,"Sign In"),o()()()()()),r&2){let s,l;d(8),u("formGroup",t.registrationForm),d(5),u("ngClass",v(5,D,((s=t.registrationForm.get("username"))==null?null:s.invalid)&&((s=t.registrationForm.get("username"))==null?null:s.touched))),d(4),u("ngClass",v(7,D,((l=t.registrationForm.get("email"))==null?null:l.invalid)&&((l=t.registrationForm.get("email"))==null?null:l.touched))),d(5),u("disabled",t.registrationForm.invalid),d(5),u("routerLink","/auth/login")}},dependencies:[w,N,k,E,M,R,_,I,T]})}}return e})();var Z=[{path:"",component:q,data:{title:"PostNew | Register",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, portal",robots:"index, follow",image:"https://test-ssr-hiren.netlify.app/assets/images/jpg/register.jpg"}}],z=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=f({imports:[b.forChild(Z),b]})}}return e})();var me=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=f({imports:[C,z,G,L,P]})}}return e})();export{me as RegisterModule};
