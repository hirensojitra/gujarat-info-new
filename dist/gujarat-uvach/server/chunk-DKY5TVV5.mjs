import './polyfills.server.mjs';
import{a as L}from"./chunk-TOTDYX4D.mjs";import{a as x}from"./chunk-XQKX43WP.mjs";import{a as I}from"./chunk-Y5AEMKTH.mjs";import{f as R,r as D}from"./chunk-SIBFRYWF.mjs";import"./chunk-6R42DWSS.mjs";import"./chunk-NLHNYVOG.mjs";import{c as y,d as p,f as k,g as M,k as N,o as C,r as F,x as E,y as j,z as P}from"./chunk-G2SKTGLZ.mjs";import"./chunk-KKQ7C2Q6.mjs";import{Ea as t,Fa as r,Ga as d,K as c,Ka as v,Lb as b,Q as h,R as u,Sa as n,na as m,nc as S,oa as a,oc as w,qc as f,ya as l}from"./chunk-HA7GHLLK.mjs";import"./chunk-VVCT4QZE.mjs";var A=(()=>{class e{constructor(s,i,o,g,T){this.fb=s,this.userService=i,this.authService=o,this.router=g,this.toast=T,this.isLoading=!1,this.loginForm=this.fb.group({username:["",[p.required]],password:["",[p.required,p.minLength(6)]]})}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0;let{username:s,password:i}=this.loginForm.value;this.authService.loginUser(s,i).subscribe({next:o=>{o.token&&(console.log(o),this.userService.setUser(o),this.authService.setToken(o.token),this.router.navigate(["/dashboard"]))},error:o=>{this.isLoading=!1,this.toast.show(o.message||"Login failed",{class:"bg-danger"})},complete:()=>{this.isLoading=!1}})}static{this.\u0275fac=function(i){return new(i||e)(a(E),a(L),a(x),a(S),a(I))}}static{this.\u0275cmp=h({type:e,selectors:[["app-login"]],decls:30,vars:4,consts:[[1,"text-center","mb-4"],["src","assets/images/svg/logo.svg","alt","logo",2,"width","60px"],[1,"mt-3"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username","placeholder","Enter your username",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Password",1,"form-control"],[1,"invalid-feedback"],[1,"form-group","form-check","mb-3"],["type","checkbox","id","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],[1,"float-end","text-decoration-none",3,"routerLink"],["type","submit",1,"btn","btn-dark","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"text-decoration-none",3,"routerLink"]],template:function(i,o){i&1&&(t(0,"div",0),d(1,"img",1),t(2,"h4",2),n(3,"Welcome to PostNew"),r(),t(4,"p"),n(5,"Please enter your details to sign in."),r()(),t(6,"form",3),v("ngSubmit",function(){return o.onSubmit()}),t(7,"div",4)(8,"label",5),n(9,"Username"),r(),d(10,"input",6),r(),t(11,"div",4)(12,"label",7),n(13,"Password"),r(),d(14,"input",8),t(15,"div",9),n(16,"Password must be at least 6 characters."),r()(),t(17,"div",10),d(18,"input",11),t(19,"label",12),n(20,"Remember me"),r(),t(21,"a",13),n(22,"Forgot password?"),r()(),t(23,"button",14),n(24,"Sign in"),r()(),t(25,"div",15)(26,"p"),n(27,"Don't have an account yet? "),t(28,"a",16),n(29,"Sign Up"),r()()()),i&2&&(m(6),l("formGroup",o.loginForm),m(15),l("routerLink","/auth/forgot-password"),m(2),l("disabled",o.loginForm.invalid),m(5),l("routerLink","/auth/register"))},dependencies:[w,N,y,k,M,C,F,R]})}}return e})();var V=[{path:"",component:A,data:{title:"PostNew | Authentication",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, authentication, portal",robots:"index, follow"}}],G=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=c({imports:[f.forChild(V),f]})}}return e})();var oe=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=c({imports:[b,G,j,P,D]})}}return e})();export{oe as LoginModule};
