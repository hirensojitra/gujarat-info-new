import './polyfills.server.mjs';
import{a as ie}from"./chunk-HY5OT3V6.mjs";import{a as te}from"./chunk-H6SEWYC5.mjs";import{e as W,f as X,g as Y,h as Z,p as ee}from"./chunk-QZQW7QAL.mjs";import{c as U,d as _,f as G,g as q,k as R,o as $,r as H,s as P,t as B,u as z,w as J,x as K,y as Q}from"./chunk-OZOCKEKY.mjs";import{A as x,Aa as E,Ba as p,Bb as A,Ca as h,G as w,H as S,Ja as o,Ka as c,La as N,M as g,N as b,S as I,ac as j,ca as r,da as k,dc as O,fc as y,na as f,pa as d,tb as L,ub as V,va as a,wa as t,xa as u}from"./chunk-DQOPYUJW.mjs";function de(i,s){if(i&1&&(a(0,"option",44),o(1),t()),i&2){let e=s.$implicit;d("value",e.id),r(),c(e.name)}}function se(i,s){if(i&1&&(a(0,"div",37)(1,"div",38)(2,"label",39),o(3,"District"),t()(),a(4,"div",40)(5,"select",41)(6,"option",42),o(7,"Select a district"),t(),f(8,de,2,2,"option",43),t()()()),i&2){let e=h();r(5),d("options",e.districts),r(3),d("ngForOf",e.districts)}}function me(i,s){if(i&1){let e=E();a(0,"button",45),p("click",function(){g(e);let n=h();return b(n.openDeletedModal())}),u(1,"i",46),o(2,"Restore"),t()}}function ce(i,s){if(i&1){let e=E();a(0,"tr",47)(1,"td"),o(2),t(),a(3,"td"),o(4),t(),a(5,"td"),o(6),t(),a(7,"td"),o(8),t(),a(9,"td",48)(10,"button",49),p("click",function(){let n=g(e).$implicit,m=h();return b(m.editTaluka(n))}),u(11,"i",50),t(),a(12,"button",51),p("click",function(){let n=g(e).$implicit,m=h();return b(m.deleteTaluka(n.id))}),u(13,"i",52),t()()()}if(i&2){let e=s.$implicit,l=s.index;r(2),c(l+1),r(2),c(e.id),r(2),c(e.name),r(2),c(e.gu_name)}}function ue(i,s){i&1&&u(0,"input",53)}function pe(i,s){if(i&1&&(a(0,"div",54)(1,"div",38)(2,"label",55),o(3,"Taluka ID"),t()(),a(4,"div",40)(5,"div",56),o(6),u(7,"input",57),t()()()),i&2){let e,l=h();r(6),N(" ",(e=l.currentForm.get("id"))==null?null:e.value," ")}}function he(i,s){if(i&1&&(a(0,"option",44),o(1),t()),i&2){let e=s.$implicit;d("value",e.id),r(),c(e.name)}}function ke(i,s){if(i&1&&(a(0,"select",61)(1,"option",42),o(2,"Select a district"),t(),f(3,he,2,2,"option",43),t()),i&2){let e=h(2);r(3),d("ngForOf",e.districts)}}function fe(i,s){if(i&1&&(a(0,"div",62)(1,"div",63),o(2),t(),u(3,"input",64),t()),i&2){let e=h(2);r(2),c(e.selectedDistrict==null?null:e.selectedDistrict.name)}}function _e(i,s){if(i&1&&(a(0,"div",54)(1,"div",38)(2,"label",58),o(3,"District"),t()(),a(4,"div",40),f(5,ke,4,1,"select",59)(6,fe,4,1,"div",60),t()()),i&2){let e=h();r(5),d("ngIf",e.needUpdate),r(),d("ngIf",!e.needUpdate)}}function ve(i,s){i&1&&(a(0,"div",54)(1,"div",38)(2,"label",65),o(3,"Taluka Name"),t()(),a(4,"div",40),u(5,"input",66),t()())}function ge(i,s){i&1&&(a(0,"div",54)(1,"div",38)(2,"label",67),o(3,"Gujarati Name"),t()(),a(4,"div",40),u(5,"input",68),t()())}function be(i,s){if(i&1){let e=E();a(0,"tr")(1,"th",69),o(2),t(),a(3,"td"),o(4),t(),a(5,"td"),o(6),t(),a(7,"td"),o(8),t(),a(9,"td",48)(10,"button",70),p("click",function(){let n=g(e).$implicit,m=h();return b(m.toggleTalukaActive(n.id))}),o(11,"Restore"),t()()()}if(i&2){let e=s.$implicit,l=s.index;r(2),c(l+1),r(2),c(e.id),r(2),c(e.name),r(2),c(e.gu_name)}}var le=(()=>{class i{constructor(e,l,n,m,D,C,v,T){this.districtService=e,this.talukaService=l,this.fb=n,this.DS=m,this.el=D,this.toastService=C,this.router=v,this.route=T,this.talukas=[],this.districts=[],this.newTaluka={id:"",name:""},this.needUpdate=!1,this.needAdd=!1,this.talukaDeletedModalTitle="Deleted Taluka";let M=this.fb.group({name:["",[_.required]],gu_name:[""],district_id:["",_.required],is_deleted:[!1]});this.talukaForm=M;let oe=this.fb.group({id:["",[_.required]],name:["",_.required],gu_name:[""],district_id:["",_.required],is_deleted:[!1]});this.talukaUpdateForm=oe,this.currentForm=M,this.filterTaluka=this.fb.group({district:["",_.required]}),this.route.queryParams.subscribe(re=>{let F=re.district;F&&(this.paramDist=F)})}ngOnInit(){}ngAfterViewInit(){this.loadDistrict(),this.filterTaluka.get("district")?.valueChanges.subscribe(v=>{if(!v)return this.selectedDistrict=null,!1;this.districtService.getDistrictById(v).subscribe(T=>{T&&(this.loadTaluka(),this.selectedDistrict=T,this.loadDeletedTalukaLength())})}),this.talukaModalElement=this.el.nativeElement.querySelector("#talukaModal"),this.talukaModalOptions={backdrop:!0,keyboard:!1},this.talukaModal=new bootstrap.Modal(this.talukaModalElement,this.talukaModalOptions);let e=()=>{this.currentForm.get("district_id")?.setValue(this.selectedDistrict?.id)},l=()=>{this.talukaData=null,this.talukaModalTitle="",this.currentForm.reset(),this.talukaUpdateForm.reset(),this.talukaForm.reset(),this.needUpdate=!1,this.needAdd=!1},n=v=>{console.log(v)};this.talukaModalElement.addEventListener("show.bs.modal",e),this.talukaModalElement.addEventListener("hidden.bs.modal",l),this.talukaModalElement.addEventListener("hide.bs.modal",n),this.talukaDeletedModalElement=this.el.nativeElement.querySelector("#talukaDeletedModal"),this.talukaDeletedModalOptions={backdrop:!0,keyboard:!1},this.talukaDeletedModal=new bootstrap.Modal(this.talukaDeletedModalElement,this.talukaDeletedModalOptions);let m=()=>{},D=()=>{},C=()=>{};this.talukaDeletedModalElement.addEventListener("show.bs.modal",m),this.talukaDeletedModalElement.addEventListener("hidden.bs.modal",D),this.talukaDeletedModalElement.addEventListener("hide.bs.modal",C)}editTaluka(e){this.currentForm=this.talukaUpdateForm,this.currentForm.reset(),this.talukaData=e,this.talukaModalTitle="Edit "+e.name,this.currentForm.get("id")?.setValue(e.id),this.currentForm.get("name")?.setValue(e.name),this.currentForm.get("gu_name")?.setValue(e.gu_name),this.currentForm.get("district_id")?.setValue(e.district_id),this.talukaModal.show(),this.needUpdate=!0}addTaluka(){console.log(this.talukaForm.controls),this.currentForm=this.talukaForm,this.currentForm.reset(),this.needAdd=!0,this.currentForm.get("is_deleted")?.setValue(!1),this.currentForm.get("district_id")?.setValue(this.selectedDistrict.id),this.talukaModalTitle="Add Taluka",this.talukaModal.show()}saveTaluka(){if(this.DS.markFormGroupTouched(this.currentForm),this.currentForm.valid)this.needUpdate&&this.updateTaluka(this.currentForm.value),this.needAdd&&this.addNewTaluka(),this.talukaModal.hide();else{console.log(this.currentForm.value);let e=this.needUpdate?"Please enter valid data to update 'Taluka'":"Please enter valid data for 'New Taluka'";this.toastService.show(e,{class:"bg-danger"})}}loadDistrict(){this.districtService.getDistrict().subscribe(e=>{this.districts=e,e.length&&(e.sort((l,n)=>(l.name||"").localeCompare(n.name||"")),this.selectedDistrict=this.paramDist!==void 0&&e.find(l=>l.id===this.paramDist)||e[0],this.filterTaluka.get("district")?.setValue(this.selectedDistrict?.id))})}loadTaluka(){this.talukaService.getTalukaByDistrict(this.filterTaluka.get("district")?.value).subscribe(e=>{e.sort((l,n)=>(l.name||"").localeCompare(n.name||"")),this.talukas=e})}addNewTaluka(){console.log(this.currentForm.value),this.talukaService.addTaluka(this.currentForm.value).subscribe(e=>{console.log("Taluka added successfully:",e),this.loadTaluka()})}deleteTaluka(e){this.talukaService.deleteTaluka(e).subscribe(l=>{console.log("Taluka deleted successfully:",l),this.loadTaluka(),this.loadDeletedTalukaLength()})}updateTaluka(e){let l=e.id,n={name:e.name,gu_name:e.gu_name,district_id:e.district_id,is_deleted:e.is_deleted||!1};console.log(l,n),this.talukaService.updateTaluka(l,n).subscribe(m=>{console.log("Taluka updated successfully:",m),this.loadTaluka()},m=>{console.error("Error updating taluka:",m)})}loadDeletedTalukaLength(){let e=this.selectedDistrict?.id;e&&this.talukaService.getDeletedTalukaLength(e).subscribe(l=>{this.deletedTalukaCount=l.deletedtalukacount,l.deletedTalukasLength||this.talukaDeletedModal.hide()},l=>{console.error("Error loading deleted talukas count:",l)})}loadDeletedTaluka(){let e=this.selectedDistrict?.id;this.talukaService.getDeletedTaluka(e).subscribe(l=>{console.log(l),this.deletedTalukaList=l},l=>{console.error("Error loading deleted talukas:",l)})}toggleTalukaActive(e){this.talukaService.toggleTalukaActive(e).subscribe(l=>{this.loadDeletedTalukaLength(),this.loadDeletedTaluka(),this.loadTaluka()},l=>{console.error("Error toggling taluka active state:",l)})}openDeletedModal(){this.loadDeletedTaluka(),this.talukaDeletedModal.show()}static{this.\u0275fac=function(l){return new(l||i)(k(Y),k(Z),k(J),k(ie),k(I),k(te),k(O),k(j))}}static{this.\u0275cmp=w({type:i,selectors:[["app-taluka"]],decls:72,vars:14,consts:[[1,"h-100","overflow-only-y","d-flex","flex-column"],[1,"container","pt-3"],["action","",1,"row","g-2","align-items-center",3,"formGroup"],[1,"col-lg-4","col-6"],["class","form-group row g-2 align-items-center",4,"ngIf"],[1,"col-auto","ms-auto"],[1,"btn","btn-success","me-2",3,"click"],[1,"fa","fa-plus","me-2"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"flex-grow-1","p-3","m-3","bg-white"],[1,"h-100","container","position-relative","overflow-y-auto","p-0"],[1,"position-absolute","h-100","w-100","table-responsive"],[1,"table","w-100","m-0","max-h-100-p","max-w-100-p","bg-white","text-nowrap"],[1,"sticky-top","bg-light"],[1,"text-center",3,"width"],["class","align-middle",4,"ngFor","ngForOf"],["id","talukaModal","tabindex","-1","aria-labelledby","talukaModalLabel",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","p-0","my-0","modal-dialog-centered","position-relative","h-100"],[1,"modal-content"],[1,"modal-header","bg-success","py-2"],["id","talukaModalLabel",1,"modal-title","text-white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn",3,"click"],[1,"fa","fa-close","btn-flat","text-white"],[1,"modal-body","h-100","overflow-auto","py-0","my-3","d-flex","flex-column"],[1,"mt-3",3,"formGroup"],["type","hidden","placeholder","","formControlName","is_deleted",4,"ngIf"],["class","form-group row g-2 align-items-center mb-3",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-md","btn-success","ms-2",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["id","talukaDeletedModal","tabindex","-1","aria-labelledby","talukaDeletedModalLabel",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","modal-xl","p-0","my-0","modal-dialog-centered","position-relative","h-100"],["id","talukaDeletedModalLabel",1,"modal-title","text-white"],[1,"table"],["scope","col"],["scope","col",1,"w-80-px","text-center"],[4,"ngFor","ngForOf"],[1,"form-group","row","g-2","align-items-center"],[1,"col-4","text-end"],["for","district",1,"form-label","mb-0"],[1,"col-8"],["id","district","formControlName","district","selectDropdown","",1,"form-select",3,"options"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","me-2"],[1,"align-middle"],[1,"text-center"],[1,"btn","btn-flat","btn-md","me-2",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-flat","btn-md",3,"click"],[1,"fa","fa-trash"],["type","hidden","placeholder","","formControlName","is_deleted"],[1,"form-group","row","g-2","align-items-center","mb-3"],["for","taluka-id",1,"form-label","mb-0"],[1,"form-control","bg-light"],["type","hidden","placeholder","","formControlName","id"],["for","district_id",1,"form-label","mb-0"],["class","form-select","id","district_id","formControlName","district_id",4,"ngIf"],["class","div",4,"ngIf"],["id","district_id","formControlName","district_id",1,"form-select"],[1,"div"],[1,"form-control"],["type","hidden","placeholder","","formControlName","district_id"],["for","taluka-name",1,"form-label","mb-0"],["type","text","placeholder","","formControlName","name","id","taluka-name",1,"form-control"],["for","gu_name",1,"form-label","mb-0"],["type","text","placeholder","","formControlName","gu_name","id","gu_name",1,"form-control"],["scope","row"],[1,"btn","btn-success","btn-sm",3,"click"]],template:function(l,n){l&1&&(a(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3),f(4,se,9,2,"div",4),t(),a(5,"div",5)(6,"button",6),p("click",function(){return n.addTaluka()}),u(7,"i",7),o(8,"Add Taluka"),t(),f(9,me,3,0,"button",8),t()()(),a(10,"div",9)(11,"div",10)(12,"div",11)(13,"table",12)(14,"thead",13)(15,"tr")(16,"th"),o(17,"No."),t(),a(18,"th"),o(19,"Code"),t(),a(20,"th"),o(21,"Name"),t(),a(22,"th"),o(23,"Gujarati Name"),t(),a(24,"th",14),o(25,"Action"),t()()(),a(26,"tbody"),f(27,ce,14,4,"tr",15),t()()()()()(),a(28,"div",16)(29,"div",17)(30,"div",18)(31,"div",19)(32,"h5",20),o(33),t(),a(34,"button",21),p("click",function(){return n.talukaModal.hide()}),u(35,"i",22),t()(),a(36,"div",23)(37,"form",24),f(38,ue,1,0,"input",25)(39,pe,8,1,"div",26)(40,_e,7,2,"div",26)(41,ve,6,0,"div",26)(42,ge,6,0,"div",26),t()(),a(43,"div",27)(44,"button",28),p("click",function(){return n.saveTaluka()}),o(45,"Save"),t(),a(46,"button",29),p("click",function(){return n.talukaModal.hide(!1)}),o(47,"Close"),t()()()()(),a(48,"div",30)(49,"div",31)(50,"div",18)(51,"div",19)(52,"h5",32),o(53),t(),a(54,"button",21),p("click",function(){return n.talukaDeletedModal.hide()}),u(55,"i",22),t()(),a(56,"div",23)(57,"table",33)(58,"thead")(59,"tr")(60,"th",34),o(61,"No."),t(),a(62,"th",34),o(63,"ID"),t(),a(64,"th",34),o(65,"Name"),t(),a(66,"th",34),o(67,"Gujarati Name"),t(),a(68,"th",35),o(69,"Actions"),t()()(),a(70,"tbody"),f(71,be,12,4,"tr",36),t()()()()()()),l&2&&(r(2),d("formGroup",n.filterTaluka),r(2),d("ngIf",n.filterTaluka.get("district")),r(5),d("ngIf",n.deletedTalukaCount>0),r(15),d("width",100),r(3),d("ngForOf",n.talukas),r(6),c(n.talukaModalTitle),r(4),d("formGroup",n.currentForm),r(),d("ngIf",n.currentForm.get("is_deleted")!==null),r(),d("ngIf",n.currentForm.get("id")!==null&&n.needUpdate),r(),d("ngIf",n.currentForm.get("district_id")),r(),d("ngIf",n.currentForm.get("name")!==null),r(),d("ngIf",n.currentForm.get("gu_name")!==null),r(11),c(n.talukaDeletedModalTitle),r(18),d("ngForOf",n.deletedTalukaList))},dependencies:[L,V,W,X,R,B,z,U,P,G,q,$,H]})}}return i})();var Te=[{path:"",component:le,data:{title:"Taluka",breadcrumb:"Taluka"}}],ne=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275mod=S({type:i})}static{this.\u0275inj=x({imports:[y.forChild(Te),y]})}}return i})();var $e=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275mod=S({type:i})}static{this.\u0275inj=x({imports:[A,ne,ee,Q,K]})}}return i})();export{$e as a};
