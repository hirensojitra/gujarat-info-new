import './polyfills.server.mjs';
import{a as D}from"./chunk-YS7AQAUF.mjs";import{a as j}from"./chunk-R5OO5VAA.mjs";import"./chunk-WNVNUZNF.mjs";import{r as A}from"./chunk-QEZXZY2B.mjs";import"./chunk-AJBY5M5H.mjs";import"./chunk-WQAH27MK.mjs";import{a as F}from"./chunk-PQHBR4RA.mjs";import"./chunk-ZOSFQCFM.mjs";import{a as L}from"./chunk-SBPX72W3.mjs";import{c as E,f as T,j as x,y as R,z as W}from"./chunk-DXF4L3C7.mjs";import{a as k}from"./chunk-D7IAKCP3.mjs";import{A as S,y as N}from"./chunk-W6Z6YZO4.mjs";import{Bb as l,Lb as s,M as v,Mb as n,Sb as C,Ub as _,cc as m,ec as f,fd as b,gc as w,ha as c,hb as a,hc as g,ib as d,ic as h,od as I,ra as M,sa as u,t as P,zb as y}from"./chunk-MA44MDZG.mjs";import"./chunk-VVCT4QZE.mjs";function O(e,V){if(e&1&&(s(0,"div",6),m(1),n()),e&2){let i=_();a(),f(" ",i.errorMessage,`
`)}}var q=(()=>{class e{constructor(i,o,t,p,r){this.router=i,this.registerService=o,this.authService=t,this.toast=p,this.cookie=r,this.isLoading=!1,this.errorMessage="",this.newPassword="",this.confirmPassword=""}ngOnInit(){this.userId=this.cookie.get("google_user_id"),this.userId||this.router.navigate(["/"])}onSubmitNewPassword(){if(this.newPassword!==this.confirmPassword){this.errorMessage="Passwords do not match";return}this.isLoading=!0,this.registerService.setPassword(this.userId,this.newPassword).pipe(v(i=>(this.isLoading=!1,this.toast.show(i.message||"Could not set password",{class:"bg-danger"}),P(null)))).subscribe(i=>{this.isLoading=!1,i?.token?(this.cookie.delete("requires_password"),this.cookie.delete("google_user_id"),this.authService.setToken(i.token),this.router.navigate(["/home"])):this.errorMessage="Unexpected server response"})}static{this.\u0275fac=function(o){return new(o||e)(d(N),d(D),d(L),d(F),d(k))}}static{this.\u0275cmp=M({type:e,selectors:[["app-set-password"]],decls:13,vars:7,consts:[[1,"mb-3","text-center"],[1,"form-group","mb-3"],[1,"form-label"],["type","password",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","alert alert-danger py-1",4,"ngIf"],[1,"btn","btn-primary","w-100",3,"click","disabled"],[1,"alert","alert-danger","py-1"]],template:function(o,t){o&1&&(s(0,"h5",0),m(1,"Set Your Password"),n(),s(2,"div",1)(3,"label",2),m(4,"New Password"),n(),s(5,"input",3),h("ngModelChange",function(r){return g(t.newPassword,r)||(t.newPassword=r),r}),n()(),s(6,"div",1)(7,"label",2),m(8,"Confirm Password"),n(),s(9,"input",3),h("ngModelChange",function(r){return g(t.confirmPassword,r)||(t.confirmPassword=r),r}),n()(),y(10,O,2,1,"div",4),s(11,"button",5),C("click",function(){return t.onSubmitNewPassword()}),m(12),n()),o&2&&(a(5),w("ngModel",t.newPassword),l("disabled",t.isLoading),a(4),w("ngModel",t.confirmPassword),l("disabled",t.isLoading),a(),l("ngIf",t.errorMessage),a(),l("disabled",t.isLoading),a(),f(" ",t.isLoading?"Saving...":"Save Password",`
`))},dependencies:[b,E,T,x]})}}return e})();var U=[{path:"",component:q,data:{title:"PostNew | Set Password",description:"Set your password for PostNew portal to access services",keywords:"PostNew, set password, authentication, portal",robots:"index, follow"},canActivate:[j]}],G=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=c({imports:[S.forChild(U),S]})}}return e})();var le=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=c({imports:[I,G,R,W,A]})}}return e})();export{le as SetPasswordModule};
