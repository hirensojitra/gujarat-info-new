import './polyfills.server.mjs';
import{b as G}from"./chunk-MFC5SG6X.mjs";import{a as M}from"./chunk-Z2X5LUYQ.mjs";import{f as D,r as T}from"./chunk-SIBFRYWF.mjs";import"./chunk-6R42DWSS.mjs";import"./chunk-FOCVEZPO.mjs";import"./chunk-NLHNYVOG.mjs";import{c as E,d as p,f as N,g as x,k as w,o as j,r as I,x as P,y as L,z as A}from"./chunk-G2SKTGLZ.mjs";import"./chunk-KKQ7C2Q6.mjs";import{Ab as S,Cb as b,Ea as i,Fa as r,Ga as f,K as g,Ka as C,Lb as k,Q as y,R as c,Sa as o,ab as h,na as l,nc as F,oa as d,oc as R,qc as v,wa as _,ya as m}from"./chunk-HA7GHLLK.mjs";import"./chunk-VVCT4QZE.mjs";var q=t=>({"is-invalid":t});function U(t,H){t&1&&(i(0,"div",12)(1,"div",13)(2,"h4",14),o(3,"Registration Error"),r(),i(4,"p"),o(5,"The email address you provided is already registered with us."),r(),f(6,"hr"),i(7,"p",15),o(8," Please "),i(9,"a",16),o(10,"log in"),r(),o(11," instead, or use a different email address. "),r()()())}var O=(()=>{class t{constructor(a,e,n,s){this.fb=a,this.registerService=e,this.authCookie=n,this.router=s,this.loading=!1,this.errorMessage=""}ngOnInit(){this.registrationForm=this.fb.group({email:["hirensojitra007@gmail.com",[p.required,p.email]],pass_key:["S@jitra95",[p.required,p.minLength(6)]]})}register(){if(this.registrationForm.invalid)return;let a=this.registrationForm.value;this.loading=!0,console.log(a),this.registerService.register(a).subscribe({next:e=>{console.log(e),this.loading=!1,this.authCookie.setToken(e.token),e.is_email_verified?this.router.navigate(["/latest"]):(e.email_otp_token&&e.otp_expires_at&&this.authCookie.setOtp(e.email_otp_token,e.otp_expires_at),this.router.navigate(["/authentication/verify-email"],{queryParams:{user_id:e.user_id}}))},error:e=>{this.loading=!1,this.errorMessage=e.message||"Registration failed"}})}static{this.\u0275fac=function(e){return new(e||t)(d(P),d(G),d(M),d(F))}}static{this.\u0275cmp=y({type:t,selectors:[["app-register"]],decls:22,vars:10,consts:[[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control",3,"ngClass"],[1,"form-group","mb-4"],["for","pass_key",1,"form-label"],["type","password","id","pass_key","formControlName","pass_key","placeholder","Enter password",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-dark","w-100","mb-3",3,"disabled"],["class","my-3",4,"ngIf"],[1,"text-center"],[1,"text-decoration-none",3,"routerLink"],[1,"my-3"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"mb-0"],["routerLink","/login"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"h4"),o(2,"Create an account"),r(),i(3,"p"),o(4,"Please enter your email and password to sign up."),r()(),i(5,"form",1),C("ngSubmit",function(){return n.register()}),i(6,"div",2)(7,"label",3),o(8,"E-Mail Address"),r(),f(9,"input",4),r(),i(10,"div",5)(11,"label",6),o(12,"Password"),r(),f(13,"input",7),r(),i(14,"button",8),o(15," Sign Up "),r()(),_(16,U,12,0,"div",9),i(17,"div",10)(18,"p"),o(19,"Already have an account? "),i(20,"a",11),o(21,"Sign In"),r()()()),e&2){let s,u;l(5),m("formGroup",n.registrationForm),l(4),m("ngClass",h(6,q,((s=n.registrationForm.get("email"))==null?null:s.invalid)&&((s=n.registrationForm.get("email"))==null?null:s.touched))),l(4),m("ngClass",h(8,q,((u=n.registrationForm.get("pass_key"))==null?null:u.invalid)&&((u=n.registrationForm.get("pass_key"))==null?null:u.touched))),l(),m("disabled",n.registrationForm.invalid||n.loading),l(2),m("ngIf",n.errorMessage),l(4),m("routerLink","/authentication/login")}},dependencies:[S,b,w,E,N,x,j,I,R,D]})}}return t})();var z=[{path:"",component:O,data:{title:"PostNew | Register",description:"Login or register to PostNew portal for accessing services",keywords:"PostNew, login, register, portal",robots:"index, follow",image:"https://test-ssr-hiren.netlify.app/assets/images/jpg/register.jpg"}}],B=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=g({imports:[v.forChild(z),v]})}}return t})();var me=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=g({imports:[k,L,A,B,T]})}}return t})();export{me as RegisterModule};
